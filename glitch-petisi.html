<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>GLITCH ‚Äî Petisi MBG</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#0A0A0A; --surface:#141414; --surface-elevated:#1E1E1E;
      --border:#2A2A2A; --border2:#1A1A1A;
      --text:#FFFFFF; --text2:#888888; --text3:#444444;
      --accent:#FF4D00; --accent-dim:rgba(255,77,0,0.08);
      --accent-secondary:#00F0FF;
      --green:#39FF14; --green-dim:rgba(57,255,20,0.08);
      --red:#FF006E; --red-dim:rgba(255,0,110,0.08);
      --purple:#BC8CFF;
      --sans:'Plus Jakarta Sans',system-ui,sans-serif;
      --serif:'Instrument Serif',serif;
    }
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
    html{scroll-behavior:smooth;}
    body{background:var(--bg);color:var(--text);font-family:var(--sans);font-weight:500;
      font-size:15px;line-height:1.4;min-height:100vh;overflow-x:hidden;padding-bottom:100px;}

    body::before{content:'';position:fixed;inset:0;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
      pointer-events:none;z-index:9999;opacity:0.4;}

    /* ‚îÄ‚îÄ TICKER ‚îÄ‚îÄ */
    .ticker{background:var(--accent);overflow:hidden;white-space:nowrap;
      padding:10px 0;position:relative;}
    .ticker-inner{display:inline-block;animation:ticker 22s linear infinite;
      font-size:11px;font-weight:800;letter-spacing:.15em;text-transform:uppercase;color:#000;}
    .ticker-inner span{margin:0 32px;opacity:.7;}
    .ticker-inner strong{opacity:1;}
    @keyframes ticker{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header{position:sticky;top:0;background:var(--bg);border-bottom:3px solid var(--border);
      padding:0 16px;display:flex;justify-content:space-between;align-items:center;
      z-index:100;height:56px;overflow:hidden;}
    header::after{content:'';position:absolute;bottom:-3px;left:20%;width:8px;height:12px;
      background:var(--accent);border-radius:0 0 50% 50%;animation:drip 3s ease-in-out infinite;}
    @keyframes drip{0%,100%{height:12px;opacity:1}50%{height:20px;opacity:.7}}

    .back-btn{background:none;border:2px solid var(--border);color:var(--text3);
      font-size:11px;font-weight:800;text-transform:uppercase;letter-spacing:.1em;
      cursor:pointer;padding:6px 12px;display:flex;align-items:center;gap:6px;
      transition:all .2s;text-decoration:none;}
    .back-btn:hover{border-color:var(--accent);color:var(--accent);}

    .petisi-tag{font-size:9px;font-weight:800;letter-spacing:.15em;text-transform:uppercase;
      padding:4px 10px;border:1px solid rgba(255,0,110,.4);color:var(--red);background:var(--red-dim);}

    .user-pill{display:flex;align-items:center;gap:6px;font-size:11px;font-weight:800;
      color:var(--text3);cursor:pointer;padding:6px 12px;border:2px solid var(--border);
      transition:all .2s;text-transform:uppercase;letter-spacing:.05em;}
    .user-pill.in{color:var(--green);border-color:rgba(57,255,20,.3);}
    .udot{width:6px;height:6px;border-radius:50%;background:var(--text3);}
    .udot.on{background:var(--green);}

    /* ‚îÄ‚îÄ PHASE STEPS ‚îÄ‚îÄ */
    .phase-bar{background:var(--surface);border-bottom:2px solid var(--border);
      padding:12px 16px;display:flex;gap:0;overflow-x:auto;scrollbar-width:none;}
    .phase-bar::-webkit-scrollbar{display:none;}

    .phase-step{display:flex;align-items:center;gap:8px;white-space:nowrap;}
    .phase-dot{width:28px;height:28px;border:2px solid var(--border);
      display:flex;align-items:center;justify-content:center;
      font-size:11px;font-weight:800;color:var(--text3);flex-shrink:0;transition:all .3s;}
    .phase-dot.done{border-color:var(--green);background:var(--green-dim);color:var(--green);}
    .phase-dot.active{border-color:var(--accent);background:var(--accent-dim);color:var(--accent);}
    .phase-label{font-size:11px;font-weight:700;color:var(--text3);letter-spacing:.05em;
      text-transform:uppercase;transition:color .3s;}
    .phase-dot.done + .phase-label{color:var(--green);}
    .phase-dot.active + .phase-label{color:var(--accent);}
    .phase-connector{width:24px;height:2px;background:var(--border);flex-shrink:0;margin:0 4px;}
    .phase-connector.done{background:var(--green);}

    /* ‚îÄ‚îÄ SECTIONS ‚îÄ‚îÄ */
    .wrap{max-width:680px;margin:0 auto;padding:0 16px;}

    /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
    .petisi-hero{padding:40px 0 32px;}
    .hero-eyebrow{display:flex;align-items:center;gap:10px;margin-bottom:14px;}
    .eyebrow-line{width:20px;height:2px;background:var(--accent);}
    .eyebrow-text{font-size:10px;font-weight:800;letter-spacing:.15em;color:var(--accent);text-transform:uppercase;}
    .petisi-headline{font-size:clamp(32px,8vw,72px);font-weight:900;
      letter-spacing:-.03em;line-height:.9;text-transform:uppercase;margin-bottom:16px;}
    .petisi-headline em{color:var(--accent);font-style:normal;}
    .petisi-tagline{font-family:var(--serif);font-size:17px;font-style:italic;
      color:var(--text2);line-height:1.6;max-width:440px;margin-bottom:24px;}
    .petisi-tagline strong{color:var(--text);font-style:normal;font-weight:700;}

    /* ‚îÄ‚îÄ SIGNERS COUNTER ‚îÄ‚îÄ */
    .counter-box{background:var(--surface);border:2px solid var(--border);
      padding:32px 24px;text-align:center;position:relative;overflow:hidden;margin-bottom:24px;}
    .counter-box::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;
      background:linear-gradient(90deg,var(--accent),var(--red));
      background-size:200% 100%;animation:gradmove 2s linear infinite;}
    @keyframes gradmove{0%{background-position:0%}100%{background-position:200%}}
    .counter-label{font-size:10px;font-weight:800;letter-spacing:.15em;color:var(--text3);
      text-transform:uppercase;margin-bottom:10px;}
    .counter-num{font-size:clamp(56px,14vw,100px);font-weight:900;letter-spacing:-.04em;
      line-height:1;margin-bottom:6px;}
    .counter-num .c-accent{color:var(--accent);}
    .counter-sub{font-family:var(--serif);font-size:15px;font-style:italic;color:var(--text2);}
    .progress-bar{height:4px;background:var(--border);margin-top:20px;overflow:hidden;}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--red));
      transition:width 1s cubic-bezier(.16,1,.3,1);}
    .progress-label{display:flex;justify-content:space-between;margin-top:8px;
      font-size:10px;font-weight:800;letter-spacing:.1em;color:var(--text3);text-transform:uppercase;}

    /* ‚îÄ‚îÄ PHASE CARDS ‚îÄ‚îÄ */
    .phase-section-label{font-size:10px;font-weight:800;letter-spacing:.15em;
      color:var(--text3);text-transform:uppercase;margin:24px 0 12px;
      display:flex;align-items:center;gap:10px;}
    .phase-section-label::after{content:'';flex:1;height:1px;background:var(--border);}

    .phase-card{background:var(--surface);border:2px solid var(--border);
      padding:20px;margin-bottom:8px;position:relative;overflow:hidden;}
    .phase-card.active-phase{border-color:var(--accent);}
    .phase-card.active-phase::before{content:'';position:absolute;left:0;top:0;bottom:0;
      width:3px;background:var(--accent);}
    .phase-card.done-phase{border-color:rgba(57,255,20,.3);}
    .phase-card.done-phase::before{content:'';position:absolute;left:0;top:0;bottom:0;
      width:3px;background:var(--green);}
    .phase-card.locked-phase{opacity:.5;}

    .pc-head{display:flex;align-items:center;gap:12px;margin-bottom:10px;}
    .pc-num{font-size:11px;font-weight:800;letter-spacing:.1em;color:var(--text3);text-transform:uppercase;}
    .pc-title{font-size:15px;font-weight:800;letter-spacing:-.01em;}
    .pc-status{margin-left:auto;font-size:9px;font-weight:800;letter-spacing:.1em;
      padding:3px 8px;border:1px solid;text-transform:uppercase;}
    .pc-status.done{color:var(--green);border-color:rgba(57,255,20,.3);background:var(--green-dim);}
    .pc-status.active{color:var(--accent);border-color:rgba(255,77,0,.3);background:var(--accent-dim);}
    .pc-status.locked{color:var(--text3);border-color:var(--border2);}

    .pc-desc{font-size:13px;font-weight:500;color:var(--text2);line-height:1.6;}

    .pc-checklist{margin-top:14px;display:flex;flex-direction:column;gap:8px;}
    .pc-check{display:flex;align-items:center;gap:10px;font-size:13px;font-weight:600;}
    .pc-check-icon{width:20px;height:20px;border:1px solid var(--border);
      display:flex;align-items:center;justify-content:center;font-size:11px;flex-shrink:0;}
    .pc-check.checked .pc-check-icon{border-color:var(--green);background:var(--green-dim);color:var(--green);}
    .pc-check.unchecked .pc-check-icon{color:var(--text3);}
    .pc-check.checked .pc-check-label{color:var(--text);}
    .pc-check.unchecked .pc-check-label{color:var(--text3);}

    /* ‚îÄ‚îÄ STANCE SELECTOR ‚îÄ‚îÄ */
    .stance-section{margin-bottom:24px;}
    .stance-title{font-size:14px;font-weight:800;margin-bottom:4px;letter-spacing:-.01em;}
    .stance-desc{font-size:12px;font-weight:500;color:var(--text2);margin-bottom:14px;line-height:1.5;}

    .stance-options{display:flex;flex-direction:column;gap:2px;}
    .stance-opt{background:var(--surface);border:2px solid var(--border);
      padding:14px 16px;cursor:pointer;transition:all .2s;
      display:flex;align-items:flex-start;gap:14px;}
    .stance-opt:hover{background:var(--surface-elevated);}
    .stance-opt.selected{border-color:var(--accent);background:var(--accent-dim);}
    .stance-radio{width:18px;height:18px;border:2px solid var(--border);border-radius:50%;
      flex-shrink:0;margin-top:2px;position:relative;transition:border-color .2s;}
    .stance-opt.selected .stance-radio{border-color:var(--accent);}
    .stance-opt.selected .stance-radio::after{content:'';position:absolute;
      width:8px;height:8px;background:var(--accent);border-radius:50%;
      top:50%;left:50%;transform:translate(-50%,-50%);}
    .stance-opt-title{font-size:14px;font-weight:700;margin-bottom:4px;}
    .stance-opt-desc{font-size:12px;font-weight:500;color:var(--text2);line-height:1.5;}
    .stance-opt.selected .stance-opt-desc{color:var(--text2);}

    .custom-stance{width:100%;background:var(--bg);border:2px solid var(--border);
      color:var(--text);padding:12px 16px;font-family:var(--sans);font-size:14px;
      font-weight:500;resize:none;height:80px;outline:none;margin-top:8px;
      transition:border-color .15s;display:none;}
    .custom-stance:focus{border-color:var(--accent);}
    .custom-stance::placeholder{color:var(--text3);font-size:13px;}

    /* ‚îÄ‚îÄ DELIBERATION CHECK ‚îÄ‚îÄ */
    .delib-gate{background:var(--surface);border:2px solid var(--border);
      border-left:4px solid var(--accent-secondary);padding:20px;margin-bottom:24px;}
    .delib-gate-title{font-size:13px;font-weight:800;color:var(--accent-secondary);
      text-transform:uppercase;letter-spacing:.08em;margin-bottom:10px;}
    .delib-gate p{font-size:13px;font-weight:500;color:var(--text2);line-height:1.6;margin-bottom:14px;}
    .delib-checks{display:flex;flex-direction:column;gap:8px;}
    .delib-check{display:flex;align-items:center;gap:10px;}
    .d-checkbox{width:18px;height:18px;border:2px solid var(--border);
      cursor:pointer;display:flex;align-items:center;justify-content:center;
      flex-shrink:0;transition:all .15s;}
    .d-checkbox.ticked{border-color:var(--accent);background:var(--accent-dim);}
    .d-checkbox.ticked::after{content:'‚úì';font-size:11px;font-weight:800;color:var(--accent);}
    .d-label{font-size:13px;font-weight:600;color:var(--text2);cursor:pointer;}
    .delib-check.ticked .d-label{color:var(--text);}

    /* ‚îÄ‚îÄ SIGN FORM ‚îÄ‚îÄ */
    .sign-area{margin-bottom:24px;}
    .sign-login-gate{background:var(--surface);border:2px solid var(--border);
      padding:20px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;}
    .sign-login-gate h4{font-size:14px;font-weight:800;margin-bottom:4px;}
    .sign-login-gate p{font-size:12px;font-weight:500;color:var(--text2);}
    .login-row{display:flex;gap:8px;}
    .login-inp{background:var(--bg);border:2px solid var(--border);color:var(--text);
      padding:10px 14px;font-family:var(--sans);font-size:13px;font-weight:600;
      outline:none;width:150px;transition:border-color .15s;}
    .login-inp:focus{border-color:var(--accent);}
    .login-inp::placeholder{color:var(--text3);font-size:11px;}
    .login-btn{background:var(--accent);color:#000;border:none;padding:10px 18px;
      font-size:12px;font-weight:800;text-transform:uppercase;letter-spacing:.05em;
      cursor:pointer;transition:all .15s;white-space:nowrap;}
    .login-btn:hover{background:#ff6a1f;}
    .login-btn:disabled{opacity:.35;cursor:not-allowed;}

    .sign-logged{display:none;}
    .sign-who{font-size:10px;font-weight:800;letter-spacing:.08em;color:var(--text3);
      text-transform:uppercase;margin-bottom:12px;display:flex;align-items:center;gap:8px;}
    .who-dot{width:5px;height:5px;border-radius:50%;background:var(--green);}
    .sign-out-link{font-size:9px;font-weight:800;color:var(--text3);cursor:pointer;
      letter-spacing:.1em;transition:color .15s;text-transform:uppercase;}
    .sign-out-link:hover{color:var(--text2);}

    .sign-note-req{font-family:var(--serif);font-size:13px;font-style:italic;
      color:var(--text3);margin-bottom:14px;line-height:1.5;}
    .sign-note-req strong{color:var(--text2);font-style:normal;font-weight:700;}

    /* main sign button */
    .btn-sign{width:100%;background:var(--accent);color:#000;border:none;
      padding:20px 32px;font-size:14px;font-weight:900;text-transform:uppercase;
      letter-spacing:.08em;cursor:pointer;transition:all .2s;position:relative;overflow:hidden;
      display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
    .btn-sign::before{content:'';position:absolute;inset:0;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);
      transform:translateX(-100%);transition:transform .5s;}
    .btn-sign:hover::before{transform:translateX(100%);}
    .btn-sign:hover{background:#ff6a1f;transform:translateY(-2px);}
    .btn-sign:disabled{background:var(--surface-elevated);color:var(--text3);
      cursor:not-allowed;transform:none;}
    .btn-sign:disabled::before{display:none;}
    .btn-sign-label{font-size:14px;}
    .btn-sign-sub{font-size:10px;font-weight:500;text-transform:none;
      font-family:var(--serif);font-style:italic;opacity:.7;}
    .btn-sign-arrow{font-size:20px;flex-shrink:0;}

    .sign-disclaimer{font-size:11px;font-weight:600;color:var(--text3);
      text-align:center;line-height:1.6;}
    .sign-disclaimer a{color:var(--text3);}

    /* ‚îÄ‚îÄ SUCCESS STATE ‚îÄ‚îÄ */
    .success-box{background:var(--green-dim);border:2px solid rgba(57,255,20,.3);
      padding:24px;text-align:center;display:none;margin-bottom:24px;}
    .success-box.show{display:block;}
    .success-icon{font-size:40px;margin-bottom:12px;}
    .success-title{font-size:20px;font-weight:900;color:var(--green);letter-spacing:-.02em;margin-bottom:6px;}
    .success-sub{font-family:var(--serif);font-size:14px;font-style:italic;
      color:var(--text2);line-height:1.6;}

    /* ‚îÄ‚îÄ SIGNATURES FEED ‚îÄ‚îÄ */
    .feed-header{display:flex;align-items:baseline;justify-content:space-between;
      margin-bottom:14px;flex-wrap:wrap;gap:8px;}
    .feed-title{font-size:12px;font-weight:800;letter-spacing:.1em;
      text-transform:uppercase;color:var(--text2);}
    .feed-count{font-size:11px;font-weight:700;color:var(--text3);}
    .sig-feed{display:flex;flex-direction:column;gap:2px;}
    .sig-item{background:var(--surface);border:1px solid var(--border2);
      padding:12px 14px;display:flex;align-items:flex-start;gap:12px;
      animation:fadeUp .3s ease-out;}
    @keyframes fadeUp{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
    .sig-avatar{width:32px;height:32px;background:var(--surface-elevated);
      border:1px solid var(--border);display:flex;align-items:center;justify-content:center;
      font-size:11px;font-weight:800;flex-shrink:0;text-transform:uppercase;}
    .sig-body{flex:1;min-width:0;}
    .sig-top{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-bottom:4px;}
    .sig-name{font-size:11px;font-weight:800;text-transform:uppercase;letter-spacing:.05em;}
    .sig-time{font-size:10px;font-weight:600;color:var(--text3);}
    .sig-stance{font-size:9px;font-weight:800;letter-spacing:.08em;
      padding:2px 7px;border:1px solid rgba(255,77,0,.3);
      color:var(--accent);background:var(--accent-dim);text-transform:uppercase;}
    .sig-text{font-size:13px;font-weight:500;color:var(--text2);line-height:1.5;}
    .sig-text.empty{font-family:var(--serif);font-style:italic;color:var(--text3);}

    /* ‚îÄ‚îÄ DESTINATION BOX ‚îÄ‚îÄ */
    .destination-box{background:var(--surface);border:2px solid var(--border);
      padding:20px;margin:24px 0;}
    .dest-label{font-size:10px;font-weight:800;letter-spacing:.15em;color:var(--text3);
      text-transform:uppercase;margin-bottom:12px;}
    .dest-row{display:flex;align-items:center;gap:12px;padding:10px 0;
      border-bottom:1px solid var(--border2);}
    .dest-row:last-child{border-bottom:none;}
    .dest-icon{font-size:18px;flex-shrink:0;width:28px;text-align:center;}
    .dest-name{font-size:13px;font-weight:700;}
    .dest-sub{font-size:11px;font-weight:500;color:var(--text3);}

    /* ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ */
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--surface);
      border-top:2px solid var(--border);z-index:1000;padding-bottom:env(safe-area-inset-bottom);}
    .nav-inner{max-width:480px;margin:0 auto;display:flex;
      justify-content:space-around;align-items:center;height:64px;}
    .nav-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:4px;height:100%;color:var(--text3);text-decoration:none;
      font-size:10px;font-weight:800;text-transform:uppercase;letter-spacing:.05em;
      transition:all .2s;position:relative;}
    .nav-item::before{content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);
      width:0;height:2px;background:var(--accent);transition:width .2s;}
    .nav-item:hover{color:var(--text2);}
    .nav-item.active{color:var(--accent);}
    .nav-item.active::before{width:100%;}
    .nav-icon{font-size:20px;line-height:1;}

    /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
    .toast{position:fixed;top:16px;left:50%;
      transform:translateX(-50%) translateY(-100px);background:var(--text);color:var(--bg);
      padding:12px 24px;font-size:12px;font-weight:800;text-transform:uppercase;letter-spacing:.05em;
      z-index:10000;opacity:0;transition:all .3s;
      border:2px solid var(--bg);box-shadow:4px 4px 0 var(--accent);}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

    @media(max-width:640px){
      .phase-bar{padding:10px 12px;}
      .petisi-headline{font-size:clamp(28px,10vw,52px);}
      .counter-num{font-size:clamp(44px,14vw,72px);}
      .sign-login-gate{flex-direction:column;align-items:flex-start;}
      .login-row{width:100%;}
      .login-inp{flex:1;width:auto;}
      .btn-sign{padding:16px 20px;}
    }
  </style>
</head>
<body>

<!-- ‚îÄ‚îÄ TICKER ‚îÄ‚îÄ -->
<div class="ticker">
  <div class="ticker-inner">
    <strong>‚úä PETISI MBG</strong>
    <span>¬∑</span> Bedah data dulu, baru bersuara
    <span>¬∑</span> <strong>Rp71T anggaran publik</strong>
    <span>¬∑</span> 27 juta siswa penerima
    <span>¬∑</span> 43% yang sampai ke piring
    <span>¬∑</span> Evaluasi Q2 2025 harus transparan
    <span>¬∑</span>
    <strong>‚úä PETISI MBG</strong>
    <span>¬∑</span> Bedah data dulu, baru bersuara
    <span>¬∑</span> <strong>Rp71T anggaran publik</strong>
    <span>¬∑</span> 27 juta siswa penerima
    <span>¬∑</span> 43% yang sampai ke piring
    <span>¬∑</span> Evaluasi Q2 2025 harus transparan
    <span>¬∑</span>
  </div>
</div>

<!-- ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ -->
<header>
  <div style="display:flex;align-items:center;gap:10px;">
    <a class="back-btn" href="glitch-issue.html">‚Üê Kembali</a>
    <span class="petisi-tag">PETISI AKTIF</span>
  </div>
  <div class="user-pill" id="userPill" onclick="focusSignin()">
    <div class="udot" id="udot"></div>
    <span id="pillText">Masuk</span>
  </div>
</header>

<!-- ‚îÄ‚îÄ PHASE BAR ‚îÄ‚îÄ -->
<div class="phase-bar">
  <div class="phase-step">
    <div class="phase-dot done" id="dot1">‚úì</div>
    <span class="phase-label">Baca Data</span>
  </div>
  <div class="phase-connector done"></div>
  <div class="phase-step">
    <div class="phase-dot" id="dot2">2</div>
    <span class="phase-label">Deliberasi</span>
  </div>
  <div class="phase-connector" id="con2"></div>
  <div class="phase-step">
    <div class="phase-dot" id="dot3">3</div>
    <span class="phase-label">Tanda Tangan</span>
  </div>
</div>

<div class="wrap">

  <!-- ‚îÄ‚îÄ HERO ‚îÄ‚îÄ -->
  <div class="petisi-hero">
    <div class="hero-eyebrow">
      <div class="eyebrow-line"></div>
      <div class="eyebrow-text">Petisi Kolektif ¬∑ MBG 2025</div>
    </div>
    <div class="petisi-headline">KAMI<br>MEMINTA<br><em>TRANSPARANSI</em></div>
    <p class="petisi-tagline">Program makan bergizi gratis untuk 27 juta siswa adalah niat yang kami hormati. <strong>Tapi Rp71T anggaran publik berhak dipertanggungjawabkan secara terbuka.</strong></p>
  </div>

  <!-- ‚îÄ‚îÄ COUNTER ‚îÄ‚îÄ -->
  <div class="counter-box">
    <div class="counter-label">Total Penandatangan</div>
    <div class="counter-num"><span id="sigCount">1</span><span class="c-accent">.</span><span id="sigCount2">247</span></div>
    <div class="counter-sub">dari target <strong style="color:var(--text)">10.000</strong> tanda tangan</div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width:12.47%"></div>
    </div>
    <div class="progress-label">
      <span id="progressPct">12.47%</span>
      <span>Target: 10.000</span>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ PHASES ‚îÄ‚îÄ -->
  <div class="phase-section-label">Alur Deliberasi</div>

  <div class="phase-card done-phase">
    <div class="pc-head">
      <div class="pc-num">Fase 01</div>
      <div class="pc-title">Baca & Bedah Data</div>
      <div class="pc-status done">Selesai</div>
    </div>
    <p class="pc-desc">Infografis data kontras, 5 pertanyaan pemantik, dan diskusi publik tersedia di halaman isu.</p>
    <div class="pc-checklist">
      <div class="pc-check checked"><div class="pc-check-icon">‚úì</div><span class="pc-check-label">Infografis kontras Rp15.000 vs Rp6.500/porsi</span></div>
      <div class="pc-check checked"><div class="pc-check-icon">‚úì</div><span class="pc-check-label">5 pertanyaan pemantik berbasis data</span></div>
      <div class="pc-check checked"><div class="pc-check-icon">‚úì</div><span class="pc-check-label">Diskusi publik terbuka dengan 24+ suara masuk</span></div>
    </div>
  </div>

  <div class="phase-card active-phase" id="phase2card">
    <div class="pc-head">
      <div class="pc-num">Fase 02</div>
      <div class="pc-title">Deliberasi Internal</div>
      <div class="pc-status active" id="phase2status">Opsional</div>
    </div>
    <p class="pc-desc">Diskusi mendalam di Ruang Aman universitasmu sebelum bersuara kolektif. PIN-gated, ephemeral, otonom.</p>
    <div class="pc-checklist">
      <div class="pc-check" id="ck-ruangaman"><div class="pc-check-icon">‚óã</div><span class="pc-check-label">Masuk ke Ruang Aman universitas</span></div>
      <div class="pc-check unchecked"><div class="pc-check-icon">‚óã</div><span class="pc-check-label">Deliberasi dengan komunitas (opsional tapi direkomendasikan)</span></div>
    </div>
    <div style="margin-top:14px;">
      <a href="glitch-ruangaman.html" style="display:inline-block;background:rgba(0,240,255,.08);
        border:1px solid rgba(0,240,255,.3);color:var(--accent-secondary);
        padding:8px 16px;font-size:11px;font-weight:800;text-transform:uppercase;
        letter-spacing:.1em;text-decoration:none;transition:all .2s;"
        onmouseover="this.style.background='rgba(0,240,255,.15)'"
        onmouseout="this.style.background='rgba(0,240,255,.08)'">
        Buka Ruang Aman ‚Üí
      </a>
    </div>
  </div>

  <div class="phase-card" id="phase3card">
    <div class="pc-head">
      <div class="pc-num">Fase 03</div>
      <div class="pc-title">Tanda Tangan Petisi</div>
      <div class="pc-status locked" id="phase3status">Di bawah ‚Üì</div>
    </div>
    <p class="pc-desc">Pilih posisi lo, isi pernyataan opsional, dan tanda tangan. Bisa dilakukan setelah baca data di fase 01.</p>
  </div>

  <!-- ‚îÄ‚îÄ TUNTUTAN ‚îÄ‚îÄ -->
  <div class="phase-section-label">Tuntutan Kami</div>

  <div style="background:var(--surface);border:2px solid var(--border);margin-bottom:24px;">
    <div style="border-left:4px solid var(--accent);padding:20px;">
      <div style="font-size:10px;font-weight:800;letter-spacing:.15em;color:var(--accent);text-transform:uppercase;margin-bottom:16px;">Kami meminta pemerintah untuk:</div>
      <div style="display:flex;flex-direction:column;gap:14px;">
        <div style="display:flex;gap:14px;">
          <div style="font-size:20px;font-weight:900;color:var(--accent);flex-shrink:0;line-height:1;">01</div>
          <div>
            <div style="font-size:14px;font-weight:700;margin-bottom:4px;">Publikasi rincian anggaran per komponen</div>
            <div style="font-size:12px;font-weight:500;color:var(--text2);line-height:1.5;">Breakdown logistik, bahan pangan, tenaga, dan overhead dibuka ke publik ‚Äî bukan hanya total anggaran.</div>
          </div>
        </div>
        <div style="display:flex;gap:14px;">
          <div style="font-size:20px;font-weight:900;color:var(--accent);flex-shrink:0;line-height:1;">02</div>
          <div>
            <div style="font-size:14px;font-weight:700;margin-bottom:4px;">Audit independen Q2 2025 dengan indikator gizi</div>
            <div style="font-size:12px;font-weight:500;color:var(--text2);line-height:1.5;">Evaluasi harus mencakup angka stunting dan outcome gizi ‚Äî bukan hanya laporan distribusi porsi.</div>
          </div>
        </div>
        <div style="display:flex;gap:14px;">
          <div style="font-size:20px;font-weight:900;color:var(--accent);flex-shrink:0;line-height:1;">03</div>
          <div>
            <div style="font-size:14px;font-weight:700;margin-bottom:4px;">Mekanisme pengaduan terbuka bagi orang tua & guru</div>
            <div style="font-size:12px;font-weight:500;color:var(--text2);line-height:1.5;">Kanal laporan kualitas makanan yang bisa diakses dan direspons dalam batas waktu terukur.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ DELIBERATION CHECK ‚îÄ‚îÄ -->
  <div class="delib-gate" id="deliberationGate">
    <div class="delib-gate-title">‚Ü≥ Konfirmasi Deliberasi</div>
    <p>Sebelum tanda tangan, pastikan lo sudah membaca data dan memiliki posisi yang didasarkan pada fakta ‚Äî bukan sekedar ikut-ikutan.</p>
    <div class="delib-checks">
      <div class="delib-check" id="dc1">
        <div class="d-checkbox" id="cb1" onclick="toggleCheck(1)"></div>
        <span class="d-label" onclick="toggleCheck(1)">Sudah membaca infografis data MBG di halaman isu</span>
      </div>
      <div class="delib-check" id="dc2">
        <div class="d-checkbox" id="cb2" onclick="toggleCheck(2)"></div>
        <span class="d-label" onclick="toggleCheck(2)">Memahami posisi saya sendiri ‚Äî bukan sekedar ikut tren</span>
      </div>
      <div class="delib-check" id="dc3">
        <div class="d-checkbox" id="cb3" onclick="toggleCheck(3)"></div>
        <span class="d-label" onclick="toggleCheck(3)">Siap mempertanggungjawabkan posisi ini jika ditanya</span>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ STANCE SELECTOR ‚îÄ‚îÄ -->
  <div class="stance-section">
    <div class="stance-title">Pilih Posisi Lo</div>
    <div class="stance-desc">Bukan soal setuju atau menolak programnya ‚Äî tapi tentang apa yang lo tuntut dari cara program ini dijalankan.</div>
    <div class="stance-options" id="stanceOptions">
      <div class="stance-opt" data-stance="transparansi" onclick="selectStance(this)">
        <div class="stance-radio"></div>
        <div>
          <div class="stance-opt-title">Dukung program, tuntut transparansi</div>
          <div class="stance-opt-desc">Program ini niatnya baik ‚Äî tapi Rp71T butuh akuntabilitas penuh. Saya menandatangani untuk menuntut keterbukaan, bukan menghentikan program.</div>
        </div>
      </div>
      <div class="stance-opt" data-stance="reformasi" onclick="selectStance(this)">
        <div class="stance-radio"></div>
        <div>
          <div class="stance-opt-title">Dukung program, tuntut reformasi skema</div>
          <div class="stance-opt-desc">Saya mendukung tujuannya tapi model distribusi perlu dirombak ‚Äî terutama untuk menjangkau daerah 3T yang paling butuh.</div>
        </div>
      </div>
      <div class="stance-opt" data-stance="moratorium" onclick="selectStance(this)">
        <div class="stance-radio"></div>
        <div>
          <div class="stance-opt-title">Minta moratorium hingga audit selesai</div>
          <div class="stance-opt-desc">Program harus ditunda sampai ada audit independen dan data gizi yang valid. Lebih baik lambat tapi tepat sasaran.</div>
        </div>
      </div>
      <div class="stance-opt" data-stance="lainnya" onclick="selectStance(this)">
        <div class="stance-radio"></div>
        <div>
          <div class="stance-opt-title">Posisi lain (tuliskan sendiri)</div>
          <div class="stance-opt-desc">Posisi saya lebih nuanced dari pilihan di atas.</div>
        </div>
      </div>
    </div>
    <textarea class="custom-stance" id="customStance"
      placeholder="Tuliskan posisi lo secara singkat dan jelas..."
      maxlength="200" oninput="validateSign()"></textarea>
  </div>

  <!-- ‚îÄ‚îÄ SIGN AREA ‚îÄ‚îÄ -->
  <div class="sign-area" id="signArea">

    <!-- NOT LOGGED IN -->
    <div class="sign-login-gate" id="signLoginGate">
      <div>
        <h4>Tanda tangan sebagai?</h4>
        <p>Masukkan username Jejak ‚Äî satu langkah langsung masuk.</p>
      </div>
      <div class="login-row">
        <input type="text" class="login-inp" id="signLoginInput"
          placeholder="username lo..." maxlength="30"
          oninput="validateSignLogin()"
          onkeydown="if(event.key==='Enter')doSignLogin()"/>
        <button class="login-btn" id="signLoginBtn" onclick="doSignLogin()" disabled>Masuk</button>
      </div>
    </div>

    <!-- LOGGED IN -->
    <div class="sign-logged" id="signLogged">
      <div class="sign-who">
        <div class="who-dot"></div>
        <span id="signWhoLabel">‚Äî</span>
        <span style="color:var(--text3)">¬∑</span>
        <span class="sign-out-link" onclick="signOut()">Ganti Akun</span>
      </div>
      <p class="sign-note-req">Pilih posisi dan centang ketiga konfirmasi deliberasi sebelum tanda tangan. <strong>Tanda tangan yang bermakna ‚Äî bukan impulsif.</strong></p>
    </div>

    <!-- SUCCESS -->
    <div class="success-box" id="successBox">
      <div class="success-icon">‚úä</div>
      <div class="success-title">Tanda Tangan Diterima</div>
      <p class="success-sub">Suara lo sudah tercatat. Petisi ini akan dikirim ke pihak-pihak di bawah begitu target tercapai.</p>
    </div>

    <!-- SIGN BUTTON -->
    <button class="btn-sign" id="btnSign" onclick="submitSign()" disabled>
      <div>
        <div class="btn-sign-label">Tanda Tangani Sekarang</div>
        <div class="btn-sign-sub">bersuara setelah berpikir ‚Äî itu yang membuat perbedaan</div>
      </div>
      <span class="btn-sign-arrow">‚úä</span>
    </button>
    <div class="sign-disclaimer">Dengan menandatangani, lo menyatakan posisi lo secara sadar dan sukarela.<br>Jejak tidak mempergunakan data ini untuk kepentingan lain.</div>
  </div>

  <!-- ‚îÄ‚îÄ SIGNATURES FEED ‚îÄ‚îÄ -->
  <div style="margin-top:32px;margin-bottom:32px;">
    <div class="feed-header">
      <div class="feed-title">Tanda Tangan Terbaru</div>
      <div class="feed-count" id="feedCount">‚Äî penandatangan</div>
    </div>
    <div class="sig-feed" id="sigFeed">
      <!-- seed entries -->
      <div class="sig-item">
        <div class="sig-avatar" style="color:var(--accent)">EM</div>
        <div class="sig-body">
          <div class="sig-top"><span class="sig-name">embun.pagi</span><span class="sig-stance">Transparansi</span><span class="sig-time">2j lalu</span></div>
          <div class="sig-text">Evaluasi harus pakai angka stunting, bukan cuma laporan distribusi porsi. Ini basic akuntabilitas publik.</div>
        </div>
      </div>
      <div class="sig-item">
        <div class="sig-avatar" style="color:var(--accent-secondary)">SI</div>
        <div class="sig-body">
          <div class="sig-top"><span class="sig-name">siska.ipb</span><span class="sig-stance">Reformasi Skema</span><span class="sig-time">3j lalu</span></div>
          <div class="sig-text">Daerah 3T biaya logistiknya 3‚Äì4x lipat tapi anggaran flat semua daerah. Ini masalah desain yang harus dirombak.</div>
        </div>
      </div>
      <div class="sig-item">
        <div class="sig-avatar" style="color:var(--purple)">NB</div>
        <div class="sig-body">
          <div class="sig-top"><span class="sig-name">nalar.bebas</span><span class="sig-stance">Transparansi</span><span class="sig-time">5j lalu</span></div>
          <div class="sig-text">Program niatnya baik, tapi Rp71T tanpa breakdown yang jelas itu bukan transparansi ‚Äî itu kepercayaan buta.</div>
        </div>
      </div>
      <div class="sig-item">
        <div class="sig-avatar" style="color:var(--green)">BA</div>
        <div class="sig-body">
          <div class="sig-top"><span class="sig-name">bara.api</span><span class="sig-stance">Reformasi Skema</span><span class="sig-time">8j lalu</span></div>
          <div class="sig-text empty">‚Äî menandatangani tanpa komentar ‚Äî</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ DESTINATION ‚îÄ‚îÄ -->
  <div class="destination-box">
    <div class="dest-label">Petisi akan dikirim ke</div>
    <div class="dest-row">
      <div class="dest-icon">üèõÔ∏è</div>
      <div><div class="dest-name">Badan Gizi Nasional (BGN)</div><div class="dest-sub">Penyelenggara program MBG</div></div>
    </div>
    <div class="dest-row">
      <div class="dest-icon">üìã</div>
      <div><div class="dest-name">Komisi X DPR RI</div><div class="dest-sub">Komisi pendidikan dan kepemudaan</div></div>
    </div>
    <div class="dest-row">
      <div class="dest-icon">üîç</div>
      <div><div class="dest-name">BPK RI</div><div class="dest-sub">Badan Pemeriksa Keuangan ‚Äî permintaan audit independen</div></div>
    </div>
  </div>

</div><!-- end wrap -->

<!-- ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ -->
<nav class="bottom-nav">
  <div class="nav-inner">
    <a href="jejak.html" class="nav-item"><span class="nav-icon">‚ú¶</span><span>Jejak</span></a>
    <a href="cocomeo.html" class="nav-item"><span class="nav-icon">„Äú</span><span>Cocomeo</span></a>
    <a href="saynope.html" class="nav-item"><span class="nav-icon">‚úï</span><span>Spill</span></a>
    <a href="glitch.html" class="nav-item active"><span class="nav-icon">‚ö°</span><span>Glitch</span></a>
  </div>
</nav>

<div class="toast" id="toast"></div>

<script>
const SUPABASE_URL = 'https://fuovfrdicdhnlymnacpz.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ1b3ZmcmRpY2Robmx5bW5hY3B6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwMjYxMzEsImV4cCI6MjA4MjYwMjEzMX0.oX4fVTEIWiRG2NaNJJKOV8dTnSHWhicLVMIFzZUl1o0';

let user = localStorage.getItem('nope_username') || null;
let selectedStance = null;
let checks = {1:false, 2:false, 3:false};
let hasSigned = localStorage.getItem('petisi_mbg_signed') === '1';
let sigTotal = 1247;

function init() {
  updateUserUI();
  loadCounter();
  if (hasSigned) showSuccess();
  document.getElementById('feedCount').textContent = sigTotal.toLocaleString('id') + ' penandatangan';
}

// ‚îÄ‚îÄ USER ‚îÄ‚îÄ
function updateUserUI() {
  const pill = document.getElementById('userPill');
  const dot = document.getElementById('udot');
  const txt = document.getElementById('pillText');
  const gate = document.getElementById('signLoginGate');
  const logged = document.getElementById('signLogged');

  if (user) {
    pill.className = 'user-pill in';
    dot.className = 'udot on';
    txt.textContent = '@' + user;
    gate.style.display = 'none';
    logged.style.display = 'block';
    document.getElementById('signWhoLabel').textContent = '@' + user;
  } else {
    pill.className = 'user-pill';
    dot.className = 'udot';
    txt.textContent = 'Masuk';
    gate.style.display = 'flex';
    logged.style.display = 'none';
  }
  validateSign();
}

function focusSignin() {
  if (user) return;
  document.getElementById('signArea').scrollIntoView({behavior:'smooth'});
  setTimeout(() => document.getElementById('signLoginInput').focus(), 400);
}

function validateSignLogin() {
  document.getElementById('signLoginBtn').disabled =
    document.getElementById('signLoginInput').value.trim().length < 2;
}

function doSignLogin() {
  const raw = document.getElementById('signLoginInput').value.trim();
  if (raw.length < 2) return;
  const u = raw.toLowerCase().replace(/\s+/g,'.').replace(/[^a-z0-9.]/g,'');
  if (u.length < 2) return;
  user = u;
  localStorage.setItem('nope_username', u);
  updateUserUI();
  toast('Masuk sebagai @' + u + ' ‚úì');
}

function signOut() {
  user = null;
  localStorage.removeItem('nope_username');
  updateUserUI();
}

// ‚îÄ‚îÄ DELIBERATION CHECKS ‚îÄ‚îÄ
function toggleCheck(n) {
  checks[n] = !checks[n];
  const box = document.getElementById('cb' + n);
  const row = document.getElementById('dc' + n);
  box.className = 'd-checkbox' + (checks[n] ? ' ticked' : '');
  row.className = 'delib-check' + (checks[n] ? ' ticked' : '');
  validateSign();
}

// ‚îÄ‚îÄ STANCE ‚îÄ‚îÄ
function selectStance(el) {
  document.querySelectorAll('.stance-opt').forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
  selectedStance = el.dataset.stance;
  const custom = document.getElementById('customStance');
  custom.style.display = selectedStance === 'lainnya' ? 'block' : 'none';
  if (selectedStance === 'lainnya') custom.focus();
  validateSign();
}

// ‚îÄ‚îÄ VALIDATE SIGN ‚îÄ‚îÄ
function validateSign() {
  const allChecks = checks[1] && checks[2] && checks[3];
  const hasStance = selectedStance && (selectedStance !== 'lainnya' ||
    document.getElementById('customStance').value.trim().length >= 5);
  const loggedIn = !!user;
  const notSigned = !hasSigned;
  document.getElementById('btnSign').disabled = !(allChecks && hasStance && loggedIn && notSigned);
}

// ‚îÄ‚îÄ COUNTER ‚îÄ‚îÄ
function loadCounter() {
  const storedExtra = parseInt(localStorage.getItem('petisi_extra') || '0');
  const total = sigTotal + storedExtra;
  updateCounter(total);
}

function updateCounter(n) {
  const str = n.toLocaleString('id-ID');
  const parts = str.split('.');
  document.getElementById('sigCount').textContent = parts[0];
  document.getElementById('sigCount2').textContent = parts.slice(1).join('.');
  const pct = (n / 10000 * 100).toFixed(2);
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressPct').textContent = pct + '%';
}

// ‚îÄ‚îÄ SUBMIT ‚îÄ‚îÄ
async function submitSign() {
  if (!user || !selectedStance || !checks[1] || !checks[2] || !checks[3]) return;

  const stanceText = selectedStance === 'lainnya'
    ? document.getElementById('customStance').value.trim()
    : selectedStance;

  const extra = parseInt(localStorage.getItem('petisi_extra') || '0') + 1;
  localStorage.setItem('petisi_extra', extra);
  localStorage.setItem('petisi_mbg_signed', '1');
  hasSigned = true;

  updateCounter(sigTotal + extra);

  // Add to feed
  addToFeed(user, stanceText);

  showSuccess();
  validateSign();
  document.getElementById('feedCount').textContent = (sigTotal + extra).toLocaleString('id') + ' penandatangan';

  // Post to Supabase
  try {
    await fetch(SUPABASE_URL + '/rest/v1/rants', {
      method: 'POST',
      headers: {
        'apikey': SUPABASE_KEY,
        'Authorization': 'Bearer ' + SUPABASE_KEY,
        'Content-Type': 'application/json',
        'Prefer': 'return=minimal'
      },
      body: JSON.stringify({
        author: user,
        content: '[PETISI-MBG][' + stanceText + '] ‚Äî tanda tangan kolektif',
        mood: 'chaotic',
        created_at: new Date().toISOString()
      })
    });
  } catch(e) { console.log(e); }
}

function addToFeed(username, stance) {
  const feed = document.getElementById('sigFeed');
  const labels = {
    transparansi: 'Transparansi',
    reformasi: 'Reformasi Skema',
    moratorium: 'Moratorium',
    lainnya: 'Posisi Lain'
  };
  const colors = ['var(--accent)','var(--accent-secondary)','var(--purple)','var(--green)'];
  const color = colors[Math.floor(Math.random() * colors.length)];
  const initials = username.slice(0,2).toUpperCase();
  const stanceLabel = labels[stance] || stance;

  const el = document.createElement('div');
  el.className = 'sig-item';
  el.innerHTML = `
    <div class="sig-avatar" style="color:${color}">${initials}</div>
    <div class="sig-body">
      <div class="sig-top">
        <span class="sig-name">${esc(username)}</span>
        <span class="sig-stance">${esc(stanceLabel)}</span>
        <span class="sig-time">Baru saja</span>
      </div>
      <div class="sig-text empty">‚Äî menandatangani petisi ini ‚Äî</div>
    </div>`;
  feed.insertBefore(el, feed.firstChild);
}

function showSuccess() {
  document.getElementById('successBox').classList.add('show');
  document.getElementById('btnSign').style.display = 'none';
  // update phase dots
  document.getElementById('dot2').className = 'phase-dot done';
  document.getElementById('dot2').textContent = '‚úì';
  document.getElementById('dot3').className = 'phase-dot done';
  document.getElementById('dot3').textContent = '‚úì';
  document.getElementById('con2').className = 'phase-connector done';
}

// ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ
function esc(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

let _t;
function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  clearTimeout(_t);
  _t = setTimeout(() => el.classList.remove('show'), 2500);
}

init();
</script>
</body>
</html>
