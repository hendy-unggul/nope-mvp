<!DOCTYPE html>
<html lang="id" data-theme="glitch">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NOPE ‚Äî Bola Live</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23ff9999'/%3E%3Ctext x='50' y='70' font-size='60' font-weight='bold' font-family='system-ui' text-anchor='middle' fill='%23000'%3ENO%3C/text%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="frekuensi-shared.css">
  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    /* Live Streaming Bola Styles */
    .live-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .match-header {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .match-teams {
      display: flex;
      align-items: center;
      gap: 20px;
      flex: 1;
    }
    
    .team {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .team-logo {
      width: 48px;
      height: 48px;
      background: var(--surface-elevated);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      border: 2px solid var(--border);
    }
    
    .team-name {
      font-size: 18px;
      font-weight: 600;
      color: var(--text);
    }
    
    .vs {
      font-size: 14px;
      color: var(--muted);
      font-weight: 500;
      padding: 8px 16px;
      background: rgba(178, 102, 255, 0.1);
      border-radius: 20px;
      border: 1px solid var(--accent);
    }
    
    .match-info {
      text-align: right;
    }
    
    .live-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #ff4444;
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .live-badge::before {
      content: '';
      width: 8px;
      height: 8px;
      background: white;
      border-radius: 50%;
      animation: blink 1s infinite;
    }
    
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }
    
    .match-time {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
      margin-top: 8px;
      font-family: 'JetBrains Mono', monospace;
    }
    
    .main-layout {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 20px;
    }
    
    @media (max-width: 1024px) {
      .main-layout {
        grid-template-columns: 1fr;
      }
    }
    
    /* Video Player Section */
    .video-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      background: #000;
    }
    
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .video-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 10;
    }
    
    .prediction-toast {
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.95);
      border: 2px solid var(--accent);
      border-radius: 16px;
      padding: 20px 28px;
      color: white;
      font-size: 15px;
      opacity: 0;
      transition: all 0.3s;
      pointer-events: auto;
      max-width: 90%;
      min-width: 320px;
      box-shadow: 0 20px 60px rgba(178, 102, 255, 0.3);
    }
    
    .prediction-toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(-10px);
    }
    
    .prediction-toast-title {
      font-weight: 700;
      margin-bottom: 12px;
      color: var(--accent);
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .prediction-timer {
      font-size: 32px;
      font-weight: 800;
      text-align: center;
      margin: 16px 0;
      font-family: 'JetBrains Mono', monospace;
      color: #ff9999;
      text-shadow: 0 0 20px rgba(255, 153, 153, 0.5);
    }
    
    .prediction-options {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .pred-btn {
      background: var(--surface-elevated);
      border: 2px solid var(--border);
      color: var(--text);
      padding: 12px 24px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s;
      font-family: 'JetBrains Mono', monospace;
      min-width: 100px;
    }
    
    .pred-btn:hover {
      border-color: var(--accent);
      background: rgba(178, 102, 255, 0.2);
      transform: translateY(-2px);
    }
    
    /* Stats Bar */
    .stats-bar {
      display: flex;
      align-items: center;
      justify-content: space-around;
      padding: 16px;
      background: var(--surface-elevated);
      border-top: 1px solid var(--border);
      font-size: 13px;
    }
    
    .stat-item {
      text-align: center;
    }
    
    .stat-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent);
      font-family: 'JetBrains Mono', monospace;
    }
    
    .stat-label {
      color: var(--muted);
      margin-top: 4px;
    }
    
    /* Sidebar */
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .panel-header {
      padding: 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .panel-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .panel-content {
      padding: 16px;
    }
    
    /* Prediction Panel */
    .current-prediction {
      background: linear-gradient(135deg, rgba(178, 102, 255, 0.1), rgba(255, 153, 153, 0.1));
      border: 1px solid var(--accent);
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 16px;
    }
    
    .pred-question {
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 12px;
      line-height: 1.5;
    }
    
    .pred-timer-bar {
      height: 4px;
      background: var(--border);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 12px;
    }
    
    .pred-timer-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), #ff9999);
      transition: width 1s linear;
    }
    
    .pred-options-vertical {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .pred-option-btn {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      background: var(--surface-elevated);
      border: 1px solid var(--border);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: left;
      width: 100%;
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
    }
    
    .pred-option-btn:hover:not(:disabled) {
      border-color: var(--accent);
      background: rgba(178, 102, 255, 0.15);
      transform: translateX(4px);
    }
    
    .pred-option-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .pred-option-btn.voted {
      border-color: var(--accent);
      background: rgba(178, 102, 255, 0.25);
      box-shadow: 0 0 20px rgba(178, 102, 255, 0.2);
    }
    
    .pred-option-btn.correct {
      border-color: #4ade80;
      background: rgba(74, 222, 128, 0.2);
    }
    
    .pred-option-btn.wrong {
      border-color: #ef4444;
      background: rgba(239, 68, 68, 0.1);
    }
    
    .pred-percentage {
      font-weight: 700;
      color: var(--accent);
      font-size: 14px;
    }
    
    .pred-results {
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }
    
    .result-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      font-size: 12px;
    }
    
    .result-label {
      width: 80px;
      color: var(--muted);
    }
    
    .result-track {
      flex: 1;
      height: 8px;
      background: var(--border);
      border-radius: 4px;
      overflow: hidden;
    }
    
    .result-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), #ff9999);
      border-radius: 4px;
      transition: width 0.5s;
    }
    
    .result-count {
      width: 50px;
      text-align: right;
      color: var(--muted);
      font-family: 'JetBrains Mono', monospace;
    }
    
    /* Polling Panel */
    .poll-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .poll-item {
      padding: 14px;
      background: var(--surface-elevated);
      border-radius: 10px;
      border: 1px solid var(--border);
    }
    
    .poll-question {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 12px;
    }
    
    .poll-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .poll-btn {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'JetBrains Mono', monospace;
      font-weight: 500;
    }
    
    .poll-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
      transform: translateY(-1px);
    }
    
    .poll-btn.selected {
      background: var(--accent);
      color: #000;
      border-color: var(--accent);
    }
    
    /* Leaderboard */
    .leaderboard-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .leader-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--surface-elevated);
      border-radius: 10px;
      font-size: 13px;
      transition: all 0.2s;
    }
    
    .leader-item:hover {
      background: rgba(178, 102, 255, 0.08);
      transform: translateX(4px);
    }
    
    .leader-item.you {
      border: 1px solid var(--accent);
      background: rgba(178, 102, 255, 0.15);
    }
    
    .leader-rank {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--border);
      border-radius: 50%;
      font-weight: 700;
      font-size: 12px;
      font-family: 'JetBrains Mono', monospace;
    }
    
    .leader-rank.top {
      background: linear-gradient(135deg, var(--accent), #ff9999);
      color: #000;
    }
    
    .leader-name {
      flex: 1;
      font-weight: 600;
    }
    
    .leader-points {
      font-weight: 700;
      color: var(--accent);
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
    }
    
    /* Chat Section */
    .chat-messages {
      height: 320px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 12px;
      padding-right: 8px;
    }
    
    .chat-message {
      padding: 10px 14px;
      background: var(--surface-elevated);
      border-radius: 12px;
      font-size: 13px;
      line-height: 1.4;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .chat-user {
      font-weight: 700;
      color: var(--accent);
      margin-right: 6px;
    }
    
    .chat-user.system {
      color: #ff9999;
    }
    
    .chat-input-area {
      display: flex;
      gap: 10px;
    }
    
    .chat-input {
      flex: 1;
      padding: 12px 16px;
      background: var(--surface-elevated);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 13px;
      font-family: 'JetBrains Mono', monospace;
      transition: all 0.2s;
    }
    
    .chat-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(178, 102, 255, 0.1);
    }
    
    .chat-send {
      padding: 12px 20px;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      transition: all 0.2s;
    }
    
    .chat-send:hover {
      background: #c284ff;
      transform: translateY(-2px);
    }
    
    .chat-send:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    /* User Profile Mini */
    .user-mini {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px;
      background: var(--surface-elevated);
      border-radius: 12px;
    }
    
    .user-avatar {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--accent), #ff9999);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      color: #000;
      font-size: 18px;
      box-shadow: 0 4px 20px rgba(178, 102, 255, 0.3);
    }
    
    .user-info {
      flex: 1;
    }
    
    .user-name {
      font-weight: 700;
      font-size: 15px;
      margin-bottom: 4px;
    }
    
    .user-points {
      font-size: 13px;
      color: var(--muted);
    }
    
    .user-badge {
      padding: 6px 14px;
      background: rgba(178, 102, 255, 0.2);
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    /* Connection Status */
    .connection-status {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 10px 16px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 1000;
      transition: all 0.3s;
    }
    
    .connection-status.online {
      border-color: #4ade80;
      color: #4ade80;
    }
    
    .connection-status.offline {
      border-color: #ef4444;
      color: #ef4444;
    }
    
    .connection-status.connecting {
      border-color: #fbbf24;
      color: #fbbf24;
    }
    
    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--surface);
      border: 1px solid var(--accent);
      border-radius: 12px;
      padding: 18px 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      transform: translateX(400px);
      transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      z-index: 1000;
      max-width: 340px;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification-title {
      font-weight: 700;
      margin-bottom: 6px;
      color: var(--accent);
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .notification-text {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
    }
    
    /* Loading States */
    .skeleton {
      background: linear-gradient(90deg, var(--surface-elevated) 25%, var(--border) 50%, var(--surface-elevated) 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
      border-radius: 6px;
    }
    
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .match-header {
        flex-direction: column;
        text-align: center;
      }
      
      .match-teams {
        justify-content: center;
      }
      
      .match-info {
        text-align: center;
      }
      
      .stats-bar {
        flex-wrap: wrap;
        gap: 16px;
      }
      
      .prediction-toast {
        min-width: 280px;
        padding: 16px 20px;
      }
    }
    
    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: var(--surface);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--accent);
    }
  </style>
</head>
<body>
  <!-- Connection Status -->
  <div class="connection-status connecting" id="connection-status">
    <span class="loading-spinner"></span>
    <span>Connecting to Supabase...</span>
  </div>

  <div class="wrapper">
    <header>
      <div class="logo" onclick="window.location.href='index.html'">NOPE</div>
      <div class="top-right">
        <div class="nav-mini">
          <span onclick="window.location.href='jejak.html'">Jurnal</span>
          <span class="active">Frekuensi</span>
          <span onclick="window.location.href='saynope.html'">SayNOPE</span>
          <span onclick="window.location.href='glitch.html'">GLITCH</span>
        </div>
        <button class="settings-btn" id="settings-btn">‚ãØ</button>
      </div>
    </header>

    <div class="mood-tagline">
      Piala Soeratin 2026 -Live streaming<br>
      Official Media
    </div>

    <div class="tab-navigation">
      <a href="frekuensi-zones.html" class="tab-btn">
        <span>üí¨</span> Zones
      </a>
      <a href="frekuensi-hangouts.html" class="tab-btn">
        <span>üìç</span> Hangouts
      </a>
      <a href="frekuensi-bola.html" class="tab-btn active">
        <span>‚öΩ</span> Bola
      </a>
    </div>

    <!-- LIVE STREAMING CONTENT -->
    <div class="live-container">
      <!-- Match Header -->
      <div class="match-header">
        <div class="match-teams">
          <div class="team">
            <div class="team-logo">üî¥</div>
            <div class="team-name">Tim Merah</div>
          </div>
          <div class="vs">VS</div>
          <div class="team">
            <div class="team-logo">üîµ</div>
            <div class="team-name">Tim Biru</div>
          </div>
        </div>
        <div class="match-info">
          <div class="live-badge">LIVE</div>
          <div class="match-time" id="match-time">--:--</div>
        </div>
      </div>

      <!-- Main Layout -->
      <div class="main-layout">
        <!-- Video Section -->
        <div class="video-section">
          <div class="video-container">
            <iframe 
              id="youtube-player"
              src="https://www.youtube.com/embed/36YnV9STBqc?autoplay=1&mute=1&enablejsapi=1" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen>
            </iframe>
            
            <!-- Prediction Toast Overlay -->
            <div class="video-overlay">
              <div class="prediction-toast" id="prediction-toast">
                <div class="prediction-toast-title">‚ö° Prediksi Cepat!</div>
                <div id="toast-question">Siapa yang akan mencetak gol berikutnya?</div>
                <div class="prediction-timer" id="toast-timer">00:15</div>
                <div class="prediction-options" id="toast-options">
                  <!-- Dynamic buttons -->
                </div>
              </div>
            </div>
          </div>
          
          <!-- Stats Bar -->
          <div class="stats-bar">
            <div class="stat-item">
              <div class="stat-value" id="stat-possession">--</div>
              <div class="stat-label">Possession</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="stat-shots">--</div>
              <div class="stat-label">Shots</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="stat-corners">--</div>
              <div class="stat-label">Corners</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="stat-predictions">--</div>
              <div class="stat-label">Prediksi</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="stat-online">--</div>
              <div class="stat-label">Online</div>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
          <!-- User Profile -->
          <div class="panel">
            <div class="panel-content">
              <div class="user-mini">
                <div class="user-avatar" id="user-avatar">?</div>
                <div class="user-info">
                  <div class="user-name" id="user-name">Loading...</div>
                  <div class="user-points" id="user-points">0 XP</div>
                </div>
                <div class="user-badge" id="user-badge">NEW</div>
              </div>
            </div>
          </div>

          <!-- Live Prediction -->
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title">
                <span>‚ö°</span> Prediksi Live
              </div>
              <span style="font-size: 12px; color: var(--muted);" id="pred-round">Loading...</span>
            </div>
            <div class="panel-content">
              <div class="current-prediction" id="prediction-box">
                <div class="pred-question" id="pred-question">Memuat prediksi...</div>
                <div class="pred-timer-bar">
                  <div class="pred-timer-fill" id="pred-timer-bar" style="width: 100%"></div>
                </div>
                <div class="pred-options-vertical" id="pred-options">
                  <div class="skeleton" style="height: 44px; margin-bottom: 8px;"></div>
                  <div class="skeleton" style="height: 44px;"></div>
                </div>
                <div class="pred-results" id="pred-results" style="display: none;">
                  <!-- Results shown here -->
                </div>
              </div>
              
              <div style="font-size: 12px; color: var(--muted); text-align: center; margin-top: 12px;">
                <span id="next-prediction">Menghitung...</span>
              </div>
            </div>
          </div>

          <!-- Quick Polls -->
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title">
                <span>üìä</span> Polling Cepat
              </div>
            </div>
            <div class="panel-content">
              <div class="poll-list" id="poll-list">
                <div class="poll-item">
                  <div class="skeleton" style="height: 60px;"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Mini Leaderboard -->
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title">
                <span>üèÜ</span> Top Prediktor
              </div>
            </div>
            <div class="panel-content">
              <div class="leaderboard-list" id="leaderboard">
                <div class="leader-item">
                  <div class="skeleton" style="height: 40px; width: 100%;"></div>
                </div>
                <div class="leader-item">
                  <div class="skeleton" style="height: 40px; width: 100%;"></div>
                </div>
                <div class="leader-item">
                  <div class="skeleton" style="height: 40px; width: 100%;"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Live Chat -->
          <div class="panel">
            <div class="panel-header">
              <div class="panel-title">
                <span>üí¨</span> Obrolan
              </div>
              <span style="font-size: 11px; color: var(--muted);" id="chat-count">0 online</span>
            </div>
            <div class="panel-content">
              <div class="chat-messages" id="chat-messages">
                <div class="chat-message">
                  <span style="color: var(--muted); font-style: italic;">Menghubungkan ke chat...</span>
                </div>
              </div>
              <div class="chat-input-area">
                <input type="text" class="chat-input" id="chat-input" placeholder="Kirim pesan..." maxlength="150" disabled>
                <button class="chat-send" onclick="bolaApp.sendChat()" disabled id="chat-send">Kirim</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="zone-footer">Nyambat ‚Ä¢ Aksi ‚Ä¢ Solusi</div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification">
    <div class="notification-title" id="notif-title">Title</div>
    <div class="notification-text" id="notif-text">Message</div>
  </div>

  <script src="frekuensi-shared.js"></script>
  <script>
    // ==========================================
    // NOPE BOLA LIVE - SUPABASE VERSION
    // Real-time Prediksi + Polling + Chat
    // ==========================================
    
    class NopeBolaLive {
      constructor() {
        // Supabase config - GANTI DENGAN KONFIGURASI ANDA
        this.SUPABASE_URL = 'https://your-project.supabase.co';
        this.SUPABASE_KEY = 'your-anon-key';
        
        this.supabase = null;
        this.user = null;
        this.userId = null;
        this.matchId = 'match_001'; // ID pertandingan saat ini
        this.currentPrediction = null;
        this.predictionTimer = null;
        this.subscriptions = [];
        
        this.init();
      }
      
      async init() {
        try {
          // 1. Initialize Supabase
          this.supabase = window.supabase.createClient(this.SUPABASE_URL, this.SUPABASE_KEY);
          
          this.updateConnectionStatus('connecting', 'Connecting...');
          
          // 2. Setup user (anonymous dengan device fingerprint)
          await this.setupUser();
          
          // 3. Load initial data
          await this.loadMatchData();
          await this.loadCurrentPrediction();
          await this.loadPolls();
          await this.loadLeaderboard();
          
          // 4. Setup real-time subscriptions
          this.setupRealtimeSubscriptions();
          
          // 5. Start match timer
          this.startMatchTimer();
          
          this.updateConnectionStatus('online', 'Connected');
          this.showNotification('üéâ Terhubung!', 'Selamat datang di NOPE Bola Live!');
          
          console.log('‚úÖ NOPE Bola Live + Supabase initialized!');
          
        } catch (error) {
          console.error('Init error:', error);
          this.updateConnectionStatus('offline', 'Connection failed');
          this.showNotification('‚ùå Error', 'Gagal terhubung ke server. Coba refresh.');
        }
      }
      
      // ==========================================
      // USER MANAGEMENT (Anonymous + Device ID)
      // ==========================================
      
      async setupUser() {
        // Generate atau ambil device fingerprint
        const deviceId = await this.getDeviceFingerprint();
        this.userId = deviceId;
        
        // Cek apakah user sudah ada di database
        let { data: user, error } = await this.supabase
          .from('users')
          .select('*')
          .eq('device_id', deviceId)
          .single();
        
        if (error && error.code === 'PGRST116') {
          // User baru - buat username random
          const username = this.generateUsername();
          
          const { data: newUser, error: createError } = await this.supabase
            .from('users')
            .insert([{
              device_id: deviceId,
              username: username,
              points: 0,
              badge: 'NEW',
              created_at: new Date().toISOString(),
              last_active: new Date().toISOString()
            }])
            .select()
            .single();
          
          if (createError) throw createError;
          user = newUser;
          
          this.showNotification('Selamat datang!', `Kamu adalah ${username}. Prediksi dan menangkan poin!`);
        } else if (error) {
          throw error;
        } else {
          // Update last active
          await this.supabase
            .from('users')
            .update({ last_active: new Date().toISOString() })
            .eq('id', user.id);
        }
        
        this.user = user;
        this.updateUserUI();
      }
      
      async getDeviceFingerprint() {
        // Kombinasi berbagai signal untuk unique ID
        const signals = [
          navigator.userAgent,
          navigator.language,
          screen.colorDepth,
          screen.width + 'x' + screen.height,
          new Date().getTimezoneOffset(),
          !!window.sessionStorage,
          !!window.localStorage,
          navigator.hardwareConcurrency,
          navigator.deviceMemory
        ];
        
        // Hash sederhana
        const str = signals.join('|');
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
          const char = str.charCodeAt(i);
          hash = ((hash << 5) - hash) + char;
          hash = hash & hash;
        }
        
        return 'nope_' + Math.abs(hash).toString(16);
      }
      
      generateUsername() {
        const adjectives = ['Tahu', 'Mie', 'Bakso', 'Sate', 'Nasi', 'Kopi', 'Teh', 'Jus', 'Seblak', 'Cireng'];
        const nouns = ['Bulat', 'Ayam', 'Goreng', 'Padang', 'Kucing', 'Tubruk', 'Manis', 'Jeruk', 'Pedas', 'Mangga'];
        const num = Math.floor(Math.random() * 999);
        
        return adjectives[Math.floor(Math.random() * adjectives.length)] + 
               nouns[Math.floor(Math.random() * nouns.length)] + 
               num;
      }
      
      updateUserUI() {
        document.getElementById('user-name').textContent = this.user.username;
        document.getElementById('user-avatar').textContent = this.user.username.substring(0, 2).toUpperCase();
        document.getElementById('user-points').textContent = `${this.user.points} XP`;
        document.getElementById('your-rank-points').textContent = this.user.points;
        
        // Update badge
        const badge = document.getElementById('user-badge');
        badge.textContent = this.user.badge;
        
        if (this.user.points >= 1000) {
          badge.textContent = 'LEGEND';
          badge.style.background = 'linear-gradient(135deg, #ffd700, #ffed4e)';
          badge.style.color = '#000';
        } else if (this.user.points >= 500) {
          badge.textContent = 'PRO';
          badge.style.background = 'rgba(178, 102, 255, 0.4)';
        } else if (this.user.points >= 100) {
          badge.textContent = 'ACTIVE';
        }
        
        // Enable chat
        document.getElementById('chat-input').disabled = false;
        document.getElementById('chat-send').disabled = false;
      }
      
      // ==========================================
      // MATCH DATA & REAL-TIME SYNC
      // ==========================================
      
      async loadMatchData() {
        const { data: match, error } = await this.supabase
          .from('matches')
          .select('*')
          .eq('id', this.matchId)
          .single();
        
        if (error) {
          // Buat match dummy jika belum ada
          await this.createDummyMatch();
          return;
        }
        
        this.matchData = match;
        this.updateMatchStats(match);
      }
      
      async createDummyMatch() {
        const { data, error } = await this.supabase
          .from('matches')
          .insert([{
            id: this.matchId,
            team_a: 'Tim Merah',
            team_b: 'Tim Biru',
            score_a: 0,
            score_b: 0,
            match_time: 67 * 60 + 32, // Start at 67:32
            possession_a: 55,
            possession_b: 45,
            shots_a: 8,
            shots_b: 3,
            corners_a: 4,
            corners_b: 2,
            is_live: true,
            stream_url: 'https://www.youtube.com/embed/36YnV9STBqc'
          }]);
        
        if (!error) {
          this.matchData = data[0];
        }
      }
      
      updateMatchStats(match) {
        document.getElementById('stat-possession').textContent = `${match.possession_a}%`;
        document.getElementById('stat-shots').textContent = match.shots_a + match.shots_b;
        document.getElementById('stat-corners').textContent = match.corners_a + match.corners_b;
      }
      
      startMatchTimer() {
        setInterval(async () => {
          if (!this.matchData) return;
          
          this.matchData.match_time++;
          const minutes = Math.floor(this.matchData.match_time / 60);
          const seconds = this.matchData.match_time % 60;
          document.getElementById('match-time').textContent = 
            `${minutes}:${seconds.toString().padStart(2, '0')}`;
          
          // Update ke database setiap menit
          if (this.matchData.match_time % 60 === 0) {
            await this.supabase
              .from('matches')
              .update({ match_time: this.matchData.match_time })
              .eq('id', this.matchId);
          }
        }, 1000);
      }
      
      // ==========================================
      // PREDICTION SYSTEM (Real-time)
      // ==========================================
      
      async loadCurrentPrediction() {
        const { data: prediction, error } = await this.supabase
          .from('predictions')
          .select('*')
          .eq('match_id', this.matchId)
          .eq('is_active', true)
          .order('created_at', { ascending: false })
          .limit(1)
          .single();
        
        if (prediction) {
          this.currentPrediction = prediction;
          this.renderPrediction(prediction);
          this.startPredictionTimer(prediction);
        } else {
          // Buat prediksi baru jika tidak ada
          await this.createNewPrediction();
        }
      }
      
      async createNewPrediction() {
        const templates = [
          {
            question: "Apakah akan ada gol dalam 5 menit ke depan?",
            options: [
              { id: 'ya', label: 'Ya, ada gol!', points: 100 },
              { id: 'tidak', label: 'Tidak ada', points: 50 }
            ],
            duration: 60
          },
          {
            question: "Siapa yang akan dapat corner kick berikutnya?",
            options: [
              { id: 'merah', label: 'Tim Merah', points: 75 },
              { id: 'biru', label: 'Tim Biru', points: 75 }
            ],
            duration: 45
          },
          {
            question: "Apakah akan ada kartu kuning dalam 3 menit ke depan?",
            options: [
              { id: 'ya', label: 'Ya', points: 120 },
              { id: 'tidak', label: 'Tidak', points: 40 }
            ],
            duration: 30
          }
        ];
        
        const template = templates[Math.floor(Math.random() * templates.length)];
        
        const { data, error } = await this.supabase
          .from('predictions')
          .insert([{
            match_id: this.matchId,
            question: template.question,
            options: template.options,
            duration: template.duration,
            is_active: true,
            created_at: new Date().toISOString(),
            ends_at: new Date(Date.now() + template.duration * 1000).toISOString()
          }])
          .select()
          .single();
        
        if (!error) {
          this.currentPrediction = data;
          this.renderPrediction(data);
          this.startPredictionTimer(data);
        }
      }
      
      renderPrediction(prediction) {
        document.getElementById('pred-question').textContent = prediction.question;
        document.getElementById('pred-round').textContent = `Round ${prediction.round || 1}`;
        
        // Render options
        const optionsContainer = document.getElementById('pred-options');
        optionsContainer.innerHTML = prediction.options.map(opt => `
          <button class="pred-option-btn" onclick="bolaApp.makePrediction('${opt.id}')" id="pred-btn-${opt.id}">
            <span>${opt.label}</span>
            <span class="pred-percentage" id="pct-${opt.id}">0%</span>
          </button>
        `).join('');
        
        // Cek apakah user sudah vote
        this.checkUserVote(prediction.id);
        
        // Load vote counts
        this.loadVoteCounts(prediction.id);
        
        // Update toast
        this.updateToast(prediction);
      }
      
      async checkUserVote(predictionId) {
        const { data: vote } = await this.supabase
          .from('prediction_votes')
          .select('*')
          .eq('prediction_id', predictionId)
          .eq('user_id', this.user.id)
          .single();
        
        if (vote) {
          // User sudah vote, disable buttons
          document.querySelectorAll('.pred-option-btn').forEach(btn => {
            btn.disabled = true;
            if (btn.id === `pred-btn-${vote.option_id}`) {
              btn.classList.add('voted');
            }
          });
          
          document.getElementById('pred-results').style.display = 'block';
        }
      }
      
      async loadVoteCounts(predictionId) {
        const { data: votes } = await this.supabase
          .from('prediction_votes')
          .select('option_id')
          .eq('prediction_id', predictionId);
        
        if (!votes) return;
        
        const counts = {};
        votes.forEach(v => {
          counts[v.option_id] = (counts[v.option_id] || 0) + 1;
        });
        
        const total = votes.length;
        
        // Update percentages
        Object.keys(counts).forEach(key => {
          const pct = Math.round((counts[key] / total) * 100);
          const btn = document.getElementById(`pred-btn-${key}`);
          if (btn) {
            btn.querySelector('.pred-percentage').textContent = `${pct}%`;
          }
        });
        
        // Update stat
        document.getElementById('stat-predictions').textContent = total.toLocaleString();
        
        // Render results bar
        this.renderResultsBars(counts, total);
      }
      
      renderResultsBars(counts, total) {
        const container = document.getElementById('pred-results');
        if (!this.currentPrediction) return;
        
        const html = this.currentPrediction.options.map(opt => {
          const count = counts[opt.id] || 0;
          const pct = total > 0 ? Math.round((count / total) * 100) : 0;
          
          return `
            <div class="result-bar">
              <span class="result-label">${opt.label}</span>
              <div class="result-track">
                <div class="result-fill" style="width: ${pct}%"></div>
              </div>
              <span class="result-count">${count}</span>
            </div>
          `;
        }).join('');
        
        container.innerHTML = '<div style="font-size: 12px; color: var(--muted); margin-bottom: 10px;">Hasil sementara:</div>' + html;
      }
      
      startPredictionTimer(prediction) {
        const endTime = new Date(prediction.ends_at).getTime();
        
        if (this.predictionTimer) clearInterval(this.predictionTimer);
        
        this.predictionTimer = setInterval(() => {
          const now = Date.now();
          const remaining = Math.max(0, Math.floor((endTime - now) / 1000));
          const duration = prediction.duration;
          const percentage = (remaining / duration) * 100;
          
          document.getElementById('pred-timer-bar').style.width = `${percentage}%`;
          
          const mins = Math.floor(remaining / 60);
          const secs = remaining % 60;
          document.getElementById('next-prediction').textContent = 
            `Waktu tersisa: ${mins}:${secs.toString().padStart(2, '0')}`;
          
          if (remaining <= 0) {
            clearInterval(this.predictionTimer);
            this.resolvePrediction();
          }
        }, 1000);
      }
      
      async makePrediction(optionId) {
        if (!this.currentPrediction) return;
        
        // Cek apakah sudah vote
        const { data: existingVote } = await this.supabase
          .from('prediction_votes')
          .select('*')
          .eq('prediction_id', this.currentPrediction.id)
          .eq('user_id', this.user.id)
          .single();
        
        if (existingVote) {
          this.showNotification('Sudah voting!', 'Kamu sudah membuat prediksi untuk round ini.');
          return;
        }
        
        // Insert vote
        const { error } = await this.supabase
          .from('prediction_votes')
          .insert([{
            prediction_id: this.currentPrediction.id,
            user_id: this.user.id,
            option_id: optionId,
            created_at: new Date().toISOString()
          }]);
        
        if (error) {
          this.showNotification('Error', 'Gagal menyimpan prediksi. Coba lagi.');
          return;
        }
        
        // Update UI
        document.querySelectorAll('.pred-option-btn').forEach(btn => {
          btn.disabled = true;
          btn.classList.remove('voted');
        });
        document.getElementById(`pred-btn-${optionId}`).classList.add('voted');
        document.getElementById('pred-results').style.display = 'block';
        
        this.showNotification('Prediksi tercatat!', 'Tunggu hasilnya...');
        
        // Real-time update akan terjadi via subscription
      }
      
      async resolvePrediction() {
        // Simulate random result
        if (!this.currentPrediction) return;
        
        const options = this.currentPrediction.options;
        const winningOption = options[Math.floor(Math.random() * options.length)].id;
        
        // Update prediction status
        await this.supabase
          .from('predictions')
          .update({ 
            is_active: false,
            winning_option: winningOption,
            resolved_at: new Date().toISOString()
          })
          .eq('id', this.currentPrediction.id);
        
        // Cek apakah user menang
        const { data: userVote } = await this.supabase
          .from('prediction_votes')
          .select('*')
          .eq('prediction_id', this.currentPrediction.id)
          .eq('user_id', this.user.id)
          .single();
        
        if (userVote && userVote.option_id === winningOption) {
          const points = this.currentPrediction.options.find(o => o.id === winningOption).points;
          
          // Update user points
          await this.supabase
            .from('users')
            .update({ points: this.user.points + points })
            .eq('id', this.user.id);
          
          this.user.points += points;
          this.updateUserUI();
          
          this.showNotification('üéâ Prediksi Benar!', `+${points} XP! Lanjutkan!`);
          this.addChatMessage('System', `üèÜ ${this.user.username} benar menebak! +${points} XP`, true);
        } else if (userVote) {
          this.showNotification('üòÖ Prediksi Salah', 'Coba lagi di round berikutnya!');
        }
        
        // Highlight winning option
        document.getElementById(`pred-btn-${winningOption}`)?.classList.add('correct');
        
        // Buat prediksi baru setelah delay
        setTimeout(() => {
          this.createNewPrediction();
        }, 10000);
      }
      
      updateToast(prediction) {
        const toast = document.getElementById('prediction-toast');
        document.getElementById('toast-question').textContent = prediction.question;
        
        const optionsContainer = document.getElementById('toast-options');
        optionsContainer.innerHTML = prediction.options.map(opt => `
          <button class="pred-btn" onclick="bolaApp.makePrediction('${opt.id}')">${opt.label}</button>
        `).join('');
        
        // Show toast briefly
        toast.classList.add('show');
        setTimeout(() => {
          toast.classList.remove('show');
        }, 15000);
      }
      
      // ==========================================
      // POLLING SYSTEM
      // ==========================================
      
      async loadPolls() {
        const { data: polls } = await this.supabase
          .from('polls')
          .select('*')
          .eq('match_id', this.matchId)
          .eq('is_active', true)
          .order('created_at', { ascending: false })
          .limit(2);
        
        const container = document.getElementById('poll-list');
        
        if (!polls || polls.length === 0) {
          // Buat polls default
          container.innerHTML = `
            <div class="poll-item">
              <div class="poll-question">Man of the Match sejauh ini?</div>
              <div class="poll-options">
                <button class="poll-btn" onclick="bolaApp.votePoll(this, 'motm', 'pemain-a')">Pemain A</button>
                <button class="poll-btn" onclick="bolaApp.votePoll(this, 'motm', 'pemain-b')">Pemain B</button>
                <button class="poll-btn" onclick="bolaApp.votePoll(this, 'motm', 'kiper')">Kiper</button>
              </div>
            </div>
            <div class="poll-item">
              <div class="poll-question">Prediksi skor akhir?</div>
              <div class="poll-options">
                <button class="poll-btn" onclick="bolaApp.votePoll(this, 'score', '1-0')">1-0</button>
                <button class="poll-btn" onclick="bolaApp.votePoll(this, 'score', '2-1')">2-1</button>
                <button class="poll-btn" onclick="bolaApp.votePoll(this, 'score', 'draw')">Draw</button>
              </div>
            </div>
          `;
          return;
        }
        
        container.innerHTML = polls.map(poll => `
          <div class="poll-item">
            <div class="poll-question">${poll.question}</div>
            <div class="poll-options">
              ${poll.options.map(opt => `
                <button class="poll-btn" onclick="bolaApp.votePoll(this, '${poll.id}', '${opt.id}')">${opt.label}</button>
              `).join('')}
            </div>
          </div>
        `).join('');
      }
      
      async votePoll(button, pollId, optionId) {
        // Toggle selection
        const parent = button.parentElement;
        parent.querySelectorAll('.poll-btn').forEach(btn => {
          btn.classList.remove('selected');
        });
        button.classList.add('selected');
        
        // Simpan ke database
        await this.supabase
          .from('poll_votes')
          .upsert([{
            poll_id: pollId,
            user_id: this.user.id,
            option_id: optionId,
            created_at: new Date().toISOString()
          }]);
        
        this.showNotification('Vote tercatat!', 'Hasil polling diupdate real-time.');
      }
      
      // ==========================================
      // LEADERBOARD (Real-time)
      // ==========================================
      
      async loadLeaderboard() {
        const { data: topUsers } = await this.supabase
          .from('users')
          .select('username, points, badge')
          .order('points', { ascending: false })
          .limit(10);
        
        this.renderLeaderboard(topUsers || []);
      }
      
      renderLeaderboard(users) {
        const container = document.getElementById('leaderboard');
        
        // Cek apakah user ada di top 10
        const userInTop = users.findIndex(u => u.username === this.user.username);
        
        let html = users.slice(0, 3).map((user, idx) => `
          <div class="leader-item ${user.username === this.user.username ? 'you' : ''}">
            <div class="leader-rank top">${idx + 1}</div>
            <div class="leader-name">${user.username}</div>
            <div class="leader-points">${user.points}</div>
          </div>
        `).join('');
        
        // Tambahkan user jika tidak di top 3
        if (userInTop === -1 || userInTop >= 3) {
          html += `
            <div class="leader-item you">
              <div class="leader-rank">${userInTop === -1 ? '?' : userInTop + 1}</div>
              <div class="leader-name">${this.user.username} (Kamu)</div>
              <div class="leader-points">${this.user.points}</div>
            </div>
          `;
        }
        
        container.innerHTML = html;
      }
      
      // ==========================================
      // CHAT SYSTEM (Real-time)
      // ==========================================
      
      setupRealtimeSubscriptions() {
        // Subscribe ke chat messages
        const chatSubscription = this.supabase
          .channel('chat')
          .on('postgres_changes', 
            { event: 'INSERT', schema: 'public', table: 'chat_messages', filter: `match_id=eq.${this.matchId}` },
            (payload) => {
              this.addChatMessage(payload.new.username, payload.new.message, payload.new.is_system);
            }
          )
          .subscribe();
        
        this.subscriptions.push(chatSubscription);
        
        // Subscribe ke prediction votes
        const voteSubscription = this.supabase
          .channel('votes')
          .on('postgres_changes',
            { event: 'INSERT', schema: 'public', table: 'prediction_votes', filter: `prediction_id=eq.${this.currentPrediction?.id}` },
            () => {
              this.loadVoteCounts(this.currentPrediction.id);
            }
          )
          .subscribe();
        
        this.subscriptions.push(voteSubscription);
        
        // Subscribe ke leaderboard changes
        const leaderboardSubscription = this.supabase
          .channel('leaderboard')
          .on('postgres_changes',
            { event: 'UPDATE', schema: 'public', table: 'users' },
            () => {
              this.loadLeaderboard();
            }
          )
          .subscribe();
        
        this.subscriptions.push(leaderboardSubscription);
        
        // Load initial chat
        this.loadChatHistory();
      }
      
      async loadChatHistory() {
        const { data: messages } = await this.supabase
          .from('chat_messages')
          .select('*')
          .eq('match_id', this.matchId)
          .order('created_at', { ascending: false })
          .limit(50);
        
        const container = document.getElementById('chat-messages');
        container.innerHTML = '';
        
        if (messages) {
          messages.reverse().forEach(msg => {
            this.addChatMessage(msg.username, msg.message, msg.is_system, false);
          });
        }
        
        // Update online count
        this.updateOnlineCount();
      }
      
      addChatMessage(user, text, isSystem = false, animate = true) {
        const container = document.getElementById('chat-messages');
        const div = document.createElement('div');
        div.className = 'chat-message';
        if (!animate) div.style.animation = 'none';
        
        if (isSystem) {
          div.innerHTML = `<span style="color: var(--accent); font-weight: 700;">${text}</span>`;
        } else {
          div.innerHTML = `<span class="chat-user ${isSystem ? 'system' : ''}">${user}:</span>${text}`;
        }
        
        container.appendChild(div);
        container.scrollTop = container.scrollHeight;
        
        // Limit messages
        while (container.children.length > 100) {
          container.removeChild(container.firstChild);
        }
      }
      
      async sendChat() {
        const input = document.getElementById('chat-input');
        const text = input.value.trim();
        
        if (!text || text.length > 150) return;
        
        // Insert ke database (akan trigger real-time update)
        const { error } = await this.supabase
          .from('chat_messages')
          .insert([{
            match_id: this.matchId,
            user_id: this.user.id,
            username: this.user.username,
            message: text,
            is_system: false,
            created_at: new Date().toISOString()
          }]);
        
        if (!error) {
          input.value = '';
        }
      }
      
      async updateOnlineCount() {
        // Hitung user active dalam 5 menit terakhir
        const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000).toISOString();
        
        const { count } = await this.supabase
          .from('users')
          .select('*', { count: 'exact', head: true })
          .gte('last_active', fiveMinutesAgo);
        
        document.getElementById('chat-count').textContent = `${count || 1} online`;
        document.getElementById('stat-online').textContent = count || 1;
      }
      
      // ==========================================
      // UTILITIES
      // ==========================================
      
      updateConnectionStatus(status, text) {
        const el = document.getElementById('connection-status');
        el.className = `connection-status ${status}`;
        el.innerHTML = status === 'connecting' 
          ? `<span class="loading-spinner"></span><span>${text}</span>`
          : `<span>${status === 'online' ? 'üü¢' : 'üî¥'}</span><span>${text}</span>`;
        
        if (status === 'online') {
          setTimeout(() => {
            el.style.opacity = '0';
          }, 3000);
        }
      }
      
      showNotification(title, text) {
        const notif = document.getElementById('notification');
        document.getElementById('notif-title').textContent = title;
        document.getElementById('notif-text').textContent = text;
        
        notif.classList.add('show');
        
        setTimeout(() => {
          notif.classList.remove('show');
        }, 4000);
      }
    }
    
    // Initialize
    const bolaApp = new NopeBolaLive();
    
    // Global functions
    window.makePrediction = (option) => bolaApp.makePrediction(option);
    window.votePoll = (btn, pollId, optionId) => bolaApp.votePoll(btn, pollId, optionId);
    window.sendChat = () => bolaApp.sendChat();
    
    // Enter key for chat
    document.getElementById('chat-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendChat();
    });
  </script>
</body>
</html>
