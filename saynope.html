<!DOCTYPE html>
<html lang="id" data-theme="realtea">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NOPE ‚Äî Spill the Tea</title>
  
  <!-- PWA -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E85D4E'/%3E%3Ctext x='50' y='70' font-size='50' font-weight='bold' font-family='system-ui' text-anchor='middle' fill='%23F5F2ED'%3Eüçµ%3C/text%3E%3C/svg%3E">
  <meta name="theme-color" content="#F5F2ED">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Caveat:wght@400;500;600&family=DM+Sans:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg: #F5F2ED;
      --surface: #FFFFFF;
      --surface-warm: #FAF8F5;
      --border: #E8E4DE;
      --border-accent: #D4CFC7;
      --text: #2C2C2C;
      --text-secondary: #6B6560;
      --muted: #8B8680;
      --accent: #E85D4E;
      --accent-soft: #F4A5A0;
      --accent-secondary: #4A90A4;
      
      --radius: 16px;
      --radius-sm: 12px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', 'Space Grotesk', system-ui, sans-serif;
      font-weight: 400;
      font-size: 15px;
      line-height: 1.6;
      padding-bottom: 100px;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
    }

    .wrapper {
      max-width: 520px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* === HEADER === */
    header {
      padding: 20px 0 16px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .logo {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 32px;
      font-weight: 700;
      color: var(--accent);
      cursor: pointer;
      transform: rotate(-2deg);
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: rotate(0deg) scale(1.02);
    }

    .nav-mini {
      display: flex;
      gap: 6px;
      font-size: 11px;
      font-family: 'Space Grotesk', sans-serif;
    }

    .nav-mini span {
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 20px;
      color: var(--muted);
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }

    .nav-mini span:hover:not(.active) {
      background: var(--surface-warm);
      color: var(--text);
    }

    .nav-mini span.active {
      background: var(--text);
      color: var(--bg);
    }

    /* === PAGE HEADER === */
    .page-header {
      text-align: center;
      margin: 24px 0 32px;
    }

    .page-title {
      font-family: 'Caveat', cursive;
      font-size: 42px;
      color: var(--accent);
      transform: rotate(-2deg);
      display: inline-flex;
      align-items: center;
      gap: 12px;
    }

    .page-subtitle {
      font-size: 14px;
      color: var(--muted);
      margin-top: 8px;
      font-family: 'DM Sans', sans-serif;
    }

    .game-hint {
      background: var(--surface);
      border: 1px dashed var(--accent-soft);
      border-radius: var(--radius);
      padding: 16px;
      margin: 20px 0;
      text-align: center;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .game-hint strong {
      color: var(--accent);
      display: block;
      margin-bottom: 4px;
      font-family: 'Space Grotesk', sans-serif;
    }

    /* === TEA CARDS === */
    .tea-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .tea-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      position: relative;
      transform: rotate(-0.3deg);
      transition: all 0.3s ease;
    }

    .tea-card:nth-child(even) {
      transform: rotate(0.3deg);
    }

    .tea-card:hover {
      border-color: var(--accent-soft);
      box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    }

    .tea-card.peeked {
      border-color: var(--accent);
      background: linear-gradient(135deg, var(--surface) 0%, #FFF5F5 100%);
    }

    .tea-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .tea-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--accent-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      flex-shrink: 0;
    }

    .tea-meta {
      flex: 1;
    }

    .tea-user {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: var(--text);
    }

    .tea-time {
      font-size: 11px;
      color: var(--muted);
    }

    .tea-mood {
      font-family: 'Caveat', cursive;
      font-size: 16px;
      color: var(--accent);
      transform: rotate(-2deg);
    }

    .tea-content {
      font-size: 15px;
      line-height: 1.7;
      color: var(--text);
      margin-bottom: 16px;
      padding-left: 52px;
    }

    .tea-image {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      border-radius: var(--radius-sm);
      margin-bottom: 16px;
      margin-left: 52px;
      width: calc(100% - 52px);
      filter: contrast(0.95) saturate(0.9);
    }

    /* === VIBE REACTIONS === */
    .vibe-section {
      padding-left: 52px;
      border-top: 1px dashed var(--border);
      padding-top: 16px;
    }

    .vibe-label {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 10px;
      font-family: 'Space Grotesk', sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .vibe-reactions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .vibe-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 13px;
      color: var(--text-secondary);
      position: relative;
    }

    .vibe-btn:hover:not(.used) {
      background: var(--surface-warm);
      border-color: var(--accent-soft);
      transform: translateY(-2px);
    }

    .vibe-btn.used {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: var(--text);
      cursor: default;
      opacity: 0.8;
    }

    .vibe-btn.used::after {
      content: 'üëÅÔ∏è';
      position: absolute;
      top: -8px;
      right: -8px;
      font-size: 14px;
      background: var(--surface);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--border);
    }

    .vibe-btn .emoji {
      font-size: 16px;
    }

    .vibe-btn .count {
      font-size: 11px;
      font-weight: 600;
      min-width: 16px;
      text-align: center;
    }

    /* === TOOLTIP === */
    .vibe-tooltip {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      background: var(--text);
      color: var(--bg);
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 11px;
      font-family: 'Space Grotesk', sans-serif;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
      pointer-events: none;
      z-index: 1000;
    }

    .vibe-btn:hover:not(.used) .vibe-tooltip {
      opacity: 1;
      visibility: visible;
    }

    .vibe-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: var(--text);
    }

    /* === PEEK OVERLAY === */
    .peek-overlay {
      position: fixed;
      inset: 0;
      background: var(--bg);
      z-index: 9999;
      display: none;
      flex-direction: column;
      padding: 20px;
      overflow-y: auto;
    }

    .peek-overlay.show {
      display: flex;
      animation: peekIn 0.3s ease;
    }

    @keyframes peekIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .peek-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px dashed var(--border);
    }

    .peek-title {
      font-family: 'Caveat', cursive;
      font-size: 28px;
      color: var(--accent);
    }

    .peek-timer {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 14px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .peek-timer .countdown {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
    }

    .peek-content {
      flex: 1;
    }

    .peek-warning {
      background: var(--accent-soft);
      border: 1px solid var(--accent);
      border-radius: var(--radius-sm);
      padding: 12px 16px;
      margin-bottom: 20px;
      font-size: 13px;
      color: var(--text);
      text-align: center;
      font-family: 'Space Grotesk', sans-serif;
    }

    .peek-journal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 16px;
    }

    .peek-entry {
      padding: 16px 0;
      border-bottom: 1px solid var(--border);
    }

    .peek-entry:last-child {
      border-bottom: none;
    }

    .peek-entry-time {
      font-size: 11px;
      color: var(--muted);
      font-family: 'Space Grotesk', sans-serif;
      margin-bottom: 6px;
    }

    .peek-entry-content {
      font-size: 14px;
      line-height: 1.6;
      color: var(--text);
    }

    .peek-artefak {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 20px;
    }

    .peek-artefak img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: var(--radius-sm);
      filter: contrast(0.95) saturate(0.9);
    }

    .peek-close-btn {
      background: var(--text);
      color: var(--bg);
      border: none;
      border-radius: 24px;
      padding: 14px 32px;
      font-size: 15px;
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 600;
      cursor: pointer;
      margin-top: 24px;
      transition: all 0.2s;
    }

    .peek-close-btn:hover {
      background: var(--accent);
      transform: translateY(-2px);
    }

    /* === REFRESH BUTTON === */
    .refresh-container {
      text-align: center;
      margin: 32px 0;
    }

    .refresh-btn {
      background: var(--surface);
      border: 2px solid var(--accent);
      color: var(--accent);
      border-radius: 30px;
      padding: 14px 32px;
      font-size: 15px;
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s ease;
    }

    .refresh-btn:hover {
      background: var(--accent);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(232, 93, 78, 0.3);
    }

    .refresh-btn.spinning .emoji {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* === FOOTER === */
    .zone-footer {
      text-align: center;
      font-family: 'Caveat', cursive;
      font-size: 18px;
      color: var(--muted);
      margin-top: 40px;
      padding: 40px 20px;
      transform: rotate(-1deg);
    }

    @media (max-width: 480px) {
      .wrapper {
        padding: 0 16px;
      }

      .page-title {
        font-size: 32px;
      }

      .tea-content, .vibe-section, .tea-image {
        padding-left: 0;
        margin-left: 0;
        width: 100%;
      }

      .tea-header {
        margin-bottom: 16px;
      }

      .vibe-btn {
        padding: 6px 12px;
        font-size: 12px;
      }

      .peek-title {
        font-size: 22px;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <header>
      <div class="logo" onclick="window.location.href='index.html'">nope</div>
      <div class="nav-mini">
        <span onclick="window.location.href='jejak.html'">Jurnal</span>
        <span onclick="window.location.href='frekuensi-zones.html'">Frekuensi</span>
        <span onclick="window.location.href='saynope.html'">SayNOPE</span>
        <span class="active">üçµ Tea</span>
      </div>
    </header>

    <div class="page-header">
      <h1 class="page-title">üçµ Spill the Tea</h1>
      <p class="page-subtitle">Curhatan random dari komunitas. Anonymous. Real. No cap.</p>
      
      <div class="game-hint">
        <strong>üéÆ MAININ GAME NYA!</strong>
        Kasih vibe (üò≠ üõãÔ∏è ü´Ç üçµ ‚úä ü´° üíÖ üëª) buat unlock "Peaking" ‚Äî intip jurnal mereka selama 5 detik!
        <br><small>1 vibe = 1 kesempatan peek. Choose wisely!</small>
      </div>
    </div>

    <div class="tea-container" id="tea-container">
      <!-- Tea cards will be rendered here -->
    </div>

    <div class="refresh-container">
      <button class="refresh-btn" id="refresh-btn" onclick="loadNewTea()">
        <span class="emoji">üîÑ</span> Seduh Teh Baru
      </button>
    </div>

    <div class="zone-footer">Nyambat ‚Ä¢ Aksi ‚Ä¢ Solusi</div>
  </div>

  <!-- PEEK OVERLAY -->
  <div class="peek-overlay" id="peek-overlay">
    <div class="peek-header">
      <h2 class="peek-title">üëÅÔ∏è Peaking...</h2>
      <div class="peek-timer">
        <span>Auto close in</span>
        <span class="countdown" id="countdown">5</span>
        <span>detik</span>
      </div>
    </div>
    
    <div class="peek-warning">
      ‚ö†Ô∏è Ini adalah <strong>ONE-TIME PEEK</strong>. Kamu ga bisa lihat ini lagi setelah timer habis!
    </div>
    
    <div class="peek-content" id="peek-content">
      <!-- Journal content will be rendered here -->
    </div>
    
    <button class="peek-close-btn" onclick="closePeek()">
      Tutup Peek (atau tunggu timer)
    </button>
  </div>

  <script>
    // === CONFIG ===
    const VIBE_REACTIONS = {
      'relatable': { emoji: 'üò≠', label: 'literally me', slang: 'Sama, aku juga' },
      'same': { emoji: 'üõãÔ∏è', label: 'big mood', slang: 'Mood banget' },
      'hug': { emoji: 'ü´Ç', label: 'virtual hug', slang: 'Peluk jauh' },
      'tea': { emoji: 'üçµ', label: 'the tea', slang: 'Spill the tea' },
      'stay': { emoji: '‚úä', label: 'stay strong', slang: 'Tetap jaya' },
      'real': { emoji: 'ü´°', label: 'no cap', slang: 'Real talk' },
      'slay': { emoji: 'üíÖ', label: 'slay', slang: 'Gokil/slay' },
      'ghost': { emoji: 'üëª', label: 'ghosting', slang: 'Di-ghosting' }
    };

    // === 10 RANDOM VENTING ===
    const TEA_POOL = [
      {
        id: 'tea-1',
        user: '@overthinker_3am',
        avatar: 'üß†',
        mood: 'üõå doomscrolling',
        content: "kenapa ya tiap kali mau tidur malah jadi overthinking? padahal besok ada ujian tapi otakku malah playback moment cringe dari 5 tahun lalu üíÄ",
        time: '20 menit lalu',
        vibes: { relatable: 45, hug: 23, same: 18 },
        hasImage: false,
        // Data untuk peek
        journal: [
          { time: '3:42 AM', content: "masih scrolling tiktok padahal mata udah ngantuk banget" },
          { time: '2:15 AM', content: "coba tidur tapi kepikiran typo yang gue kirim ke grup kantor" },
          { time: '11:30 PM', content: "besok ujian tapi gue masih di sini üôÉ" }
        ],
        artefacts: ['https://images.unsplash.com/photo-1519681393784-d120267933ba?w=200&q=80']
      },
      {
        id: 'tea-2',
        user: '@anakpertama_capek',
        avatar: 'üë§',
        mood: 'üòÆ‚Äçüí® surviving',
        content: "capek banget jadi anak pertama, semua ekspektasi ditimpa ke gue padahal gue juga lagi struggling. mau ngeluh ke ortu takut dianggap lemah üò≠",
        time: '1 jam lalu',
        vibes: { relatable: 67, hug: 34, stay: 12 },
        hasImage: false,
        journal: [
          { time: '8:00 PM', content: "adik gue minta duit lagi, gue sendiri udah hemat banget" },
          { time: '6:30 PM', content: "mama bilang 'kamu kan kakak, harus kuat' ‚Äî gue pengen bilang gue juga capek" },
          { time: 'Minggu lalu', content: "transfer buat adik, tabungan gue minus lagi" }
        ],
        artefacts: []
      },
      {
        id: 'tea-3',
        user: '@ghosted_again',
        avatar: 'üëª',
        mood: '‚ú® thriving (fake it)',
        content: "read 10:42 pm. read 10:43 pm. read 10:45 pm. online. typing... then gone. story update tapi chat gue dibiarin üôÉ",
        time: '2 jam lalu',
        vibes: { ghost: 89, relatable: 56, same: 34 },
        hasImage: true,
        image: 'https://images.unsplash.com/photo-1499209974431-9dddcece7f88?w=400&q=80',
        journal: [
          { time: '11:00 PM', content: "masih checking chat tiap 5 menit, hopeless" },
          { time: '10:46 PM', content: "dia online tapi ga bales, apa gue terlalu needy?" },
          { time: 'Kemarin', content: "kenapa selalu gue yang kena ghosting?" }
        ],
        artefacts: ['https://images.unsplash.com/photo-1499209974431-9dddcece7f88?w=200&q=80']
      },
      {
        id: 'tea-4',
        user: '@burnout_resigned',
        avatar: 'üî•',
        mood: 'üé≠ existential dread',
        content: "resign dari kerjaan pertama setelah 6 bulan. toxic workplace, gaslighting boss, gaji kecil. no regrets, mental health first ‚ú®",
        time: '3 jam lalu',
        vibes: { slay: 92, stay: 45, real: 38 },
        hasImage: false,
        journal: [
          { time: 'Hari ini', content: "FINALLY FREE! üéâ tapi juga takut unemployed" },
          { time: 'Kemarin', content: "last day, boss masih gaslighting sampe akhir" },
          { time: 'Minggu lalu', content: "apply 20+ lowongan, belum ada yang callback" }
        ],
        artefacts: []
      },
      {
        id: 'tea-5',
        user: '@skripsipusing',
        avatar: 'üìö',
        mood: 'üåÄ chaotic good',
        content: "dosen pembimbing ngilang 3 minggu. deadline seminar proposal minggu depan. gue belum bab 1. send help üò≠üôè",
        time: '4 jam lalu',
        vibes: { relatable: 78, hug: 45, same: 23 },
        hasImage: false,
        journal: [
          { time: '2:00 AM', content: "nangis di perpus karena stuck di latar belakang" },
          { time: 'Kemarin', content: "chat dosen ga dibaca, wa ceklis 1 doang" },
          { time: 'Minggu lalu', content: "temen-temen udah seminar, gue masih di bab 1" }
        ],
        artefacts: ['https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&q=80']
      },
      {
        id: 'tea-6',
        user: '@savingstruggle',
        avatar: 'üí∏',
        mood: 'üòÆ‚Äçüí® surviving',
        content: "gaji 5jt, kos 2jt, pulsa 200k, makan 1.5jt, transport 500k. sisanya? 0. literally living paycheck to paycheck üíÄ",
        time: '5 jam lalu',
        vibes: { relatable: 103, same: 67, real: 45 },
        hasImage: false,
        journal: [
          { time: 'Tadi malam', content: "nabung 50k doang minggu ini, progress?" },
          { time: 'Awal bulan', content: "gajian! tapi udah habis buat bayar ini itu" },
          { time: 'Minggu lalu', content: "pengen beli skincare tapi liat dompet, gajadi" }
        ],
        artefacts: []
      },
      {
        id: 'tea-7',
        user: '@situationship',
        avatar: 'üíî',
        mood: 'üõå doomscrolling',
        content: "3 bulan 'hangout'. ga pernah dibilang pacar tapi behave like one. tanya 'kita apa?' dijawab 'yaudah jalanin aja'. cowo semua sama üôÉ",
        time: '6 jam lalu',
        vibes: { relatable: 134, ghost: 78, same: 56 },
        hasImage: true,
        image: 'https://images.unsplash.com/photo-1517842645767-c639042777db?w=400&q=80',
        journal: [
          { time: '1:00 AM', content: "overthinking label hubungan, lagi" },
          { time: 'Kemarin', content: "dia bilang 'aku sayang kamu' tapi ga mau commit" },
          { time: 'Bulan lalu', content: "kenalan di dating app, sekarang udah kayak pacaran tapi ga pacaran" }
        ],
        artefacts: ['https://images.unsplash.com/photo-1517842645767-c639042777db?w=200&q=80']
      },
      {
        id: 'tea-8',
        user: '@toxicfriend_lelah',
        avatar: 'üé≠',
        mood: 'üé≠ existential dread',
        content: "temen dari SD cuma ngehubungin pas butuh. pas gue butuh? ilang. 15 tahun pertemanan tapi gue cuma tempat curhat gratis üôÇ",
        time: '8 jam lalu',
        vibes: { relatable: 89, hug: 67, real: 34 },
        hasImage: false,
        journal: [
          { time: 'Tadi sore', content: "dia chat minta pinjem duit, gue bales lambat 10 menit langsung dicall" },
          { time: 'Minggu lalu', content: "gue down, chat dia, dibales 'semangat' doang terus ilang" },
          { time: 'Bulan lalu', content: "ultah gue, dia ga inget. ultah dia, gue yang ngasih kado" }
        ],
        artefacts: []
      },
      {
        id: 'tea-9',
        user: '@impostor_syndrome',
        avatar: 'üé™',
        mood: '‚ú® thriving (fake it)',
        content: "dapat kerjaan impian tapi tiap hari takut ketauan 'ga becus'. padahal interview 5 stage, pasti ada yang lihat potensi di gue kan? ü•≤",
        time: '10 jam lalu',
        vibes: { relatable: 56, stay: 45, hug: 34 },
        hasImage: false,
        journal: [
          { time: 'Hari ini', content: "meeting sama CEO, deg-degan banget takut ditanya sesuatu gue ga tau" },
          { time: 'Kemarin', content: "nangis di toilet karena bikin error di production" },
          { time: 'Minggu lalu', content: "seneng dapet offer tapi takut ga bisa perform" }
        ],
        artefacts: ['https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&q=80']
      },
      {
        id: 'tea-10',
        user: '@adulting_sucks',
        avatar: 'üìâ',
        mood: 'üåÄ chaotic good',
        content: "pajak, iuran bpjs, tagihan listrik, cicilan motor, tabungan, investasi, asuransi. dulu pengen cepet dewasa, sekarang pengen balik jadi bayi üë∂",
        time: '12 jam lalu',
        vibes: { relatable: 156, same: 89, hug: 67 },
        hasImage: false,
        journal: [
          { time: 'Tadi pagi', content: "liat tagihan listrik naik 40%, mau nangis" },
          { time: 'Kemarin', content: "coba belajar investasi, pusing liat candlestick" },
          { time: 'Minggu lalu', content: "bayar pajak motor, duit habis seketika" }
        ],
        artefacts: []
      }
    ];

    // === STATE ===
    let currentTea = [];
    let usedReactions = new Set(); // Track which reactions have been used for peeking
    let peekTimer = null;

    // === INIT ===
    document.addEventListener('DOMContentLoaded', () => {
      loadNewTea();
    });

    // === LOAD NEW TEA ===
    function loadNewTea() {
      const btn = document.getElementById('refresh-btn');
      btn.classList.add('spinning');
      
      // Shuffle and pick 3 random tea
      const shuffled = [...TEA_POOL].sort(() => 0.5 - Math.random());
      currentTea = shuffled.slice(0, 3);
      
      // Reset used reactions for new batch
      usedReactions.clear();
      
      setTimeout(() => {
        renderTea();
        btn.classList.remove('spinning');
      }, 600);
    }

    // === RENDER TEA ===
    function renderTea() {
      const container = document.getElementById('tea-container');
      container.innerHTML = '';
      
      currentTea.forEach((tea, index) => {
        const card = document.createElement('div');
        card.className = 'tea-card';
        card.id = tea.id;
        
        // Build vibe buttons
        let vibesHtml = '';
        Object.keys(VIBE_REACTIONS).forEach(key => {
          const vibe = VIBE_REACTIONS[key];
          const count = tea.vibes[key] || 0;
          const isUsed = usedReactions.has(`${tea.id}-${key}`);
          
          vibesHtml += `
            <button class="vibe-btn ${isUsed ? 'used' : ''}" 
              onclick="${isUsed ? '' : `sendVibe('${tea.id}', '${key}', this)`}"
              ${isUsed ? 'disabled' : ''}>
              <span class="emoji">${vibe.emoji}</span>
              <span class="count">${count + (isUsed ? 1 : 0)}</span>
              <span class="vibe-tooltip">${vibe.slang}</span>
            </button>
          `;
        });
        
        card.innerHTML = `
          <div class="tea-header">
            <div class="tea-avatar">${tea.avatar}</div>
            <div class="tea-meta">
              <div class="tea-user">${tea.user}</div>
              <div class="tea-time">${tea.time}</div>
            </div>
            <div class="tea-mood">${tea.mood}</div>
          </div>
          
          <div class="tea-content">${tea.content}</div>
          
          ${tea.hasImage ? `<img src="${tea.image}" class="tea-image" alt="tea">` : ''}
          
          <div class="vibe-section">
            <div class="vibe-label">Kasih vibe buat unlock peek üëÅÔ∏è</div>
            <div class="vibe-reactions">
              ${vibesHtml}
            </div>
          </div>
        `;
        
        container.appendChild(card);
      });
    }

    // === SEND VIBE & UNLOCK PEEK ===
    function sendVibe(teaId, vibeKey, btnElement) {
      // Mark as used
      const reactionKey = `${teaId}-${vibeKey}`;
      usedReactions.add(reactionKey);
      
      // Update UI
      btnElement.classList.add('used');
      btnElement.disabled = true;
      
      const countEl = btnElement.querySelector('.count');
      countEl.textContent = parseInt(countEl.textContent) + 1;
      
      // Show animation
      btnElement.style.animation = 'pulse 0.3s ease';
      setTimeout(() => {
        btnElement.style.animation = '';
      }, 300);
      
      // Get tea data
      const tea = TEA_POOL.find(t => t.id === teaId);
      
      // Show peek notification
      showNotification(`üîì Peek unlocked! Lihat jurnal ${tea.user} selama 5 detik...`);
      
      // Start peek after short delay
      setTimeout(() => {
        startPeek(tea);
      }, 800);
    }

    // === START PEEK ===
    function startPeek(tea) {
      const overlay = document.getElementById('peek-overlay');
      const content = document.getElementById('peek-content');
      const countdownEl = document.getElementById('countdown');
      
      // Build journal content
      let journalHtml = `
        <div class="peek-journal">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px dashed var(--border);">
            <div style="width: 48px; height: 48px; border-radius: 50%; background: var(--accent-soft); display: flex; align-items: center; justify-content: center; font-size: 24px;">
              ${tea.avatar}
            </div>
            <div>
              <div style="font-family: 'Space Grotesk', sans-serif; font-weight: 600;">${tea.user}</div>
              <div style="font-size: 12px; color: var(--muted);">Anonymous Journal ‚Ä¢ ${tea.journal.length} entries</div>
            </div>
          </div>
      `;
      
      tea.journal.forEach(entry => {
        journalHtml += `
          <div class="peek-entry">
            <div class="peek-entry-time">${entry.time}</div>
            <div class="peek-entry-content">${entry.content}</div>
          </div>
        `;
      });
      
      journalHtml += '</div>';
      
      // Add artefacts if any
      if (tea.artefacts.length > 0) {
        journalHtml += '<div class="peek-artefak">';
        tea.artefacts.forEach(img => {
          journalHtml += `<img src="${img}" alt="artefak">`;
        });
        journalHtml += '</div>';
      }
      
      content.innerHTML = journalHtml;
      
      // Show overlay
      overlay.classList.add('show');
      
      // Start countdown
      let seconds = 5;
      countdownEl.textContent = seconds;
      
      peekTimer = setInterval(() => {
        seconds--;
        countdownEl.textContent = seconds;
        
        if (seconds <= 0) {
          closePeek();
        }
      }, 1000);
    }

    // === CLOSE PEEK ===
    function closePeek() {
      const overlay = document.getElementById('peek-overlay');
      
      if (peekTimer) {
        clearInterval(peekTimer);
        peekTimer = null;
      }
      
      overlay.classList.remove('show');
    }

    // === NOTIFICATION ===
    function showNotification(message) {
      const notif = document.createElement('div');
      notif.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--text);
        color: var(--bg);
        padding: 12px 24px;
        border-radius: 24px;
        font-size: 13px;
        font-family: 'Space Grotesk', sans-serif;
        z-index: 10000;
        animation: slideDown 0.3s ease;
      `;
      notif.textContent = message;
      
      document.body.appendChild(notif);
      
      setTimeout(() => {
        notif.style.animation = 'slideUp 0.3s ease';
        setTimeout(() => notif.remove(), 300);
      }, 2500);
    }

    // === NAVIGATION ===
    function navigateTo(page) {
      window.location.href = page;
    }
  </script>
</body>
</html>
