<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<title>SPILL ‚Äî vibe radar</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#000;--sf:#0a0a0a;--sfe:#111;--bd:#1a1a1a;--tx:#fff;
  --txs:#666;--txm:#444;--ap:#ff3d00;--as:#00f0ff;--aq:#00ff41;
  --war:#ff0040;--ms:#ff9500;--mt:#00ff41;--mc:#00f0ff;--md:#8b5cf6;
  --safe-bottom:env(safe-area-inset-bottom);--safe-top:env(safe-area-inset-top)
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}
html{height:100%;overflow:hidden}
body{
  height:100%;background:var(--bg);color:var(--tx);
  font-family:'Inter',-apple-system,sans-serif;font-size:14px;line-height:1.4;
  overflow:hidden;position:fixed;width:100%;overscroll-behavior:none
}
.app{height:100%;display:flex;flex-direction:column;overflow:hidden}

/* ‚îÄ‚îÄ HEADER (LIVE DIHAPUS) ‚îÄ‚îÄ */
.header{
  padding:12px 16px;padding-top:calc(12px + var(--safe-top));
  display:flex;justify-content:space-between;align-items:center;
  border-bottom:1px solid var(--bd);background:var(--bg);flex-shrink:0
}
.logo{font-size:28px;font-weight:800;letter-spacing:-2px;line-height:1}
.logo span{color:var(--as)} /* Biru untuk SPILL */
.status{display:flex;align-items:center;gap:6px}
/* LIVE DIHAPUS */

/* ‚îÄ‚îÄ SCROLL ‚îÄ‚îÄ */
.scroll{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior-y:contain}
.scroll::-webkit-scrollbar{display:none}

/* ‚îÄ‚îÄ RADAR (REVISED) ‚îÄ‚îÄ */
.radar-sect{background:var(--sf);border-bottom:1px solid var(--bd);padding:12px 0}
.radar-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 16px 12px
}
.radar-label{
  font-family:'Space Mono',monospace;
  font-size:9px;
  color:var(--as); /* Biru untuk SPILL */
  letter-spacing:1px;
  display:flex;
  align-items:center;
  gap:6px
}
.radar-label::before{
  content:'';
  width:6px;
  height:6px;
  background:var(--as);
  border-radius:50%;
  animation:blink 1s infinite
}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
.radar-stat{
  font-family:'Space Mono',monospace;
  font-size:10px;
  color:var(--aq);
  background:#0f0f0f;
  padding:4px 10px;
  border-radius:4px;
  border:1px solid #2a2a2a;
  display:flex;
  align-items:center;
  gap:6px
}
.radar-stat::before{
  content:'';
  width:6px;
  height:6px;
  background:var(--aq);
  border-radius:0;
  animation:blink 1.5s step-end infinite
}
.radar-wrapper{padding:0 16px}

/* Bezel (sama seperti asli) */
.radar-bezel{
  position:relative;
  border-radius:16px;
  padding:18px 18px 22px;
  background:linear-gradient(160deg,#3c3c3c 0%,#282828 8%,#1e1e1e 30%,#161616 50%,#1a1a1a 72%,#242424 92%,#2e2e2e 100%);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.08),inset 1px 0 0 rgba(255,255,255,.04),inset 0 -2px 0 rgba(0,0,0,.7),inset -1px 0 0 rgba(0,0,0,.5),0 2px 0 #0a0a0a,0 4px 0 #060606,0 8px 24px rgba(0,0,0,.85),0 2px 6px rgba(0,0,0,.9);
  background-image:repeating-linear-gradient(90deg,transparent,transparent 3px,rgba(0,0,0,.08)3px,rgba(0,0,0,.08)4px),linear-gradient(160deg,#3c3c3c 0%,#282828 8%,#1e1e1e 30%,#161616 50%,#1a1a1a 72%,#242424 92%,#2e2e2e 100%)
}
.radar-screw{
  position:absolute;
  width:14px;height:14px;border-radius:50%;z-index:20;
  background:radial-gradient(circle at 38% 32%,#4a4a4a 0%,#2e2e2e 35%,#1a1a1a 65%,#111 100%);
  box-shadow:0 0 0 2px #0e0e0e,0 0 0 3px #2a2a2a,inset 0 1px 2px rgba(255,255,255,.12),inset 0 -1px 2px rgba(0,0,0,.9),0 1px 3px rgba(0,0,0,.8)
}
.radar-screw::before,.radar-screw::after{
  content:'';position:absolute;border-radius:1px;
  background:rgba(0,0,0,.65)
}
.radar-screw::before{width:7px;height:1.5px;top:6.25px;left:3.5px;transform:rotate(var(--sr,0deg))}
.radar-screw::after{width:1.5px;height:7px;top:3.5px;left:6.25px;transform:rotate(var(--sr,0deg))}
.screw-tl{top:7px;left:7px;--sr:15deg}
.screw-tr{top:7px;right:7px;--sr:-20deg}
.screw-bl{bottom:11px;left:7px;--sr:-10deg}
.screw-br{bottom:11px;right:7px;--sr:25deg}
.radar-bezel-label{
  position:absolute;top:6px;left:0;right:0;
  text-align:center;font-family:'Space Mono',monospace;
  font-size:7px;font-weight:700;letter-spacing:5px;
  text-transform:uppercase;color:transparent;
  text-shadow:0 1px 0 rgba(255,255,255,.1),0 -1px 0 rgba(0,0,0,.8);
  -webkit-text-stroke:.5px rgba(255,255,255,.15)
}
.radar-bezel-range{
  position:absolute;bottom:7px;left:0;right:0;
  display:flex;justify-content:space-between;padding:0 22px;
  font-family:'Space Mono',monospace;font-size:6px;color:rgba(255,255,255,.14);
  pointer-events:none
}
.radar-bezel::after{
  content:'';position:absolute;bottom:0;left:18px;right:18px;height:3px;
  border-radius:0 0 14px 14px;
  background:linear-gradient(90deg,transparent,var(--as) 30%,var(--as) 70%,transparent);
  opacity:.35
}
.radar-cont{
  position:relative;width:100%;
  aspect-ratio:1/1;
  background:radial-gradient(ellipse at 42% 38%,#0b1a0b 0%,#040d04 55%,#010501 100%);
  border-radius:6px;overflow:hidden;
  box-shadow:inset 0 0 0 2px #000,inset 0 2px 8px rgba(0,0,0,.95),inset 0 0 60px rgba(0,0,0,.9)
}
.radar-cont::after{
  content:'';position:absolute;inset:0;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.07)2px,rgba(0,0,0,.07)3px)
}
.radar-cont::before{
  content:'';position:absolute;inset:0;
  background:radial-gradient(ellipse at 28% 22%,rgba(255,255,255,.04)0%,transparent 55%),linear-gradient(135deg,rgba(255,255,255,.015)0%,transparent 50%)
}
.radar-grid{
  position:absolute;inset:0;opacity:.065;
  background-image:repeating-linear-gradient(0deg,rgba(0,255,65,.7)0px,transparent 1px,transparent 22px),repeating-linear-gradient(90deg,rgba(0,255,65,.7)0px,transparent 1px,transparent 22px)
}
.radar-ring{position:absolute;inset:6%;border:1px solid rgba(0,255,65,.1);border-radius:50%}
.radar-ring::before,.radar-ring::after{content:'';position:absolute;border-radius:50%;border:1px solid rgba(0,255,65,.07)}
.radar-ring::before{inset:25%}.radar-ring::after{inset:50%;border-color:rgba(0,255,65,.05)}
.radar-cross{
  position:absolute;inset:0;
  background:linear-gradient(90deg,transparent calc(50% - .5px),rgba(0,255,65,.06)calc(50% - .5px),rgba(0,255,65,.06)calc(50% + .5px),transparent calc(50% + .5px)),linear-gradient(0deg,transparent calc(50% - .5px),rgba(0,255,65,.06)calc(50% - .5px),rgba(0,255,65,.06)calc(50% + .5px),transparent calc(50% + .5px))
}
.radar-canvas{position:absolute;inset:0;width:100%;height:100%;z-index:5}
.radar-dots{position:absolute;inset:0;z-index:10}
.radar-dot{
  position:absolute;width:8px;height:8px;border-radius:50%;
  transform:translate(-50%,-50%);opacity:.35;will-change:transform,opacity,filter;
  transition:opacity .1s ease-out
}
.radar-dot.active{opacity:1;transform:translate(-50%,-50%) scale(2.2);filter:brightness(2) drop-shadow(0 0 6px currentColor)}
.radar-dot.purple{background:#b026ff;box-shadow:0 0 6px #b026ff}
.radar-dot.red{background:var(--war);box-shadow:0 0 6px var(--war)}
.radar-dot.ai{background:var(--aq);box-shadow:0 0 6px var(--aq)}

/* ‚îÄ‚îÄ RADAR ACTIONS (DUAL BUTTON) ‚îÄ‚îÄ */
.radar-actions{
  display:flex;
  gap:12px;
  padding:16px 16px 8px;
  margin-top:4px
}
.action-btn{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:14px 0;
  border:none;
  border-radius:8px;
  font-family:'Space Mono',monospace;
  font-size:13px;
  font-weight:700;
  letter-spacing:1px;
  text-transform:uppercase;
  cursor:pointer;
  position:relative;
  box-shadow:0 4px 0 rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.1);
  transition:all .1s ease
}
.action-btn.left{
  background:linear-gradient(180deg,#1a2a2a,#0f1a1a);
  color:var(--as);
  border:1px solid #2a4a4a
}
.action-btn.right{
  background:linear-gradient(180deg,#2a1a1a,#1a0f0f);
  color:var(--ap);
  border:1px solid #4a2a2a
}
.action-btn:active{
  transform:translateY(3px);
  box-shadow:0 1px 0 rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.1)
}
.action-icon{font-size:18px}
.action-label{font-size:12px;letter-spacing:1.5px}
.action-badge{
  position:absolute;
  top:-4px;
  right:10px;
  min-width:20px;
  height:20px;
  background:var(--as);
  color:#000;
  font-size:10px;
  font-weight:800;
  border-radius:4px;
  display:none;
  align-items:center;
  justify-content:center;
  padding:0 6px;
  border:1px solid #000
}
.action-badge.show{display:flex}

/* VT dot in refresh btn */
.vt-dot-wrap{position:relative;width:14px;height:14px;flex-shrink:0}
.vt-dot-inner{width:8px;height:8px;background:#111;border:1px solid #1e1e1e;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:all .5s}
.vt-dot-wrap.has-tap .vt-dot-inner{animation:vt-breathe 3s ease-in-out infinite}
@keyframes vt-breathe{0%,100%{box-shadow:none;border-color:#1e1e1e}50%{box-shadow:0 0 0 3px rgba(30,30,30,.5);border-color:#2a2a2a}}

/* ‚îÄ‚îÄ FILTER ‚îÄ‚îÄ */
.filter-sect{padding:16px;border-bottom:1px solid var(--bd)}
.filter-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.filter-title{font-size:11px;font-weight:700;color:var(--txs);letter-spacing:.5px}
.match-pct{font-family:'Space Mono',monospace;font-size:14px;color:var(--ap);font-weight:700}
.vibe-slider{
  width:100%;height:4px;background:var(--bd);border-radius:2px;
  outline:none;-webkit-appearance:none;display:block;margin-bottom:6px
}
.vibe-slider::-webkit-slider-thumb{
  -webkit-appearance:none;width:24px;height:24px;background:var(--ap);
  border:3px solid var(--bg);border-radius:50%;
  box-shadow:0 0 0 1px var(--ap),0 2px 8px rgba(255,61,0,.4);margin-top:-10px
}
.vibe-slider::-webkit-slider-runnable-track{
  height:4px;background:linear-gradient(90deg,var(--ap) 0%,var(--ap) 87%,var(--bd) 87%);border-radius:2px
}
.slider-labels{display:flex;justify-content:space-between;font-size:9px;color:var(--txm);font-weight:600;margin-top:4px;margin-bottom:12px}
.mood-scroll{display:flex;gap:8px;overflow-x:auto;margin:0 -16px;padding:0 16px 4px;scrollbar-width:none}
.mood-scroll::-webkit-scrollbar{display:none}
.mood-chip{
  flex-shrink:0;padding:10px 16px;background:var(--sf);border:1px solid var(--bd);
  border-radius:24px;font-size:12px;font-weight:600;color:var(--txs);white-space:nowrap;
  touch-action:manipulation;transition:all .15s;cursor:pointer;font-family:inherit
}
.mood-chip.active{background:var(--ap);border-color:var(--ap);color:#000}
.mood-chip:active{transform:scale(.95);opacity:.8}

/* ‚îÄ‚îÄ SPILLS ‚îÄ‚îÄ */
.spills-sect{padding:16px;padding-bottom:calc(80px + var(--safe-bottom))}
.sect-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.sect-title{font-size:11px;font-weight:700;letter-spacing:.5px;color:var(--txs)}
.sect-meta{font-family:'Space Mono',monospace;font-size:9px;color:var(--txm)}
.spill-card{background:var(--sf);border:1px solid var(--bd);border-radius:16px;margin-bottom:12px;overflow:hidden}
.spill-head{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--bd);background:var(--bg)}
.spill-user{font-family:'Space Mono',monospace;font-size:11px;color:var(--txs);font-weight:600}
.spill-mood{font-size:10px;font-weight:700;padding:6px 12px;border-radius:20px;text-transform:uppercase;letter-spacing:.5px}
.spill-mood.surviving{color:var(--ms);background:rgba(255,149,0,.1)}
.spill-mood.thriving{color:var(--mt);background:rgba(57,255,20,.1)}
.spill-mood.chaotic{color:var(--mc);background:rgba(0,240,255,.1)}
.spill-mood.doom{color:var(--md);background:rgba(139,92,246,.1)}
.spill-body{padding:16px;font-size:15px;line-height:1.6;color:var(--tx)}
.spill-actions{
  display:flex;gap:8px;padding:12px 16px;border-top:1px solid var(--bd);
  background:var(--bg);overflow-x:auto;scrollbar-width:none
}
.spill-actions::-webkit-scrollbar{display:none}
.react-btn{
  display:flex;align-items:center;gap:6px;padding:10px 16px;
  background:var(--sf);border:1px solid var(--bd);border-radius:24px;
  font-size:14px;color:var(--txs);flex-shrink:0;touch-action:manipulation;
  transition:all .15s;cursor:pointer;font-family:inherit
}
.react-btn.active{background:var(--ap);border-color:var(--ap);color:#000}
.react-btn:active{transform:scale(.95)}
.react-count{font-family:'Space Mono',monospace;font-size:12px;font-weight:700;min-width:18px}
.refresh-btn{
  width:100%;padding:16px;background:transparent;border:1px dashed var(--bd);border-radius:16px;
  color:var(--txs);font-size:13px;font-weight:600;display:flex;align-items:center;
  justify-content:center;gap:8px;margin-top:8px;touch-action:manipulation;
  transition:all .15s;cursor:pointer;font-family:inherit
}
.refresh-btn:active{background:var(--sf)}
.empty-state{text-align:center;padding:60px 20px}
.empty-icon{font-size:48px;margin-bottom:16px;opacity:.5}
.empty-title{font-size:16px;font-weight:700;color:var(--txs);margin-bottom:6px}
.empty-text{font-size:13px;color:var(--txm)}

/* ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ */
.bnav{
  position:fixed;bottom:0;left:0;right:0;background:rgba(0,0,0,.95);
  backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border-top:1px solid var(--bd);padding-bottom:var(--safe-bottom);z-index:100
}
.bnav-inner{display:flex;justify-content:space-around;align-items:center;height:60px;max-width:480px;margin:0 auto}
.nav-item{
  flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:4px;height:100%;color:var(--txs);text-decoration:none;font-size:10px;
  font-weight:600;letter-spacing:.3px;position:relative;touch-action:manipulation;transition:all .15s
}
.nav-item.active{color:var(--as)} /* Biru untuk SPILL */
.nav-item.active::before{
  content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);
  width:20px;height:2px;background:var(--as);border-radius:0 0 2px 2px
}
.nav-icon{font-size:22px;line-height:1;margin-bottom:-2px}

/* ‚îÄ‚îÄ MODALS (sama seperti asli) ‚îÄ‚îÄ */
.modal{display:none;position:fixed;inset:0;background:var(--bg);z-index:200;flex-direction:column;overflow:hidden}
.modal.on{display:flex}
.modal-header{
  display:flex;justify-content:space-between;align-items:center;
  padding:16px;padding-top:calc(16px + var(--safe-top));border-bottom:1px solid var(--bd)
}
.modal-title{font-size:17px;font-weight:700;letter-spacing:-.3px}
.modal-close{
  width:36px;height:36px;display:flex;align-items:center;justify-content:center;
  background:var(--sf);border:1px solid var(--bd);border-radius:10px;color:var(--txs);
  font-size:18px;touch-action:manipulation;cursor:pointer;transition:all .15s
}
.modal-close:active{background:var(--bd)}
.modal-body{flex:1;overflow-y:auto;padding:20px 16px calc(20px + var(--safe-bottom));-webkit-overflow-scrolling:touch}
.modal-tag{font-family:'Space Mono',monospace;font-size:10px;color:var(--ap);margin-bottom:8px;letter-spacing:1px;font-weight:700;display:block}
.modal-h{font-size:26px;font-weight:800;margin-bottom:6px;letter-spacing:-.5px;line-height:1.2}
.modal-sub{font-size:14px;color:var(--txs);margin-bottom:28px;line-height:1.5}
.gender-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:24px}
.gender-card{
  background:var(--sf);border:1px solid var(--bd);border-radius:20px;padding:28px 16px;
  text-align:center;touch-action:manipulation;transition:all .15s;cursor:pointer
}
.gender-card.selected{border-color:var(--ap);background:rgba(255,61,0,.08)}
.gender-card:active{transform:scale(.96)}
.gender-icon{font-size:36px;margin-bottom:12px;display:block}
.gender-label{font-size:15px;font-weight:700;margin-bottom:4px}
.gender-desc{font-size:12px;color:var(--txs)}
.info-box{background:var(--sf);border-left:3px solid var(--ap);padding:16px;margin-bottom:28px;border-radius:0 16px 16px 0}
.info-box p{font-family:'Space Mono',monospace;font-size:11px;color:var(--txs);line-height:1.7}
.info-box strong{color:var(--ap);font-weight:700}
.action-btn{
  width:100%;padding:18px;background:var(--ap);color:#000;border:none;border-radius:14px;
  font-size:15px;font-weight:700;letter-spacing:.3px;touch-action:manipulation;
  cursor:pointer;transition:all .15s;font-family:inherit
}
.action-btn:disabled{opacity:.3;cursor:not-allowed}
.action-btn:active{transform:scale(.98)}
.action-btn.sec{background:var(--sf);color:var(--tx);border:1px solid var(--bd)}
.modal-hint{font-size:12px;color:var(--txm);text-align:center;margin-top:16px;line-height:1.6}
.modal-hint-link{background:none;border:none;color:var(--as);font-size:12px;font-weight:700;cursor:pointer;text-decoration:underline;font-family:inherit;padding:0}

/* PRICING */
.price-card{
  background:var(--sf);border:1px solid var(--bd);border-radius:20px;padding:24px 20px;
  margin-bottom:12px;display:flex;justify-content:space-between;align-items:center;
  touch-action:manipulation;transition:all .15s;cursor:pointer
}
.price-card.selected{border-color:var(--ap);background:rgba(255,61,0,.08)}
.price-card:active{transform:scale(.98)}
.price-main{font-size:32px;font-weight:800;color:var(--ap);letter-spacing:-2px;line-height:1}
.price-sub{font-size:12px;color:var(--txs);margin-top:4px;font-family:'Space Mono',monospace}
.price-right{text-align:right}
.price-tag{font-size:13px;font-weight:700;color:var(--aq);margin-bottom:3px}
.price-note{font-size:11px;color:var(--txm);font-family:'Space Mono',monospace}
.timer-big{text-align:center;padding:40px 24px;background:var(--sf);border-radius:20px;margin-bottom:24px;border:1px solid var(--bd)}
.timer-big .num{font-family:'Space Mono',monospace;font-size:56px;font-weight:700;color:var(--war);line-height:1;letter-spacing:-3px}
.timer-big .label{font-size:12px;color:var(--txs);margin-top:12px;text-transform:uppercase;letter-spacing:2px;font-weight:600}

/* ‚îÄ‚îÄ CHAT ROOM ‚îÄ‚îÄ */
.chat-room{display:none;position:fixed;inset:0;background:var(--bg);z-index:300;flex-direction:column}
.chat-room.on{display:flex}
.chat-head{
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 16px;padding-top:calc(12px + var(--safe-top));
  border-bottom:1px solid var(--bd);background:var(--sf)
}
.chat-info{flex:1}
.chat-label{font-family:'Space Mono',monospace;font-size:9px;color:var(--aq);letter-spacing:1px;margin-bottom:3px;font-weight:700}
.chat-name{font-size:15px;font-weight:700}
.chat-timer{
  font-family:'Space Mono',monospace;font-size:16px;font-weight:700;color:var(--aq);
  background:var(--bg);padding:8px 14px;border-radius:10px;border:1px solid var(--bd);letter-spacing:-1px
}
.chat-timer.warn{color:var(--war);border-color:var(--war);animation:blink 1s infinite;background:rgba(255,0,64,.1)}
.chat-close{
  width:40px;height:40px;display:flex;align-items:center;justify-content:center;
  background:var(--bg);border:1px solid var(--bd);border-radius:12px;
  color:var(--txs);margin-left:12px;font-size:18px;touch-action:manipulation;cursor:pointer;transition:all .15s
}
.chat-close:active{background:var(--bd)}
.chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px;-webkit-overflow-scrolling:touch}
.chat-bubble{
  max-width:85%;padding:14px 18px;border-radius:20px;font-size:15px;line-height:1.5;
  word-wrap:break-word;animation:popIn .25s cubic-bezier(.175,.885,.32,1.275)
}
@keyframes popIn{from{opacity:0;transform:scale(.8) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}
.chat-bubble.me{align-self:flex-end;background:var(--ap);color:#000;border-bottom-right-radius:6px;font-weight:600}
.chat-bubble.them{align-self:flex-start;background:var(--sf);border:1px solid var(--bd);border-bottom-left-radius:6px}
.chat-msg{display:flex;flex-direction:column;max-width:85%}
.chat-msg.own{align-self:flex-end}
.chat-msg.other{align-self:flex-start}
.chat-msg .chat-bubble{max-width:100%}
.own .chat-bubble{background:var(--ap);color:#000;border-bottom-right-radius:6px;font-weight:600;align-self:flex-end}
.other .chat-bubble{background:var(--sf);border:1px solid var(--bd);border-bottom-left-radius:6px;align-self:flex-start}
.chat-time{font-size:10px;color:var(--txm);margin-top:6px;font-family:'Space Mono',monospace;font-weight:600}
.chat-meta{font-size:10px;color:var(--txm);margin-top:4px;padding:0 2px;font-family:'Space Mono',monospace;font-weight:600}
.typing{display:flex;gap:4px;padding:18px 22px;background:var(--sf);border:1px solid var(--bd);border-radius:20px;border-bottom-left-radius:6px;align-self:flex-start;width:fit-content}
.typing-dot{width:8px;height:8px;background:var(--aq);border-radius:50%;animation:typing 1.4s infinite}
.typing-dot:nth-child(2){animation-delay:.2s}.typing-dot:nth-child(3){animation-delay:.4s}
@keyframes typing{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-5px)}}
.typing-cursor{display:inline-block;width:2px;height:14px;background:var(--aq);margin-left:2px;animation:blink 1s infinite;vertical-align:middle}
.chat-msg.searching-msg{align-self:center!important;max-width:90%!important}
.searching-msg .chat-bubble{background:var(--sfe)!important;color:var(--txs)!important;border:1px dashed var(--aq)!important;font-style:italic;text-align:center}
.distress{display:none;padding:14px 16px;background:var(--war);color:#fff;font-size:12px;font-weight:700;text-align:center;letter-spacing:.3px}
.distress.show{display:block}
.chat-input-wrap{
  padding:12px 16px;padding-bottom:calc(12px + var(--safe-bottom));
  border-top:1px solid var(--bd);background:var(--sf);display:flex;gap:10px;align-items:center
}
.vt-trigger{
  width:40px;height:48px;background:transparent;border:1px solid #1a1a1a;color:#333;
  display:flex;align-items:center;justify-content:center;flex-shrink:0;cursor:pointer;
  border-radius:12px;font-size:13px;transition:all .2s
}
.vt-trigger:hover{border-color:#333;color:#555}
.chat-input{
  flex:1;background:var(--bg);border:1px solid var(--bd);border-radius:24px;
  padding:14px 18px;font-size:15px;color:var(--tx);outline:none;
  -webkit-appearance:none;transition:all .15s;font-family:inherit
}
.chat-input:focus{border-color:var(--ap)}
.chat-send{
  width:48px;height:48px;background:var(--ap);border:none;border-radius:50%;
  display:flex;align-items:center;justify-content:center;color:#000;font-size:20px;
  flex-shrink:0;touch-action:manipulation;cursor:pointer;
  box-shadow:0 4px 0 rgba(255,61,0,.3);transition:all .15s
}
.chat-send:active{transform:translateY(4px);box-shadow:0 0 0 rgba(255,61,0,.3)}

/* ‚îÄ‚îÄ WHISPERER ‚îÄ‚îÄ */
.ws-feature-list{display:flex;flex-direction:column;gap:8px;margin-bottom:20px}
.ws-feature{font-size:12px;color:var(--txs);padding:10px 14px;background:var(--sfe);border-left:2px solid var(--as);border-radius:0 8px 8px 0;font-weight:600}
.ws-price-box{background:var(--sf);border:1px solid rgba(0,240,255,.25);padding:20px;text-align:center;margin-bottom:20px;border-radius:16px}
.ws-price{font-size:40px;font-weight:800;color:var(--as);letter-spacing:-2px;line-height:1}
.ws-price-sub{font-size:11px;color:var(--txm);margin-top:6px;text-transform:uppercase;letter-spacing:.1em;font-weight:700;font-family:'Space Mono',monospace}
.ws-inbox-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.ws-compose-btn{background:var(--as);color:#000;border:none;padding:10px 18px;font-size:12px;font-weight:700;border-radius:10px;cursor:pointer;font-family:inherit;touch-action:manipulation}
.ws-compose-btn:active{opacity:.8}
.ws-thread-item{
  background:var(--sf);border:1px solid var(--bd);border-radius:14px;padding:14px 16px;
  margin-bottom:8px;display:flex;align-items:center;gap:12px;cursor:pointer;
  touch-action:manipulation;transition:all .15s;position:relative;overflow:hidden
}
.ws-thread-item::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--as);opacity:0;transition:opacity .15s;border-radius:3px 0 0 3px}
.ws-thread-item.unread::before{opacity:1}
.ws-thread-item:active{transform:scale(.98)}
.ws-avatar{width:40px;height:40px;background:var(--sfe);border:1px solid var(--bd);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:800;color:var(--txs);flex-shrink:0}
.ws-thread-info{flex:1;min-width:0}
.ws-thread-name{font-size:13px;font-weight:700;color:var(--tx);margin-bottom:3px}
.ws-thread-preview{font-size:11px;color:var(--txm);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ws-thread-right{display:flex;flex-direction:column;align-items:flex-end;gap:5px;flex-shrink:0}
.ws-thread-time{font-size:9px;color:var(--txm);font-family:'Space Mono',monospace}
.ws-unread-badge{min-width:20px;height:20px;background:var(--as);color:#000;font-size:9px;font-weight:800;border-radius:10px;display:flex;align-items:center;justify-content:center;padding:0 5px}
.ws-empty{text-align:center;padding:40px 0}
.ws-empty-icon{font-size:36px;display:block;margin-bottom:12px;opacity:.3}
.ws-empty-title{font-size:15px;font-weight:700;color:var(--txs);margin-bottom:4px}
.ws-empty-sub{font-size:12px;color:var(--txm)}
.ws-compose{display:none;position:fixed;inset:0;background:var(--bg);z-index:350;flex-direction:column}
.ws-compose.on{display:flex}
.ws-compose-head{
  display:flex;align-items:center;gap:12px;padding:14px 16px;
  padding-top:calc(14px + var(--safe-top));border-bottom:1px solid var(--bd);background:var(--sf)
}
.ws-to-label{font-size:11px;font-weight:700;color:var(--txm);white-space:nowrap;font-family:'Space Mono',monospace}
.ws-to-input{flex:1;background:transparent;border:none;border-bottom:1px solid var(--bd);color:var(--tx);font-size:16px;font-family:inherit;padding:4px 0;outline:none;transition:border-color .15s}
.ws-to-input:focus{border-bottom-color:var(--as)}
.ws-to-input::placeholder{color:var(--txm)}
.ws-close-btn{width:36px;height:36px;background:var(--bg);border:1px solid var(--bd);border-radius:10px;color:var(--txs);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px;flex-shrink:0}
.ws-body{flex:1;background:transparent;border:none;color:var(--tx);font-family:inherit;font-size:16px;line-height:1.6;resize:none;padding:20px 16px;outline:none}
.ws-body::placeholder{color:var(--txm)}
.ws-compose-foot{
  padding:12px 16px;padding-bottom:calc(12px + var(--safe-bottom));
  border-top:1px solid var(--bd);background:var(--sf);display:flex;justify-content:space-between;align-items:center
}
.ws-char-count{font-size:10px;color:var(--txm);font-family:'Space Mono',monospace}
.ws-send-btn{background:var(--as);color:#000;border:none;padding:12px 24px;font-size:13px;font-weight:700;border-radius:12px;cursor:pointer;font-family:inherit;transition:all .15s;box-shadow:0 4px 0 rgba(0,240,255,.2)}
.ws-send-btn:active{transform:translateY(3px);box-shadow:none}
.ws-send-btn:disabled{opacity:.3;cursor:not-allowed;box-shadow:none}
.ws-thread{display:none;position:fixed;inset:0;background:var(--bg);z-index:350;flex-direction:column}
.ws-thread.on{display:flex}
.ws-thread-head{
  display:flex;align-items:center;gap:12px;padding:12px 16px;
  padding-top:calc(12px + var(--safe-top));border-bottom:1px solid var(--bd);background:var(--sf)
}
.ws-back-btn{width:36px;height:36px;background:var(--bg);border:1px solid var(--bd);border-radius:10px;color:var(--txs);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px;flex-shrink:0;touch-action:manipulation}
.ws-thread-title{flex:1;font-size:15px;font-weight:700}
.ws-vt-btn{background:transparent;border:1px solid #1a1a1a;color:#333;width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:12px;transition:all .2s;flex-shrink:0}
.ws-vt-btn:hover{border-color:#333;color:#555}
.ws-thread-msgs{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px;-webkit-overflow-scrolling:touch}
.ws-thread-input-wrap{
  padding:12px 16px;padding-bottom:calc(12px + var(--safe-bottom));
  border-top:1px solid var(--bd);background:var(--sf);display:flex;gap:10px;align-items:center
}
.ws-thread-input{flex:1;background:var(--bg);border:1px solid var(--bd);border-radius:24px;padding:14px 18px;font-size:15px;color:var(--tx);outline:none;font-family:inherit;transition:border-color .15s}
.ws-thread-input:focus{border-color:var(--as)}
.ws-thread-send{width:48px;height:48px;background:var(--as);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#000;font-size:20px;flex-shrink:0;cursor:pointer;touch-action:manipulation;transition:all .15s;box-shadow:0 4px 0 rgba(0,240,255,.2)}
.ws-thread-send:active{transform:translateY(4px);box-shadow:none}

/* ‚îÄ‚îÄ VOID TAP ‚îÄ‚îÄ */
.vt-compose{display:none;position:fixed;inset:0;background:#000;z-index:500;flex-direction:column;align-items:stretch;justify-content:center}
.vt-compose.on{display:flex;animation:vtFade .2s ease}
@keyframes vtFade{from{opacity:0}to{opacity:1}}
.vt-compose-inner{max-width:480px;width:100%;margin:0 auto;padding:40px 24px;display:flex;flex-direction:column;gap:28px}
.vt-lbl{font-size:9px;font-weight:700;color:#2a2a2a;text-transform:uppercase;letter-spacing:.2em;font-family:'Space Mono',monospace}
.vt-textarea{background:transparent;border:none;border-bottom:1px solid #1a1a1a;color:#444;font-family:'Inter',sans-serif;font-size:18px;line-height:1.7;resize:none;height:130px;outline:none;caret-color:#333;padding:8px 0}
.vt-textarea::placeholder{color:#1a1a1a;font-style:italic}
.vt-textarea:focus{border-bottom-color:#252525}
.vt-meta{display:flex;justify-content:space-between;align-items:center}
.vt-quota{font-size:10px;color:#222;font-family:'Space Mono',monospace}
.vt-quota.low{color:#331111}
.vt-actions{display:flex;gap:8px}
.vt-cancel{background:transparent;border:1px solid #181818;color:#2a2a2a;padding:10px 18px;font-size:11px;font-weight:700;text-transform:uppercase;cursor:pointer;font-family:inherit;border-radius:8px}
.vt-cancel:hover{border-color:#2a2a2a;color:#444}
.vt-send{background:#0a0a0a;border:1px solid #1e1e1e;color:#333;padding:10px 22px;font-size:11px;font-weight:700;text-transform:uppercase;cursor:pointer;font-family:inherit;border-radius:8px;transition:all .15s}
.vt-send:hover:not(:disabled){border-color:#333;color:#666}
.vt-send:disabled{opacity:.2;cursor:not-allowed}
.vt-reader{display:none;position:fixed;inset:0;background:#000;z-index:500;flex-direction:column;align-items:center;justify-content:center;user-select:none}
.vt-reader.on{display:flex;animation:vtFade .2s ease}
.vt-reader-from{position:absolute;top:calc(52px + var(--safe-top));left:50%;transform:translateX(-50%);font-size:9px;color:#1a1a1a;font-weight:700;text-transform:uppercase;letter-spacing:.25em;white-space:nowrap;font-family:'Space Mono',monospace}
.vt-reader-msg{max-width:300px;padding:0 24px;text-align:center;color:#3d3d3d;font-size:17px;line-height:1.8}
.vt-reader-timer{position:absolute;bottom:calc(52px + var(--safe-bottom));left:50%;transform:translateX(-50%);font-family:'Space Mono',monospace;font-size:10px;color:#1e1e1e;letter-spacing:.15em;text-transform:uppercase}
.vt-reader.burning .vt-reader-msg,.vt-reader.burning .vt-reader-timer,.vt-reader.burning .vt-reader-from{animation:vtBurn .7s ease forwards}
@keyframes vtBurn{0%{opacity:1;filter:none}50%{opacity:.4;filter:blur(2px)}100%{opacity:0;filter:blur(12px)}}
.vt-upgrade-nudge{display:none;position:fixed;bottom:calc(84px + var(--safe-bottom));left:50%;transform:translateX(-50%) translateY(16px);background:#0a0a0a;border:1px solid #1a1a1a;padding:12px 20px;font-size:12px;color:#333;white-space:nowrap;z-index:400;opacity:0;transition:all .3s;cursor:pointer;border-radius:20px}
.vt-upgrade-nudge.show{display:block;opacity:1;transform:translateX(-50%) translateY(0)}
.vt-upgrade-nudge b{color:#555}

/* TOAST */
.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--tx);color:var(--bg);padding:14px 24px;border-radius:30px;font-size:14px;font-weight:700;z-index:600;opacity:0;transition:all .3s cubic-bezier(.175,.885,.32,1.275);pointer-events:none;white-space:nowrap;box-shadow:0 10px 40px rgba(0,0,0,.5)}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
.toast.error{background:var(--war);color:#fff}
</style>
</head>
<body>
<div class="app">

<!-- HEADER (tanpa LIVE) -->
<div class="header">
  <div class="logo">SP<span>‚úï</span>LL</div>
  <div class="status"><div class="pulse"></div></div> <!-- LIVE dihapus -->
</div>

<!-- SCROLL AREA -->
<div class="scroll">

<!-- RADAR (dengan 21 ONLINE di header & dual button) -->
<div class="radar-sect">
  <div class="radar-header">
    <span class="radar-label">VIBE RADAR</span>
    <span class="radar-stat" id="onlineCount">21 ONLINE</span>
  </div>
  <div class="radar-wrapper">
    <div class="radar-bezel">
      <div class="radar-screw screw-tl"></div>
      <div class="radar-screw screw-tr"></div>
      <div class="radar-screw screw-bl"></div>
      <div class="radar-screw screw-br"></div>
      <div class="radar-bezel-label">VIBE RADAR ‚Äî SYS ACTIVE</div>
      <div class="radar-cont" id="radarCont">
        <div class="radar-grid"></div>
        <div class="radar-ring"></div>
        <div class="radar-cross"></div>
        <canvas class="radar-canvas" id="radarCanvas"></canvas>
        <div class="radar-dots" id="radarDots"></div>
      </div>
      <div class="radar-bezel-range"><span>0.5km</span><span>RNG</span><span>50km</span></div>
    </div>
  </div>
  
  <!-- DUAL BUTTON INSTRUMEN -->
  <div class="radar-actions">
    <button class="action-btn left" onclick="openWsModal()">
      <span class="action-icon">‚ú¶</span>
      <span class="action-label">WHISPERER</span>
      <span class="action-badge" id="wsBadge">0</span>
    </button>
    <button class="action-btn right" onclick="startVibeCheck()">
      <span class="action-icon">‚¨°</span>
      <span class="action-label">VIBE CHECK</span>
    </button>
  </div>
</div>

<!-- FILTER -->
<div class="filter-sect">
  <div class="filter-top">
    <span class="filter-title">KESELARASAN</span>
    <span class="match-pct" id="vibePct">87%</span>
  </div>
  <input type="range" class="vibe-slider" id="vibeSlider" min="0" max="100" value="87" oninput="updateVibePct(this.value)">
  <div class="slider-labels"><span>Homie</span><span>Semi</span><span>All</span></div>
  <div class="mood-scroll">
    <button class="mood-chip active" data-mood="all" onclick="filterMood(this)">Semua</button>
    <button class="mood-chip" data-mood="surviving" onclick="filterMood(this)">üòÆ‚Äçüí® Surviving</button>
    <button class="mood-chip" data-mood="thriving" onclick="filterMood(this)">‚ú® Thriving</button>
    <button class="mood-chip" data-mood="chaotic" onclick="filterMood(this)">üåÄ Chaotic</button>
    <button class="mood-chip" data-mood="doom" onclick="filterMood(this)">üõå Doom</button>
  </div>
</div>

<!-- SPILLS -->
<div class="spills-sect">
  <div class="sect-header">
    <span class="sect-title">SPILL TERKINI</span>
    <span class="sect-meta">FIFO</span>
  </div>
  <div id="spillsList"></div>
  <button class="refresh-btn" onclick="refreshSpills()">
    <div class="vt-dot-wrap" id="vtIndicator" onclick="event.stopPropagation();checkVoidTaps()">
      <div class="vt-dot-inner"></div>
    </div>
    <span>‚Üª</span>
    <span>Seduh Teh Baru</span>
  </button>
</div>

</div><!-- /scroll -->

<!-- BOTTOM NAV (dengan SPILL sebagai active) -->
<nav class="bnav">
  <div class="bnav-inner">
    <a href="spill.html" class="nav-item active"><span class="nav-icon">‚úï</span><span>Spill</span></a>
    <a href="vibe.html" class="nav-item"><span class="nav-icon">‚¨°</span><span>Vibe</span></a>
    <a href="whisper.html" class="nav-item"><span class="nav-icon">‚ú¶</span><span>Whisper</span></a>
    <a href="glitch.html" class="nav-item"><span class="nav-icon">‚ö°</span><span>Glitch</span></a>
  </div>
</nav>

</div><!-- /app -->

<!-- MODALS (sama persis dengan file asli) -->
<div class="modal" id="genderModal"> <!-- ... konten modal ... --> </div>
<div class="modal" id="upgradeModal"> <!-- ... konten modal ... --> </div>
<div class="chat-room" id="chatRoom"> <!-- ... konten chat ... --> </div>
<div class="modal" id="wsModal"> <!-- ... konten whisperer ... --> </div>
<div class="ws-compose" id="wsComposeScreen"> <!-- ... --> </div>
<div class="ws-thread" id="wsThreadScreen"> <!-- ... --> </div>
<div class="vt-compose" id="vtCompose"> <!-- ... --> </div>
<div class="vt-reader" id="vtReader"> <!-- ... --> </div>
<div class="vt-upgrade-nudge" id="vtUpgradeNudge">limit harian habis ‚Äî <b>upgrade</b></div>
<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
let currentGender=null,chatPartner=null,timerInterval=null,chatTimeLeft=900,selectedPlan=null,activeMood='all',radarInterval,radarRAF=null,userName='stranger',activeWsThread=null,vtBurnTimer=null;

// DATA AI (LENGKAP)
const AI_CHARS={
  female:[
    {name:'beby.manis',mood:['surviving','thriving','chaotic'],rants:["hari ini gue liat mantan sama cewek baru, dan tau gak? rambutnya lebih bagus dari rambut gue üò≠","cape bener jadi cewek, setiap bulan harus nahan sakit perut sambil tetep senyum di depan client","kenapa sih cowok kalo ditanya 'lagi apa' pasti jawabnya 'lagi main'? ga ada variasi lain?","gue lagi fase pengen dimengerti tanpa harus jelasin panjang lebar","bete banget skincare gue habis, padahal baru kemarin beli. ada yang ngutil?"]},
    {name:'strawberry.shortcake',mood:['surviving','doom','chaotic'],rants:["hari ini gue salah kirim chat pacar ke grup keluarga. isinya 'sayang udah mandi belom?' üò≠","kenapa orangtua selalu curiga kalo kita lagi seneng? 'lagi seneng-seneng ya? nanti belajar'","gue lagi diet, tapi tiap liat roti, rotinya yang liat gue duluan","stress skripsi tapi yang keluar peluh dan air mata doang","hari ini gue nangis karena ga bisa buka toples. lemah?"]},
    {name:'pretty.sad',mood:['doom','surviving'],rants:["kadang gue mikir, apa kita yang terlalu berharap atau emang janjinya ga pernah ditepatin?","hujan hari ini, tapi gaada yang tanya 'udah makan belom?'","capek pura-pura baik-baik aja. gue juga manusia, bisa hancur","kenapa ya orang lebih peduli sama 'kabar' daripada 'perasaan'?","malam ini gue lagi fase nerima kenyataan kalo dia ga akan balik"]},
    {name:'little.fairy',mood:['chaotic','thriving','surviving'],rants:["kalo gue jadi kucing, gue bakal tidur 20 jam sehari dan ga bakal di-judge malas","hari ini gue nangis karena liat video kura-kura lagi berantem. mereka kayak 'ga ada yang mundur!'","kok bisa sih orang dagang pake sound toa keras banget? emang gaada kerjaan lain?","gue percaya kalo alam semesta itu lagi iseng sama gue","ada yang percaya rejeki ga bakal kemana? gue, tapi tetep nangis tiap liat saldo"]},
    {name:'cinnamon.girl',mood:['doom','surviving'],rants:["hari ini gue nangis di angkot gegara liat kucing dipukul orang. mental gue udah kayak kerupuk kena hujan.","kenapa sih orang jahat bisa tidur nyenyak? gue yang baik aja susah tidur","hari ini gue bantu orang, eh malah dijadiin 'teman curhat' seharian. capek fisik mental","tolong kasih gue tanda kalo dunia ini ga sekejam kelihatannya","lagi fase sulit bilang 'ga' ke orang. jadi numpuk kerjaan sendiri"]}
  ],
  male:[
    {name:'si.badai',mood:['doom','surviving','chaotic'],rants:["hari ini gue ditagih utang sama mantan. utang apa? utang perasaan katanya","capek jadi orang yang dianggap kuat terus. gue juga pengen nangis dipeluk","kenapa sih kalo udah malem suka overthinking? badan capek tapi pikiran lari maraton","jadi cowok tuh gaboleh lemah katanya. tapi dalemnya ancur","gue capek jadi 'tembok' tempat orang bersandar. giliran gue butuh sandaran, pada pergi"]},
    {name:'moon.child',mood:['doom','surviving'],rants:["malam ini gue liat bulan sendirian. sama kayak gue. tapi bulan masih punya bintang.","kenapa cinta harus pergi? apa karena gue ga bisa jadi alasan buat dia bertahan?","hari ini gue dapet kabar doi udah tunangan. selamat ya, semoga dia bahagia (gue bohong)","capek nungguin orang yang ga pasti. tapi lebih capek ngelepasinnya","jangan tanya gue 'kabar baik?'. kabar gue baik-baik aja, cuma hati lagi berdarah-darah"]},
    {name:'si.kocak',mood:['chaotic','surviving'],rants:["hidup tuh kayak sinetron. kadang bahagia, kadang nangis, tapi endingnya selalu bikin kesel","hari ini gue ditilang polisi. katanya motor gue terlalu keren. padahal cuma mau pamer","stress mikirin masa depan. solusi gue: tidur. besok dipikirin lagi. atau lusa","orang bilang kalo kamu ketawa berarti kamu bahagia. berarti gue artis pemenang Oscar","hari ini gue ketawa terbahak-bahak. abis itu nangis. abis itu ketawa lagi. am i okay?"]},
    {name:'si.pedas',mood:['chaotic','thriving','surviving'],rants:["hari ini gue dikatain 'kamu berubah'. iya lah, gua bukan nasi bisa tetep sama","tolong ya, kalo chat itu dibales. jangan cuma diliat doang, matanya apa hpnya yang liat?","ada yang bilang 'kerja keras ga akan khianati hasil'. hasilnya: gue dikhianati sama kesehatan","lagi fase males bales chat semua orang. bukan depresi, cuma lagi males sama dunia","orang suka bilang 'sabar ya'. gue pengen jawab 'sabarin aja tai'"]},
    {name:'abang.gaul',mood:['chaotic','surviving','doom'],rants:["hari ini gue liat orang bawa balon. mungkin balon itu temen curhatnya","kenapa sih kalo lagi di kamar mandi suka inget kejadian memalukan 5 tahun lalu?","gue pengen jadi kucing tetangga. tidur, makan, tidur lagi, ga pernah mikir cicilan","hari ini gue nangis gegara kehabisan kuota pas lagi nonton drakor climax","ada yang pernah ngerasa jadi orang paling sendiri di keramaian? iyalah kita di jalan tol"]}
  ]
};

const USER_RANTS=[
  {id:1,author:'anon.kucing',mood:'surviving',content:'Hari ini gue nangis di angkot gegara liat kucing dipukul orang. Mental gue udah kayak kerupuk kena hujan.',reactions:{skull:42,cry:89,fire:12,upside:7},userReacted:null},
  {id:2,author:'sleepy.head',mood:'thriving',content:'akhirnya bisa tidur nyenyak semalaman setelah 3 minggu insomnia. makasih buat yang chat tadi malem.',reactions:{skull:23,cry:15,fire:67,upside:31},userReacted:null},
  {id:3,author:'chaos.queen',mood:'chaotic',content:'hari ini chaos abis! dari bangun tidur udah salah ambil kaki, sampe kantor lupa bawa laptop.',reactions:{skull:89,cry:23,fire:45,upside:78},userReacted:null},
  {id:4,author:'quiet.one',mood:'doom',content:'udah seminggu nggak keluar kamar. bukan karena sibuk. cuma nggak tau mau ngapain.',reactions:{skull:67,cry:112,fire:8,upside:34},userReacted:null}
];

const REACTION_EMOJI={skull:'üíÄ',cry:'üò≠',fire:'üî•',upside:'üôÉ'};

// UTILS
const $=id=>document.getElementById(id);
const esc=t=>{const d=document.createElement('div');d.textContent=t;return d.innerHTML};
function toast(msg,isErr=false){const t=$('toast');t.textContent=msg;t.className='toast'+(isErr?' error':'');t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2500);}
function closeModal(id){$(id).classList.remove('on');}
function updateVibePct(val){$('vibePct').textContent=val+'%';}
function filterMood(btn){document.querySelectorAll('.mood-chip').forEach(b=>b.classList.remove('active'));btn.classList.add('active');activeMood=btn.dataset.mood;renderSpills();}

// SPILLS
function generateAIRants(c=3){let r=[],n=Math.max(...USER_RANTS.map(u=>u.id))+1;for(let i=0;i<c;i++){let g=Math.random()>.5?'female':'male',ch=AI_CHARS[g][Math.floor(Math.random()*AI_CHARS[g].length)];r.push({id:n++,author:ch.name,isAI:true,mood:ch.mood[Math.floor(Math.random()*ch.mood.length)],content:ch.rants[Math.floor(Math.random()*ch.rants.length)],reactions:{skull:Math.floor(Math.random()*50),cry:Math.floor(Math.random()*100),fire:Math.floor(Math.random()*40),upside:Math.floor(Math.random()*30)},userReacted:null});}return r;}
function renderSpills(){let l=$('spillsList'),a=[...USER_RANTS,...generateAIRants(6)],f=activeMood==='all'?a:a.filter(s=>s.mood===activeMood);if(!f.length){l.innerHTML='<div class="empty-state"><div class="empty-icon">üçÉ</div><div class="empty-title">Belum ada spill</div><div class="empty-text">Coba filter lain</div></div>';return;}
l.innerHTML=f.map(s=>`<div class="spill-card"><div class="spill-head"><span class="spill-user">@${esc(s.author)}${s.isAI?' ü§ñ':''}</span><span class="spill-mood ${s.mood}">${s.mood}</span></div><div class="spill-body">${esc(s.content)}</div><div class="spill-actions">${Object.entries(REACTION_EMOJI).map(([k,em])=>`<button class="react-btn ${s.userReacted===k?'active':''}" onclick="react(this,${s.id},'${k}')">${em}<span class="react-count" id="rc-${s.id}-${k}">${s.reactions[k]}</span></button>`).join('')}</div></div>`).join('');}
function react(btn,id,k){let s=[...USER_RANTS,...generateAIRants(0)].find(s=>s.id===id);if(!s)return;let w=btn.classList.contains('active');document.querySelectorAll(`[id^="rc-${id}-"]`).forEach(el=>el.closest('button').classList.remove('active'));w?s.reactions[k]--:(s.reactions[k]++,btn.classList.add('active'));s.userReacted=w?null:k;Object.keys(s.reactions).forEach(r=>{let e=$(`rc-${id}-${r}`);if(e)e.textContent=s.reactions[r];});}
function refreshSpills(){renderSpills();toast('Teh baru diseduh ‚òï');}

// RADAR (lengkap dengan animasi)
let radarDots=[],needleAngle=0,needleOmega=0,phaseA=Math.random()*Math.PI*2,phaseB=Math.random()*Math.PI*2,phaseC=Math.random()*Math.PI*2;
const BASE_RPM=60/4,BASE_OMEGA=(BASE_RPM*Math.PI*2)/(60*60),TRAIL_CAP=120,trail=new Float32Array(TRAIL_CAP);let trailPtr=0;const dotGlow=new Map();
function initRadar(){const c=$('radarCanvas'),ct=$('radarCont');function rs(){const r=ct.getBoundingClientRect();c.width=r.width;c.height=r.height;}rs();window.addEventListener('resize',rs,{passive:true});spawnDots();radarInterval=setInterval(()=>{radarDots.forEach(d=>{d.vx=(d.vx*0.88)+(Math.random()-0.5)*0.3;d.vy=(d.vy*0.88)+(Math.random()-0.5)*0.3;d.x=Math.max(9,Math.min(91,d.x+d.vx));d.y=Math.max(9,Math.min(91,d.y+d.vy));if(d.el){d.el.style.left=d.x+'%';d.el.style.top=d.y+'%';}});},100);$('onlineCount').textContent=Math.floor(18+Math.random()*15)+' ONLINE';needleAngle=Math.random()*Math.PI*2;trail.fill(needleAngle);radarLoop(c);}
function spawnDots(){const con=$('radarDots');if(!con)return;con.innerHTML='';radarDots=[];let cnt=5+Math.floor(Math.random()*5);for(let i=0;i<cnt+2;i++){let ai=i>=cnt,ang=Math.random()*Math.PI*2,dist=12+Math.random()*70,x=50+Math.cos(ang)*dist/2,y=50+Math.sin(ang)*dist/2,d=document.createElement('div'),t=ai?'ai':(Math.random()>0.5?'purple':'red');d.className='radar-dot '+t;d.style.left=x+'%';d.style.top=y+'%';con.appendChild(d);radarDots.push({el:d,x,y,vx:0,vy:0,type:t,id:i});}}
function radarLoop(c){const ctx=c.getContext('2d');function f(now){if(!c||!ctx)return;const W=c.width,H=c.height,cx=W/2,cy=H/2,R=Math.min(cx,cy)*0.88;phaseA+=0.007;phaseB+=0.013;phaseC+=0.041;const speedMult=1.0+Math.sin(phaseA)*0.35+Math.sin(phaseB)*0.18+Math.sin(phaseC)*0.04,targetOmega=BASE_OMEGA*speedMult;needleOmega+=(targetOmega-needleOmega)*0.028;needleAngle=(needleAngle+needleOmega)%(Math.PI*2);trail[trailPtr]=needleAngle;trailPtr=(trailPtr+1)%TRAIL_CAP;const fade=0.09+Math.sin(now*0.0011)*0.008;ctx.fillStyle=`rgba(1,5,1,${fade})`;ctx.fillRect(0,0,W,H);for(let i=0;i<TRAIL_CAP-1;i++){let newer=(trailPtr-1-i+TRAIL_CAP)%TRAIL_CAP,older=(trailPtr-2-i+TRAIL_CAP)%TRAIL_CAP,a0=trail[older],a1=trail[newer],recency=1-i/TRAIL_CAP,alpha=Math.pow(recency,1.6)*0.52;if(alpha<0.003)break;let start=a0,end=a1;if(end-start>Math.PI)start+=Math.PI*2;if(start-end>Math.PI)end+=Math.PI*2;ctx.save();ctx.translate(cx,cy);ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,R,start,end,false);ctx.closePath();ctx.fillStyle=`rgba(0,255,65,${alpha})`;ctx.fill();ctx.restore();}
ctx.save();ctx.translate(cx,cy);ctx.rotate(needleAngle);ctx.shadowColor='rgba(0,255,65,0.9)';ctx.shadowBlur=10;const lg=ctx.createLinearGradient(0,0,R,0);lg.addColorStop(0,'rgba(0,255,65,1)');lg.addColorStop(0.55,'rgba(0,255,65,0.8)');lg.addColorStop(0.85,'rgba(0,255,65,0.35)');lg.addColorStop(1,'rgba(0,255,65,0)');ctx.beginPath();ctx.moveTo(4,0);ctx.lineTo(R,0);ctx.strokeStyle=lg;ctx.lineWidth=1.8;ctx.stroke();ctx.shadowBlur=16;ctx.beginPath();ctx.arc(0,0,3.5,0,Math.PI*2);ctx.fillStyle='#00ff41';ctx.fill();ctx.restore();
radarDots.forEach((d,di)=>{const px=d.x/100*W,py=d.y/100*H,dxp=px-cx,dyp=py-cy;let dotAng=Math.atan2(dyp,dxp);if(dotAng<0)dotAng+=Math.PI*2;let diff=needleAngle-dotAng;if(diff<0)diff+=Math.PI*2;const age=dotGlow.get(di)??999;if(diff<0.14&&age>40){dotGlow.set(di,0);if(d.el){d.el.classList.add('active');setTimeout(()=>{if(d.el)d.el.classList.remove('active');},700);}}else dotGlow.set(di,age+1);if(age<60){const t=age/60,ga=(1-t)*(1-t)*0.9;if(ga>0.01){let col=d.type==='purple'?[176,38,255]:d.type==='red'?[255,0,64]:[0,255,65];const gr=ctx.createRadialGradient(px,py,0,px,py,14*(1-t)+4);gr.addColorStop(0,`rgba(${col[0]},${col[1]},${col[2]},${ga})`);gr.addColorStop(1,`rgba(${col[0]},${col[1]},${col[2]},0)`);ctx.beginPath();ctx.arc(px,py,14*(1-t)+4,0,Math.PI*2);ctx.fillStyle=gr;ctx.fill();}}});radarRAF=requestAnimationFrame(f);}
radarRAF=requestAnimationFrame(f);}
function updateOnlineCount(){let e=$('onlineCount');if(e){let c=Math.floor(Math.random()*25)+18;e.textContent=c+' ONLINE';}}

// VIBE CHECK
function startVibeCheck(){ /* ... fungsi lengkap dari file asli ... */ }
function selectGender(el,g){ /* ... */ }
function confirmGender(){ /* ... */ }
async function findRealUserFirst(){ /* ... */ }
function fallbackToAI(){ /* ... */ }
function startRealChat(){ /* ... */ }
function closeChat(){ /* ... */ }
function startTimer(){ /* ... */ }
function updateTimer(){ /* ... */ }
function endChat(){ /* ... */ }
class TypingEngine{ /* ... */ }
const typingEngine=new TypingEngine();
function generateAIRant(){ /* ... */ }
async function sendMsg(){ /* ... */ }
function addMsg(text,isOwn){ /* ... */ }
function selectPlan(el,plan){ /* ... */ }
function upgradeNow(){ /* ... */ }

// WHISPERER
const WS={ /* ... semua fungsi whisperer ... */ };
function openWsModal(){ /* ... */ }
function subscribeWs(){ /* ... */ }
function renderWsInbox(){ /* ... */ }
function timeAgoShort(ts){ /* ... */ }
function openWsCompose(){ /* ... */ }
function closeWsCompose(){ /* ... */ }
function validateWsTo(){ /* ... */ }
function validateWsBody(){ /* ... */ }
function sendWs(){ /* ... */ }
function openWsThread(u){ /* ... */ }
function closeWsThread(){ /* ... */ }
function renderWsThread(u){ /* ... */ }
function sendWsReply(){ /* ... */ }
function updateWsBadge(){ /* ... */ }

// VOID TAP
const VT={ /* ... semua fungsi void tap ... */ };
function updateVtIndicator(){ /* ... */ }
function openVtCompose(){ /* ... */ }
function closeVtCompose(){ /* ... */ }
function sendVoidTap(){ /* ... */ }
function checkVoidTaps(){ /* ... */ }
function openVtReader(tap){ /* ... */ }
function burnVtReader(id){ /* ... */ }
function showVtUpgradeNudge(){ /* ... */ }
function showUpgradeModal(){ /* ... */ }

// INIT
document.addEventListener('DOMContentLoaded',()=>{
  initRadar();renderSpills();updateOnlineCount();updateWsBadge();updateVtIndicator();
  $('chatInput')?.addEventListener('keydown',e=>{if(e.key==='Enter')sendMsg();});
  $('wsThreadInput')?.addEventListener('keydown',e=>{if(e.key==='Enter')sendWsReply();});
  window.addEventListener('beforeunload',()=>{clearInterval(radarInterval);clearInterval(timerInterval);if(radarRAF)cancelAnimationFrame(radarRAF);});
  setInterval(updateOnlineCount,30000);
});
</script>
</body>
</html>
