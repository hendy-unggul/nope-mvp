<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JEJAK - Home</title>
<style>
body{background:#0a0a0a;color:#fff;font-family:sans-serif;padding:20px}
.container{max-width:500px;margin:0 auto}
.card{background:#121212;border:2px solid #00ff88;border-radius:16px;padding:24px;margin-top:20px}
button{padding:12px 24px;background:#00ff88;border:none;border-radius:8px;font-weight:bold;cursor:pointer}
.logout{background:#ff3366;color:#fff;margin-top:20px}
</style>
</head>
<body>
<div class="container">
  <h1>JEJAK</h1>
  
  <div class="card" id="statusCard">
    <h2 id="status">Mengecek session...</h2>
  </div>
  
  <div class="card" id="userCard" style="display:none">
    <h3>User Info:</h3>
    <p id="username"></p>
    <p id="userId"></p>
    <p id="loginTime"></p>
    <button class="logout" onclick="logout()">LOGOUT</button>
  </div>
</div>

<script>
// CEK SESSION DARI LOCALSTORAGE
function checkSession() {
  const username = localStorage.getItem('jejak_username');
  const userId = localStorage.getItem('jejak_user_id');
  const loggedIn = localStorage.getItem('jejak_logged_in');
  
  console.log('Session check:', { username, userId, loggedIn });
  
  const statusEl = document.getElementById('status');
  const userCard = document.getElementById('userCard');
  
  if (!loggedIn || !username || !userId) {
    statusEl.textContent = '❌ Session tidak ditemukan';
    statusEl.style.color = '#ff3366';
    
    // Redirect setelah 2 detik
    setTimeout(() => {
      window.location.href = 'index.html';
    }, 2000);
    return;
  }
  
  // Session valid
  statusEl.textContent = '✅ Session valid';
  statusEl.style.color = '#00ff88';
  
  // Tampilkan user card
  userCard.style.display = 'block';
  document.getElementById('username').textContent = `Username: ${username}`;
  document.getElementById('userId').textContent = `User ID: ${userId}`;
  document.getElementById('loginTime').textContent = `Login time: ${new Date().toLocaleString()}`;
}

function logout() {
  localStorage.clear();
  window.location.href = 'index.html';
}

// Jalankan cek session
checkSession();
</script>
</body>
</html>
