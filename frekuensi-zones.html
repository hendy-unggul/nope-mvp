<!DOCTYPE html>
<html lang="id" data-theme="glitch">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NOPE ‚Äî Frekuensi</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23ff9999'/%3E%3Ctext x='50' y='70' font-size='60' font-weight='bold' font-family='system-ui' text-anchor='middle' fill='%23000'%3ENO%3C/text%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;1,400&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0a;
      --surface: #121212;
      --surface-elevated: #1a1a1a;
      --border: #222222;
      --text: #e6e6e6;
      --text-secondary: #a0a0a0;
      --muted: #8a8a8a;
      --accent: #b266ff;
      --accent-dim: rgba(178, 102, 255, 0.1);
      --logo-color: #ff9999;
      --success: #00ff88;
      --danger: #ff6b6b;
      --warning: #ffd93d;
      --info: #00d4ff;
      --bola: #00ff88;
      --komunitas: #b266ff;
      --petisi: #ffd93d;
      --aksi: #ff6b6b;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'JetBrains Mono', ui-monospace, monospace;
      font-weight: 300;
      font-size: 14px;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }

    .wrapper {
      max-width: 480px;
      margin: 0 auto;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* === HEADER === */
    header {
      position: sticky;
      top: 0;
      background: #000000ee;
      backdrop-filter: blur(12px);
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
      border-bottom: 1px solid var(--border);
    }

    .logo {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 26px;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--logo-color);
      cursor: pointer;
    }

    .top-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-mini {
      display: flex;
      gap: 6px;
      font-size: 11px;
      color: var(--muted);
    }

    .nav-mini span {
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 6px;
      transition: all 0.2s;
    }

    .nav-mini span:hover:not(.active) {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
    }

    .nav-mini span.active {
      color: var(--accent);
      background: var(--accent-dim);
      font-weight: 500;
    }

    .settings-btn {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 18px;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .settings-btn:hover {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
    }

    /* === TAB BAR === */
    .tab-bar {
      position: sticky;
      top: 57px;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      z-index: 99;
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .tab-bar::-webkit-scrollbar {
      display: none;
    }

    .tab-container {
      display: flex;
      gap: 4px;
      padding: 8px 12px;
      min-width: max-content;
    }

    .tab {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: transparent;
      border: none;
      border-radius: 20px;
      color: var(--muted);
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
      position: relative;
    }

    .tab:hover:not(.active) {
      background: var(--surface);
      color: var(--text);
    }

    .tab.active {
      background: var(--surface-elevated);
      color: var(--text);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 2px;
      border-radius: 2px;
    }

    .tab-icon {
      font-size: 16px;
    }

    /* Tab-specific colors */
    .tab[data-tab="bola"].active { color: var(--bola); }
    .tab[data-tab="bola"].active::after { background: var(--bola); }
    
    .tab[data-tab="komunitas"].active { color: var(--komunitas); }
    .tab[data-tab="komunitas"].active::after { background: var(--komunitas); }
    
    .tab[data-tab="petisi"].active { color: var(--petisi); }
    .tab[data-tab="petisi"].active::after { background: var(--petisi); }
    
    .tab[data-tab="aksi"].active { color: var(--aksi); }
    .tab[data-tab="aksi"].active::after { background: var(--aksi); }

    /* === CONTENT AREA === */
    .content-area {
      flex: 1;
      overflow-y: auto;
      position: relative;
    }

    .tab-panel {
      display: none;
      animation: fadeIn 0.3s ease;
      padding: 16px;
    }

    .tab-panel.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* === BOLA PANEL - PRESERVED EXACTLY === */
    .bola-iframe {
      width: 100%;
      height: calc(100vh - 120px);
      border: none;
      background: var(--bg);
    }

    .bola-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 60vh;
      text-align: center;
      padding: 20px;
    }

    .bola-placeholder-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }

    .bola-placeholder-text {
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .bola-placeholder-sub {
      font-size: 12px;
      color: var(--muted);
    }

    /* === KOMUNITAS PANEL === */
    .komunitas-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .komunitas-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 20px;
      font-weight: 600;
    }

    .btn-primary {
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 20px;
      padding: 10px 20px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(178, 102, 255, 0.3);
    }

    .komunitas-grid {
      display: grid;
      gap: 12px;
    }

    .komunitas-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }

    .komunitas-card:hover {
      border-color: var(--accent);
      transform: translateX(4px);
    }

    .komunitas-card.dying {
      border-color: var(--danger);
      opacity: 0.7;
    }

    .komunitas-card.dying::before {
      content: '‚ö†Ô∏è Auto-delete in 5 days';
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--danger);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
    }

    .komunitas-header-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }

    .komunitas-avatar {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent-dim));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
    }

    .komunitas-info {
      flex: 1;
      min-width: 0;
    }

    .komunitas-name {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .komunitas-meta {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      gap: 12px;
    }

    .komunitas-desc {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin-bottom: 12px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .komunitas-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .komunitas-tags {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .komunitas-tag {
      padding: 4px 10px;
      background: var(--surface-elevated);
      border-radius: 12px;
      font-size: 11px;
      color: var(--muted);
    }

    .komunitas-join-btn {
      padding: 6px 16px;
      background: var(--surface-elevated);
      border: 1px solid var(--border);
      border-radius: 16px;
      color: var(--text);
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .komunitas-join-btn:hover {
      background: var(--accent);
      color: #000;
      border-color: var(--accent);
    }

    .komunitas-join-btn.joined {
      background: var(--success);
      color: #000;
      border-color: var(--success);
    }

    /* === CREATE KOMUNITAS MODAL === */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(4px);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      width: 100%;
      max-width: 400px;
      max-height: 90vh;
      overflow-y: auto;
      animation: scaleIn 0.2s ease;
    }

    @keyframes scaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal-header {
      padding: 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 18px;
      font-weight: 600;
    }

    .modal-close {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 24px;
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s;
    }

    .modal-close:hover {
      background: var(--surface-elevated);
      color: var(--text);
    }

    .modal-body {
      padding: 20px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-input, .form-textarea, .form-select {
      width: 100%;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px;
      color: var(--text);
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s;
    }

    .form-input:focus, .form-textarea:focus, .form-select:focus {
      outline: none;
      border-color: var(--accent);
    }

    .form-textarea {
      min-height: 80px;
      resize: vertical;
    }

    .template-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 8px;
    }

    .template-option {
      aspect-ratio: 1;
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 11px;
      color: var(--muted);
    }

    .template-option:hover {
      border-color: var(--accent);
      color: var(--text);
    }

    .template-option.selected {
      border-color: var(--accent);
      background: var(--accent-dim);
      color: var(--accent);
    }

    .template-icon {
      font-size: 24px;
    }

    .form-hint {
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
      line-height: 1.4;
    }

    .form-hint.warning {
      color: var(--warning);
    }

    /* === PETISI PANEL === */
    .petisi-header {
      margin-bottom: 20px;
    }

    .petisi-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .petisi-subtitle {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .petisi-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .petisi-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .petisi-card:hover {
      border-color: var(--petisi);
      transform: translateX(4px);
    }

    .petisi-status {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .petisi-status.open {
      background: rgba(0, 255, 136, 0.15);
      color: var(--success);
    }

    .petisi-status.closed {
      background: var(--surface-elevated);
      color: var(--muted);
    }

    .petisi-status.victory {
      background: rgba(255, 217, 61, 0.15);
      color: var(--petisi);
    }

    .petisi-headline {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
      line-height: 1.3;
    }

    .petisi-desc {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin-bottom: 12px;
    }

    .petisi-progress {
      margin-bottom: 12px;
    }

    .petisi-progress-bar {
      height: 6px;
      background: var(--surface-elevated);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 6px;
    }

    .petisi-progress-fill {
      height: 100%;
      background: var(--petisi);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    .petisi-progress-text {
      font-size: 11px;
      color: var(--muted);
    }

    .petisi-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .petisi-stats {
      display: flex;
      gap: 16px;
      font-size: 12px;
      color: var(--muted);
    }

    .petisi-stat {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .petisi-sign-btn {
      padding: 8px 20px;
      background: var(--petisi);
      color: #000;
      border: none;
      border-radius: 20px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .petisi-sign-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 217, 61, 0.3);
    }

    .petisi-sign-btn.signed {
      background: var(--surface-elevated);
      color: var(--success);
    }

    /* === AKSI PANEL === */
    .aksi-header {
      margin-bottom: 20px;
    }

    .aksi-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .aksi-subtitle {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .aksi-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }

    .aksi-tab {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 20px;
      color: var(--muted);
      font-family: 'Space Grotesk', sans-serif;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .aksi-tab:hover {
      border-color: var(--text-secondary);
      color: var(--text);
    }

    .aksi-tab.active {
      background: var(--aksi);
      color: #000;
      border-color: var(--aksi);
    }

    .aksi-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .aksi-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.2s;
    }

    .aksi-card:hover {
      border-color: var(--aksi);
      transform: translateY(-2px);
    }

    .aksi-image {
      width: 100%;
      height: 140px;
      object-fit: cover;
      background: var(--surface-elevated);
    }

    .aksi-content {
      padding: 16px;
    }

    .aksi-type {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .aksi-type.gerakan {
      background: rgba(255, 107, 107, 0.15);
      color: var(--aksi);
    }

    .aksi-type.donasi {
      background: rgba(0, 212, 255, 0.15);
      color: var(--info);
    }

    .aksi-type.volunteer {
      background: rgba(0, 255, 136, 0.15);
      color: var(--success);
    }

    .aksi-headline {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
      line-height: 1.3;
    }

    .aksi-desc {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.5;
      margin-bottom: 12px;
    }

    .aksi-progress {
      margin-bottom: 12px;
    }

    .aksi-progress-bar {
      height: 6px;
      background: var(--surface-elevated);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 6px;
    }

    .aksi-progress-fill {
      height: 100%;
      background: var(--aksi);
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    .aksi-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .aksi-target {
      font-size: 12px;
      color: var(--muted);
    }

    .aksi-target strong {
      color: var(--text);
    }

    .aksi-cta-btn {
      padding: 8px 20px;
      background: var(--aksi);
      color: #000;
      border: none;
      border-radius: 20px;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .aksi-cta-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
    }

    /* === FOOTER === */
    .zone-footer {
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      padding: 20px;
      border-top: 1px solid var(--border);
      margin-top: auto;
    }

    /* === NOTIFICATION === */
    .notification {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--surface);
      color: var(--text);
      padding: 12px 24px;
      border-radius: 24px;
      font-size: 13px;
      font-family: 'Space Grotesk', sans-serif;
      z-index: 1001;
      border: 1px solid var(--border);
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { transform: translate(-50%, -100%); opacity: 0; }
      to { transform: translate(-50%, 0); opacity: 1; }
    }

    /* === MOBILE === */
    @media (max-width: 480px) {
      .tab {
        padding: 6px 12px;
        font-size: 12px;
      }
      
      .template-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Header -->
    <header>
      <div class="logo" onclick="window.location.href='index.html'">NOPE</div>
      <div class="top-right">
        <div class="nav-mini">
          <span onclick="window.location.href='jejak.html'">Jurnal</span>
          <span onclick="window.location.href='saynope.html'">SayNOPE</span>
          <span onclick="window.location.href='glitch.html'">GLITCH</span>
          <span class="active">Frekuensi</span>
        </div>
        <button class="settings-btn" id="settings-btn">‚öôÔ∏è</button>
      </div>
    </header>

    <!-- Tab Bar -->
    <div class="tab-bar">
      <div class="tab-container">
        <button class="tab active" data-tab="bola" onclick="switchTab('bola')">
          <span class="tab-icon">‚öΩ</span>
          <span>Bola</span>
        </button>
        <button class="tab" data-tab="komunitas" onclick="switchTab('komunitas')">
          <span class="tab-icon">üë•</span>
          <span>Komunitas</span>
        </button>
        <button class="tab" data-tab="petisi" onclick="switchTab('petisi')">
          <span class="tab-icon">‚úçÔ∏è</span>
          <span>Petisi</span>
        </button>
        <button class="tab" data-tab="aksi" onclick="switchTab('aksi')">
          <span class="tab-icon">üî•</span>
          <span>Aksi</span>
        </button>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content-area">
      <!-- BOLA PANEL - PRESERVED -->
      <div class="tab-panel active" id="panel-bola">
        <div class="bola-placeholder">
          <div class="bola-placeholder-icon">‚öΩ</div>
          <div class="bola-placeholder-text">Halaman Bola</div>
          <div class="bola-placeholder-sub">Segera hadir dengan fitur lengkap</div>
        </div>
        <!-- Bola content akan di-load dari file terpisah -->
      </div>

      <!-- KOMUNITAS PANEL -->
      <div class="tab-panel" id="panel-komunitas">
        <div class="komunitas-header">
          <div class="komunitas-title">Komunitas</div>
          <button class="btn-primary" onclick="openCreateKomunitas()">
            <span>+</span> Buat Komunitas
          </button>
        </div>
        
        <div class="komunitas-grid" id="komunitas-list">
          <!-- Komunitas cards injected here -->
        </div>
      </div>

      <!-- PETISI PANEL -->
      <div class="tab-panel" id="panel-petisi">
        <div class="petisi-header">
          <div class="petisi-title">Petisi</div>
          <div class="petisi-subtitle">Dari keluhan jadi aksi kolektif</div>
        </div>
        
        <div class="petisi-list" id="petisi-list">
          <!-- Petisi cards injected here -->
        </div>
      </div>

      <!-- AKSI PANEL -->
      <div class="tab-panel" id="panel-aksi">
        <div class="aksi-header">
          <div class="aksi-title">Aksi & Gerakan</div>
          <div class="aksi-subtitle">Donasi, volunteer, atau ikut gerakan</div>
        </div>
        
        <div class="aksi-tabs">
          <button class="aksi-tab active" onclick="switchAksiTab('all')">Semua</button>
          <button class="aksi-tab" onclick="switchAksiTab('gerakan')">Gerakan</button>
          <button class="aksi-tab" onclick="switchAksiTab('donasi')">Donasi</button>
          <button class="aksi-tab" onclick="switchAksiTab('volunteer')">Volunteer</button>
        </div>
        
        <div class="aksi-list" id="aksi-list">
          <!-- Aksi cards injected here -->
        </div>
      </div>
    </div>

    <div class="zone-footer">Nyambat ‚Ä¢ Aksi ‚Ä¢ Solusi</div>
  </div>

  <!-- Create Komunitas Modal -->
  <div class="modal-overlay" id="createKomunitasModal" onclick="closeModal(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <div class="modal-title">Buat Komunitas</div>
        <button class="modal-close" onclick="closeCreateKomunitas()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Nama Komunitas</label>
          <input type="text" class="form-input" id="komunitas-name" placeholder="Contoh: Night Owls ID" maxlength="30">
        </div>
        
        <div class="form-group">
          <label class="form-label">Deskripsi Singkat</label>
          <textarea class="form-textarea" id="komunitas-desc" placeholder="Apa yang kalian lakukan di komunitas ini?" maxlength="160"></textarea>
        </div>
        
        <div class="form-group">
          <label class="form-label">Pilih Template</label>
          <div class="template-grid">
            <div class="template-option selected" data-template="chat" onclick="selectTemplate(this)">
              <span class="template-icon">üí¨</span>
              <span>Chat</span>
            </div>
            <div class="template-option" data-template="event" onclick="selectTemplate(this)">
              <span class="template-icon">üìÖ</span>
              <span>Event</span>
            </div>
            <div class="template-option" data-template="study" onclick="selectTemplate(this)">
              <span class="template-icon">üìö</span>
              <span>Study</span>
            </div>
            <div class="template-option" data-template="hobby" onclick="selectTemplate(this)">
              <span class="template-icon">üé®</span>
              <span>Hobby</span>
            </div>
            <div class="template-option" data-template="support" onclick="selectTemplate(this)">
              <span class="template-icon">ü´Ç</span>
              <span>Support</span>
            </div>
            <div class="template-option" data-template="gaming" onclick="selectTemplate(this)">
              <span class="template-icon">üéÆ</span>
              <span>Gaming</span>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Tag (maks 3)</label>
          <input type="text" class="form-input" id="komunitas-tags" placeholder="Contoh: mentalhealth, nightowl, genz" maxlength="50">
          <div class="form-hint">Pisahkan dengan koma</div>
        </div>
        
        <div class="form-hint warning">
          ‚ö†Ô∏è Komunitas akan otomatis terhapus jika dalam 30 hari anggota kurang dari 10 orang.
        </div>
        
        <button class="btn-primary" style="width: 100%; margin-top: 20px;" onclick="createKomunitas()">
          Buat Komunitas
        </button>
      </div>
    </div>
  </div>

  <script>
    // Data stores
    let komunitasData = [
      {
        id: 'kom1',
        name: 'Night Owls ID',
        desc: 'Komunitas bagi yang lebih produktif jam 12 malam daripada siang. Share progress, curhat, atau sekadar nemenin begadang.',
        avatar: 'ü¶â',
        members: 234,
        template: 'support',
        tags: ['nightowl', 'productivity', 'genz'],
        created: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000), // 10 days ago
        isJoined: false
      },
      {
        id: 'kom2',
        name: 'Skripsi Survivors',
        desc: 'Yang skripsinya stuck di bab 1, bab 2, atau stuck di hati dosen? Sini ngumpul. Progress report tiap minggu.',
        avatar: 'üìö',
        members: 89,
        template: 'study',
        tags: ['skripsi', 'mahasiswa', 'motivasi'],
        created: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000), // 25 days ago - hampir auto-delete
        isJoined: true
      },
      {
        id: 'kom3',
        name: 'Overthinkers Anonymous',
        desc: 'Tempat aman bagi yang kebanyakan mikir. No judgment, just understanding. Daily check-in tiap jam 9 malam.',
        avatar: 'üß†',
        members: 567,
        template: 'support',
        tags: ['mentalhealth', 'support', 'genz'],
        created: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000),
        isJoined: false
      },
      {
        id: 'kom4',
        name: 'Gaslighting Survivors',
        desc: 'Yang pernah kena gaslighting di relationship, friendship, atau workplace. Recovery together.',
        avatar: 'üíî',
        members: 7, // < 10, akan auto-delete
        template: 'support',
        tags: ['healing', 'toxic', 'support'],
        created: new Date(Date.now() - 28 * 24 * 60 * 60 * 1000), // 28 days ago - critical
        isJoined: false
      }
    ];

    let petisiData = [
      {
        id: 'pet1',
        title: 'Stop Ujian Nasional Berbasis Kebocoran!',
        desc: 'Sudah 3 tahun berturut-turut soal bocor. Kami mahasiswa dan siswa menuntut sistem ujian yang adil dan transparan.',
        status: 'open',
        signatures: 12450,
        target: 20000,
        daysLeft: 15,
        isSigned: false
      },
      {
        id: 'pet2',
        title: 'Akses Kesehatan Mental Gratis untuk Gen Z',
        desc: 'Biaya konsultasi psikolog masih mahal. Kami minta pemerintah sediakan layanan kesehatan mental gratis di setiap kampus.',
        status: 'open',
        signatures: 8934,
        target: 10000,
        daysLeft: 8,
        isSigned: true
      },
      {
        id: 'pet3',
        title: 'Regulasi Kerja Remote yang Jelas',
        desc: 'Banyak perusahaan seenaknya atur jam kerja remote. Kami butuh payung hukum yang melindungi pekerja.',
        status: 'victory',
        signatures: 15600,
        target: 15000,
        daysLeft: 0,
        isSigned: false
      }
    ];

    let aksiData = [
      {
        id: 'aksi1',
        type: 'donasi',
        title: 'Bantu Korban Banjir Jakarta',
        desc: 'Donasi untuk logistik, makanan, dan obat-obatan. 100% transparan dengan laporan real-time.',
        image: 'https://images.unsplash.com/photo-1547683905-174b4b5649b4?w=400&q=80',
        raised: 45000000,
        target: 100000000,
        donors: 1234,
        cta: 'Donasi'
      },
      {
        id: 'aksi2',
        type: 'gerakan',
        title: '#InternetUntukSemua',
        desc: 'Gerakan untuk akses internet gratis di daerah terpencil. Join sebagai volunteer atau spread the word.',
        image: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&q=80',
        participants: 3400,
        target: 5000,
        cta: 'Ikut Gerakan'
      },
      {
        id: 'aksi3',
        type: 'volunteer',
        title: 'Mengajar Anak Jalanan',
        desc: 'Cari volunteer untuk mengajar literasi dasar anak-anak di shelter Jakarta. Setiap Sabtu, 2 jam.',
        image: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400&q=80',
        volunteers: 45,
        target: 60,
        cta: 'Daftar Volunteer'
      }
    ];

    let selectedTemplate = 'chat';

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderKomunitas();
      renderPetisi();
      renderAksi('all');
      
      // Check auto-delete komunitas setiap hari
      setInterval(checkAutoDelete, 24 * 60 * 60 * 1000);
      checkAutoDelete(); // Check sekali saat load
    });

    // Tab switching
    function switchTab(tabName) {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
        if (tab.dataset.tab === tabName) tab.classList.add('active');
      });

      document.querySelectorAll('.tab-panel').forEach(panel => {
        panel.classList.remove('active');
      });
      document.getElementById(`panel-${tabName}`).classList.add('active');
    }

    // Komunitas functions
    function renderKomunitas() {
      const container = document.getElementById('komunitas-list');
      container.innerHTML = '';

      komunitasData.forEach(kom => {
        const daysOld = Math.floor((Date.now() - kom.created) / (24 * 60 * 60 * 1000));
        const isDying = daysOld >= 25 && kom.members < 10;
        
        const card = document.createElement('div');
        card.className = `komunitas-card ${isDying ? 'dying' : ''}`;
        card.onclick = () => openKomunitas(kom.id);
        
        card.innerHTML = `
          <div class="komunitas-header-row">
            <div class="komunitas-avatar">${kom.avatar}</div>
            <div class="komunitas-info">
              <div class="komunitas-name">${kom.name}</div>
              <div class="komunitas-meta">
                <span>üë• ${kom.members} anggota</span>
                <span>‚Ä¢ ${daysOld} hari</span>
              </div>
            </div>
          </div>
          <div class="komunitas-desc">${kom.desc}</div>
          <div class="komunitas-footer">
            <div class="komunitas-tags">
              ${kom.tags.map(tag => `<span class="komunitas-tag">#${tag}</span>`).join('')}
            </div>
            <button class="komunitas-join-btn ${kom.isJoined ? 'joined' : ''}" 
              onclick="event.stopPropagation(); toggleJoin('${kom.id}')">
              ${kom.isJoined ? 'Joined ‚úì' : 'Join'}
            </button>
          </div>
        `;
        
        container.appendChild(card);
      });
    }

    function openCreateKomunitas() {
      document.getElementById('createKomunitasModal').classList.add('active');
    }

    function closeCreateKomunitas() {
      document.getElementById('createKomunitasModal').classList.remove('active');
    }

    function closeModal(e) {
      if (e.target.classList.contains('modal-overlay')) {
        closeCreateKomunitas();
      }
    }

    function selectTemplate(el) {
      document.querySelectorAll('.template-option').forEach(opt => opt.classList.remove('selected'));
      el.classList.add('selected');
      selectedTemplate = el.dataset.template;
    }

    function createKomunitas() {
      const name = document.getElementById('komunitas-name').value.trim();
      const desc = document.getElementById('komunitas-desc').value.trim();
      const tagsInput = document.getElementById('komunitas-tags').value.trim();
      
      if (!name || !desc) {
        showNotification('Nama dan deskripsi wajib diisi');
        return;
      }
      
      const tags = tagsInput ? tagsInput.split(',').map(t => t.trim()).slice(0, 3) : ['komunitas'];
      const templateIcons = {
        chat: 'üí¨', event: 'üìÖ', study: 'üìö', 
        hobby: 'üé®', support: 'ü´Ç', gaming: 'üéÆ'
      };
      
      const newKomunitas = {
        id: 'kom' + Date.now(),
        name: name,
        desc: desc,
        avatar: templateIcons[selectedTemplate],
        members: 1, // Creator
        template: selectedTemplate,
        tags: tags,
        created: new Date(),
        isJoined: true
      };
      
      komunitasData.unshift(newKomunitas);
      renderKomunitas();
      closeCreateKomunitas();
      showNotification('Komunitas berhasil dibuat! üéâ');
      
      // Reset form
      document.getElementById('komunitas-name').value = '';
      document.getElementById('komunitas-desc').value = '';
      document.getElementById('komunitas-tags').value = '';
    }

    function toggleJoin(komId) {
      const kom = komunitasData.find(k => k.id === komId);
      if (!kom) return;
      
      if (!localStorage.getItem('nope_username')) {
        showNotification('Login dulu untuk join komunitas üîê');
        return;
      }
      
      kom.isJoined = !kom.isJoined;
      kom.members += kom.isJoined ? 1 : -1;
      renderKomunitas();
      
      showNotification(kom.isJoined ? 'Joined! Selamat datang üëã' : 'Left komunitas');
    }

    function openKomunitas(komId) {
      const kom = komunitasData.find(k => k.id === komId);
      showNotification(`Opening ${kom.name}...`);
      // Redirect ke halaman komunitas detail
    }

    function checkAutoDelete() {
      const now = Date.now();
      const toDelete = [];
      
      komunitasData.forEach((kom, index) => {
        const daysOld = Math.floor((now - kom.created) / (24 * 60 * 60 * 1000));
        if (daysOld >= 30 && kom.members < 10) {
          toDelete.push(index);
        }
      });
      
      // Hapus dari belakang biar index tidak bergeser
      toDelete.reverse().forEach(index => {
        const kom = komunitasData[index];
        console.log(`Auto-deleted komunitas: ${kom.name} (30 days, ${kom.members} members)`);
        komunitasData.splice(index, 1);
      });
      
      if (toDelete.length > 0) {
        renderKomunitas();
        showNotification(`${toDelete.length} komunitas terhapus otomatis (tidak aktif)`);
      }
    }

    // Petisi functions
    function renderPetisi() {
      const container = document.getElementById('petisi-list');
      container.innerHTML = '';
      
      petisiData.forEach(petisi => {
        const progress = Math.min((petisi.signatures / petisi.target) * 100, 100);
        const statusLabels = {
          open: 'Buka',
          closed: 'Ditutup',
          victory: 'Kemenangan!'
        };
        
        const card = document.createElement('div');
        card.className = 'petisi-card';
        card.innerHTML = `
          <span class="petisi-status ${petisi.status}">${statusLabels[petisi.status]}</span>
          <h3 class="petisi-headline">${petisi.title}</h3>
          <p class="petisi-desc">${petisi.desc}</p>
          <div class="petisi-progress">
            <div class="petisi-progress-bar">
              <div class="petisi-progress-fill" style="width: ${progress}%"></div>
            </div>
            <div class="petisi-progress-text">${petisi.signatures.toLocaleString()} dari ${petisi.target.toLocaleString()} tanda tangan</div>
          </div>
          <div class="petisi-footer">
            <div class="petisi-stats">
              <span class="petisi-stat">‚è∞ ${petisi.daysLeft > 0 ? petisi.daysLeft + ' hari lagi' : 'Selesai'}</span>
              <span class="petisi-stat">üì¢ ${Math.floor(progress)}%</span>
            </div>
            <button class="petisi-sign-btn ${petisi.isSigned ? 'signed' : ''}" 
              onclick="signPetisi('${petisi.id}')">
              ${petisi.isSigned ? 'Signed ‚úì' : 'Tanda Tangani'}
            </button>
          </div>
        `;
        
        container.appendChild(card);
      });
    }

    function signPetisi(petId) {
      const petisi = petisiData.find(p => p.id === petId);
      if (!petisi) return;
      
      if (!localStorage.getItem('nope_username')) {
        showNotification('Login dulu untuk menandatangani üîê');
        return;
      }
      
      if (petisi.isSigned) {
        showNotification('Kamu sudah menandatangani petisi ini');
        return;
      }
      
      petisi.isSigned = true;
      petisi.signatures++;
      renderPetisi();
      showNotification('Petisi ditandatangani! Terima kasih ‚úä');
    }

    // Aksi functions
    function switchAksiTab(type) {
      document.querySelectorAll('.aksi-tab').forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
      renderAksi(type);
    }

    function renderAksi(filterType) {
      const container = document.getElementById('aksi-list');
      container.innerHTML = '';
      
      const filtered = filterType === 'all' 
        ? aksiData 
        : aksiData.filter(a => a.type === filterType);
      
      filtered.forEach(aksi => {
        const progress = aksi.raised && aksi.target 
          ? Math.min((aksi.raised / aksi.target) * 100, 100)
          : aksi.participants && aksi.target
            ? Math.min((aksi.participants / aksi.target) * 100, 100)
            : 0;
        
        const progressText = aksi.raised 
          ? `Rp${(aksi.raised / 1000000).toFixed(1)}jt dari Rp${(aksi.target / 1000000).toFixed(0)}jt`
          : `${aksi.participants} dari ${aksi.target} orang`;
        
        const card = document.createElement('div');
        card.className = 'aksi-card';
        card.innerHTML = `
          <img src="${aksi.image}" alt="${aksi.title}" class="aksi-image">
          <div class="aksi-content">
            <span class="aksi-type ${aksi.type}">${aksi.type}</span>
            <h3 class="aksi-headline">${aksi.title}</h3>
            <p class="aksi-desc">${aksi.desc}</p>
            <div class="aksi-progress">
              <div class="aksi-progress-bar">
                <div class="aksi-progress-fill" style="width: ${progress}%"></div>
              </div>
            </div>
            <div class="aksi-footer">
              <span class="aksi-target">${progressText}</span>
              <button class="aksi-cta-btn" onclick="joinAksi('${aksi.id}')">${aksi.cta}</button>
            </div>
          </div>
        `;
        
        container.appendChild(card);
      });
    }

    function joinAksi(aksiId) {
      const aksi = aksiData.find(a => a.id === aksiId);
      if (!localStorage.getItem('nope_username')) {
        showNotification('Login dulu untuk ikut aksi üîê');
        return;
      }
      showNotification(`Mengarahkan ke ${aksi.cta}...`);
    }

    // Utilities
    function showNotification(message) {
      const existing = document.querySelector('.notification');
      if (existing) existing.remove();
      
      const notif = document.createElement('div');
      notif.className = 'notification';
      notif.textContent = message;
      document.body.appendChild(notif);
      
      setTimeout(() => {
        notif.style.opacity = '0';
        setTimeout(() => notif.remove(), 300);
      }, 2500);
    }

    // Settings
    document.getElementById('settings-btn').onclick = () => {
      if (confirm('Keluar dari akun?')) {
        localStorage.removeItem('nope_username');
        window.location.href = 'index.html';
      }
    };

    // Keyboard nav
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeCreateKomunitas();
    });
  </script>
</body>
</html>
