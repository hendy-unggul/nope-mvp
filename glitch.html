<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NOPE ‚Äî GLITCH</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;1,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0a;
      --surface: #121212;
      --text: #e6e6e6;
      --muted: #8a8a8a;
      --border: #222222;
      --accent: #b266ff;
      --quote-bg: rgba(178, 102, 255, 0.12);
      --emoji-size: 20px;
      --paid: #4caf50;
    }

    * { box-sizing: border-box; }
    body {
      background-color: var(--bg);
      color: var(--text);
      margin: 0;
      font-family: 'JetBrains Mono', ui-monospace, SFMono-Regular, 'SF Mono', Consolas, monospace;
      font-weight: 300;
      font-size: 15px;
      line-height: 1.55;
      padding-bottom: 32px;
    }

    .wrapper {
      padding: 0 16px;
      max-width: 100%;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0 16px;
    }

    .logo {
      font-weight: 500;
      font-size: 20px;
      letter-spacing: -0.5px;
    }

    .settings-btn {
      background: transparent;
      border: none;
      color: var(--muted);
      font-size: 18px;
      cursor: pointer;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .settings-btn:hover {
      color: var(--text);
      background: var(--border);
    }

    .greeting {
      font-size: 18px;
      font-weight: 400;
      margin: 4px 0 24px;
    }

    .pick-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 18px;
      margin-bottom: 22px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .pick-card:hover {
      background: #161616;
    }

    .pick-image {
      width: 100%;
      aspect-ratio: 3 / 2;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 16px;
      display: block;
      filter: contrast(1.1) saturate(0.9);
    }

    .pick-title {
      font-size: 18px;
      margin-bottom: 12px;
      font-weight: 500;
      line-height: 1.35;
    }

    .meta {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 14px;
      font-style: italic;
    }

    p {
      font-size: 15px;
      margin-bottom: 12px;
      line-height: 1.55;
    }

    strong { font-weight: 500; color: var(--accent); }
    em { font-style: italic; color: var(--text); }

    .quote {
      background: var(--quote-bg);
      border-left: 2px solid var(--accent);
      padding: 12px 14px;
      margin: 16px 0;
      font-style: italic;
      border-radius: 0 6px 6px 0;
      font-size: 15px;
      line-height: 1.5;
    }

    .signature {
      margin-top: 16px;
      font-style: italic;
      color: var(--muted);
      font-size: 14px;
      font-weight: 400;
    }

    .response-bar {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-top: 18px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
    }

    .emoji-btn {
      background: none;
      border: none;
      font-size: var(--emoji-size);
      cursor: pointer;
      opacity: 0.8;
      transition: opacity 0.2s, transform 0.1s;
    }

    .emoji-btn:hover {
      opacity: 1;
      transform: scale(1.15);
    }

    .comment-btn {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 20px;
      cursor: pointer;
      opacity: 0.8;
      margin-left: auto;
    }

    .comment-btn:hover {
      color: var(--text);
      opacity: 1;
    }

    /* Modal Komentar */
    .comment-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: flex-end;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .comment-modal.active {
      opacity: 1;
      pointer-events: all;
    }

    .modal-content {
      background: var(--surface);
      border-radius: 16px 16px 0 0;
      padding: 20px 16px;
      width: 100%;
      max-height: 60vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .close-modal {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 24px;
      cursor: pointer;
    }

    .pay-prompt {
      background: #1a1a1a;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 16px;
      text-align: center;
      margin-top: 12px;
    }

    .pay-btn {
      background: var(--paid);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-family: inherit;
      font-weight: 500;
      margin-top: 10px;
      cursor: pointer;
    }

    .comment-form {
      display: none;
    }

    .comment-form.active {
      display: block;
      margin-top: 12px;
    }

    textarea {
      width: 100%;
      background: #1a1a1a;
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      padding: 10px;
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
      min-height: 60px;
    }

    .submit-comment {
      background: var(--accent);
      color: #000;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-family: inherit;
      font-weight: 600;
      margin-top: 10px;
      cursor: pointer;
    }

    .tagline {
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      padding: 0 0 24px;
      line-height: 1.6;
      margin: 0 auto 24px;
      max-width: 340px;
    }

    .tagline strong {
      color: var(--accent);
      display: block;
      margin-top: 4px;
      font-weight: 500;
    }

    @media (min-width: 768px) {
      .pick-card {
        max-width: 580px;
        margin: 0 auto 24px;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <header>
      <div class="logo">NOPE</div>
      <button class="settings-btn" onclick="window.location.href='glitch.html'">‚ãØ</button>
    </header>

    <div class="greeting">Hello @<span id="username-display"></span></div>

    <div id="cards-container">
      <!-- Cards di-generate via JS -->
    </div>

    <div class="tagline">
      kami mengarsip yang tak minta diingat ‚Äî<br>
      tapi layak dikenang.<br>
      <strong>‚Äî glitch generation</strong>
    </div>
  </div>

  <div class="comment-modal" id="commentModal">
    <div class="modal-content">
      <div class="modal-header">
        <div>Komentar</div>
        <button class="close-modal" id="closeModal">√ó</button>
      </div>
      <div id="commentContent"></div>
    </div>
  </div>

  <script>
    const isSubscribed = localStorage.getItem('nope_subscribed') === 'true';

    // Data dummy: hanya type yang cocok untuk GLITCH
    const articles = [
      {
        id: 'film',
        title: 'Reza Rahadian dan Ilusi Kesempurnaan',
        meta: 'untuk yang lelah berakting jadi kuat',
        image: 'https://images.unsplash.com/photo-1631724315567-8a7e625d3d9a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80',
        content: `
          <p>‚ÄúKita memuji senyumnya ‚Äî tapi lupa bertanya:<br>Di mana dia menangis?‚Äù</p>
          <p>Reza Rahadian bukan aktor. Ia <strong>cermin zaman yang takut retak</strong>...</p>
          <blockquote class="quote">
            Ini bukan kritik pada Reza ‚Äî<br>
            ini teriakan untuk diri kita sendiri:<br>
            kapan terakhir kali kita berani tampil rapuh?
          </blockquote>
          <p>Dan mungkin, Reza juga butuh izin untuk <strong>tidak sempurna.</strong></p>
          <div class="signature">‚Äî @HD, 1% petani 99% failure...</div>
        `
      },
      {
        id: 'musik',
        title: 'Hindia: Lagu untuk yang Lelah Menunggu',
        meta: 'untuk yang janji ‚Äúnanti‚Äù tapi hidupnya mandek',
        image: 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80',
        content: `<p>‚ÄúKita terlalu sibuk mengejar ‚Äòbesok‚Äô sampai lupa hidup hari ini.‚Äù</p>
          <blockquote class="quote">
            ini lagu untuk yang pernah bilang:<br>
            ‚Äúgue nungguin dia berubah.‚Äù<br>
            tapi yang berubah justru gue ‚Äî jadi lebih kosong.
          </blockquote>
          <p>Karena kadang, kebahagiaan itu bukan sesuatu yang bisa diarsip ‚Äî tapi sesuatu yang <strong>hilang begitu kamu coba foto</strong>.</p>
          <div class="signature">‚Äî @HD, 1% petani 99% failure...</div>`
      },
      {
        id: 'buku',
        title: 'Madilog: Senjata untuk yang Takut Berpikir',
        meta: 'untuk yang lelah dikasih tahu ‚Äúikut aja‚Äù',
        image: 'https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80',
        content: `<p>‚ÄúDi era algoritma, berani berpikir sendiri adalah bentuk perlawanan.‚Äù</p>
          <blockquote class="quote">
            ‚Äúseorang pejuang harus berani sendiri.<br>
            karena kebenaran seringkali lahir di tempat yang sepi.‚Äù
          </blockquote>
          <p>Dan Tan Malaka bukan penulis ‚Äî ia <strong>pelatih berpikir</strong>.</p>
          <div class="signature">‚Äî @HD, 1% petani 99% failure...</div>`
      },
      // ‚ú® GANTI HANGOUT DENGAN WAWANCARA
      {
        id: 'interview',
        title: 'Wawancara: @HD ‚Äî "Aku Memilih Jadi Gagal"',
        meta: 'untuk yang takut disebut tidak cukup',
        image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80',
        content: `<p>‚ÄúOrang sukses punya roadmap. Aku punya peta kuburan mimpi.‚Äù</p>
          <p>Di ruang kecil ber-AC, @HD menyalakan rokok ‚Äî padahal di luar hujan.<br>
          ‚ÄúSaya bukan gagal karena tidak mencoba. Saya gagal karena mencoba terlalu banyak versi diri.‚Äù</p>
          <blockquote class="quote">
            Sistem ini tidak minta kita berhasil.<br>
            Sistem ini minta kita berhenti bertanya.
          </blockquote>
          <p>Maka, kegagalan saya adalah bentuk perlawanan paling sunyi.</p>
          <div class="signature">‚Äî @HD, 1% petani 99% failure...</div>`
      }
    ];

    let cardOrder = JSON.parse(localStorage.getItem('glitch_card_order')) || articles.map(a => a.id);
    const sortedArticles = [...articles].sort((a, b) => cardOrder.indexOf(a.id) - cardOrder.indexOf(b.id));

    const container = document.getElementById('cards-container');
    sortedArticles.forEach(article => {
      const card = document.createElement('div');
      card.className = 'pick-card';
      card.innerHTML = `
        <img src="${article.image}" alt="${article.title}" class="pick-image">
        <div class="pick-title">${article.title}</div>
        <span class="meta">${article.meta}</span>
        ${article.content}
        <div class="response-bar">
          <button class="emoji-btn" data-emoji="üòä">üòä</button>
          <button class="emoji-btn" data-emoji="üò¢">üò¢</button>
          <button class="emoji-btn" data-emoji="ü§ó">ü§ó</button>
          <button class="emoji-btn" data-emoji="üî•">üî•</button>
          <button class="comment-btn" title="Komentar">üí¨</button>
        </div>
      `;
      
      card.addEventListener('click', (e) => {
        if (!e.target.closest('.emoji-btn') && !e.target.closest('.comment-btn')) {
          const newOrder = [article.id, ...cardOrder.filter(id => id !== article.id)];
          localStorage.setItem('glitch_card_order', JSON.stringify(newOrder));
          window.scrollTo({ top: 0, behavior: 'smooth' });
          setTimeout(() => location.reload(), 300);
        }
      });

      card.querySelectorAll('.emoji-btn').forEach(btn => btn.addEventListener('click', e => e.stopPropagation()));

      card.querySelector('.comment-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        openCommentModal(article.title);
      });

      container.appendChild(card);
    });

    // Modal komentar (sama seperti sebelumnya)
    const modal = document.getElementById('commentModal');
    const closeModal = document.getElementById('closeModal');
    const commentContent = document.getElementById('commentContent');

    function openCommentModal(title) {
      if (isSubscribed) {
        commentContent.innerHTML = `
          <div><strong>${title}</strong></div>
          <div class="comment-form active">
            <textarea placeholder="Tulis komentarmu..."></textarea>
            <button class="submit-comment">Kirim</button>
          </div>
        `;
      } else {
        commentContent.innerHTML = `
          <div><strong>${title}</strong></div>
          <div class="pay-prompt">
            <div>Komentar hanya tersedia untuk anggota NOPE.</div>
            <div>Bantu kami tetap glitch ‚Äî bayar Rp5.000/bulan.</div>
            <button class="pay-btn" id="payBtn">Aktifkan Komentar</button>
          </div>
        `;
        document.getElementById('payBtn').addEventListener('click', () => {
          localStorage.setItem('nope_subscribed', 'true');
          alert('Terima kasih! Komentar sekarang aktif. ü´∂\n(Demo: refresh halaman untuk melihat perubahan)');
          modal.classList.remove('active');
        });
      }
      modal.classList.add('active');
    }

    closeModal.addEventListener('click', () => modal.classList.remove('active'));
    modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('active'); });

    document.getElementById('username-display').textContent = localStorage.getItem('nope_username') || 'kawan';
  </script>
</body>
</html>
